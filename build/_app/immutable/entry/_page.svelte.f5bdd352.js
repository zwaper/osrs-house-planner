import{S as ge,i as pe,s as _e,e as ce,b as F,C as K,h as f,k as b,q,l as k,m as y,r as j,n as E,D as d,E as me,u as Y,a as M,c as P,P as En,G as $,K as Le,Q as Ze,o as un,I as Q,R as mo,v as fe,d as U,f as he,g as H,L as uo,M as fo,N as ho,O as go,T as dn,U as ze,J as Oe,p as ee,w as po,V as Xe,F as Je,W as Ke,y as ve,z as be,A as ke,B as ye,X as an,H as vo,Y as bo}from"../chunks/index.5940599a.js";import{p as ko}from"../chunks/stores.819351aa.js";import{j as Ce,e as yo}from"../chunks/singletons.90ab83ff.js";Ce.disable_scroll_handling;const Pe=Ce.goto;Ce.invalidate;Ce.invalidateAll;Ce.preload_data;Ce.preload_code;Ce.before_navigate;Ce.after_navigate;const Ee=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],Te=9,Be=9,wo=(t,e)=>{const o={house:t,num:e,rooms:[]};for(let n=0;n<Be;n++){o.rooms.push([]);for(let l=0;l<Te;l++)o.rooms[n].push(null)}return o},Eo=t=>{const e=t.floors.map(u=>u.rooms).flat(2).filter(u=>!!u);let o=0,n=Te,l=Be,i=0,a=0,m=null;const s=[],r=[];let c=!1;for(const u of e)o+=u.type.cost,m=m&&u.type.minLvl<=m.type.minLvl?m:u,n=Math.min(n,u.x),i=Math.max(i,u.x),l=Math.min(l,u.y),a=Math.max(a,u.y),(u.type.key==="garden"||u.type.key==="formal_garden")&&(c=!0);if(c||s.push("You have must have at least one 'Garden' or 'Formal Garden' to place an exit portal!"),m&&r.push({name:"Highest Level Room",value:m.type.name,limit:"-",level:m.type.minLvl}),e.length>0){const u=Ee.find(p=>p.rooms>=e.length);if(u)r.push({name:"Number of Rooms",value:e.length,limit:u.rooms,level:u.level});else{const p=Ee[Ee.length-1].rooms;s.push(`You have too many rooms (${e.length})! You cannot have more than ${p}`)}}const _=Math.max(0,i-n+1);if(_>0){const u=Ee.find(p=>p.extent[0]>=_);if(u)r.push({name:"Extent X",value:_,limit:u.extent[0],level:u.level});else{const p=Ee[Ee.length-1].extent[0];s.push(`Your house is too wide (${_})! It can be at most ${p} wide`)}}const g=Math.max(0,a-l+1);if(g>0){const u=Ee.find(p=>p.extent[1]>=g);if(u)r.push({name:"Extent Y",value:g,limit:u.extent[1],level:u.level});else{const p=Ee[Ee.length-1].extent[1];s.push(`Your house is too tall (${g})! It can be at most ${p} tall`)}}return r.sort((u,p)=>p.level-u.level),{totalPrice:o,levelRequirements:r,extent:[_,g],errors:s}},$e=-1,rn=1,ro=(t="Default")=>{const e={name:t,floors:[]};for(let o=$e;o<=rn;o++)e.floors.push(wo(e,o));return e};var Re=(t=>(t[t.North=0]="North",t[t.East=1]="East",t[t.South=2]="South",t[t.West=3]="West",t))(Re||{});const sn=t=>Re[t].toLowerCase(),fn=(t,e=1)=>(t+=e)%4,cn=t=>(t==null?void 0:t.type.doors.map(e=>fn(e,t.orientation)))||[],Tn=(t,e,o,n)=>({floor:t,x:e,y:o,type:n,orientation:Re.North,hotspots:Array(n.hotspots.length).fill(null)}),N=Re;function h(t){return t.startsWith("/")?`${yo}${t}`:t}const Ge=[{key:"garden",name:"Garden",cost:1e3,minLvl:1,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[{name:"Centrepiece",options:[{id:"exit_portal",name:"Exit Portal",img:h("/icons/garden/Exit_portal_icon.png")},{id:"decorative_rock",name:"Decorative Rock",img:h("/icons/garden/Decorative_rock_icon.png")},{id:"pond",name:"Pond",img:h("/icons/garden/Pond_icon.png")},{id:"imp_statue",name:"Imp Statue",img:h("/icons/garden/Imp_statue_icon.png")},{id:"dungeon_entrance",name:"Dungeon Entrance",img:h("/icons/garden/Dungeon_entrance_icon.png")}]},{name:"Tree",options:[{id:"tree",name:"Tree",img:h("/icons/garden/Tree_Construction_icon.png")},{id:"nice_tree",name:"Nice Tree",img:h("/icons/garden/Nice_tree_icon.png")},{id:"oak_tree",name:"Oak Tree",img:h("/icons/garden/Oak_tree_icon.png")},{id:"willow_tree",name:"Willow_tree",img:h("/icons/garden/Willow_tree_Construction_icon.png")},{id:"maple_tree",name:"Maple Tree",img:h("/icons/garden/Maple_tree_Construction_icon.png")},{id:"yew_tree",name:"Yew Tree",img:h("/icons/garden/Yew_tree_Construction_icon.png")},{id:"magic_tree",name:"Magic Tree",img:h("/icons/garden/Magic_tree_Construction_icon.png")}]},{name:"Big Tree",options:[{id:"tree",name:"Tree",img:h("/icons/garden/Tree_Construction_icon.png")},{id:"nice_tree",name:"Nice Tree",img:h("/icons/garden/Nice_tree_icon.png")},{id:"oak_tree",name:"Oak Tree",img:h("/icons/garden/Oak_tree_icon.png")},{id:"willow_tree",name:"Willow_tree",img:h("/icons/garden/Willow_tree_Construction_icon.png")},{id:"maple_tree",name:"Maple Tree",img:h("/icons/garden/Maple_tree_Construction_icon.png")},{id:"yew_tree",name:"Yew Tree",img:h("/icons/garden/Yew_tree_Construction_icon.png")},{id:"magic_tree",name:"Magic Tree",img:h("/icons/garden/Magic_tree_Construction_icon.png")}]},{name:"Small Plant 1",options:[{id:"plant",name:"Plant",img:h("/icons/garden/Plant_icon.png")},{id:"small_fern",name:"Small Fern",img:h("/icons/garden/Small_fern_icon.png")},{id:"fern",name:"Fern",img:h("/icons/garden/Fern_small_plant_icon.png")}]},{name:"Small Plant 2",options:[{id:"dock_leaf",name:"Dock Leaf",img:h("/icons/garden/Dock_leaf_icon.png")},{id:"thistle",name:"Thistle",img:h("/icons/garden/Thistle_icon.png")},{id:"reeds",name:"Reeds",img:h("/icons/garden/Reeds_icon.png")}]},{name:"Big Plant 1",options:[{id:"pumpkin",name:"Pumpkin",img:h("/icons/garden/Pumpkin_icon.png")},{id:"beehive_1",name:"Beehive (Style 1)",img:h("/icons/garden/Beehive_style_1_icon.png")},{id:"beehive_2",name:"Beehive (Style 2)",img:h("/icons/garden/Beehive_style_2_icon.png")},{id:"big_fern",name:"Fern",img:h("/icons/garden/Fern_big_plant_icon.png")},{id:"bush",name:"Big Bush",img:h("/icons/garden/Bush_icon.png")},{id:"tall_plant",name:"Tall Plant",img:h("/icons/garden/Tall_plant_icon.png")}]},{name:"Big Plant 2",options:[{id:"pumpkin",name:"Pumpkin",img:h("/icons/garden/Pumpkin_icon.png")},{id:"beehive_1",name:"Beehive (Style 1)",img:h("/icons/garden/Beehive_style_1_icon.png")},{id:"beehive_2",name:"Beehive (Style 2)",img:h("/icons/garden/Beehive_style_2_icon.png")},{id:"short_plant",name:"Short Plant",img:h("/icons/garden/Short_plant_icon.png")},{id:"large_leaf_bush",name:"Large Leaf Bush",img:h("/icons/garden/Large_leaf_bush_icon.png")},{id:"huge_plant",name:"Huge Plant",img:h("/icons/garden/Huge_plant_icon.png")}]},{name:"Tip jar",options:[{id:"tip_jar",name:"Tip Jar",img:h("/icons/garden/Tip_jar_icon.png")}]}],open:!0,floors:[0]},{key:"parlour",name:"Parlour",cost:1e3,minLvl:1,doors:[N.East,N.South,N.West],bg:"#424242",hotspots:[{name:"Bookcase",options:[{id:"wooden_bookcase",name:"Wooden Bookcase",img:h("/icons/parlour/Wooden_bookcase_icon.png")},{id:"oak_bookcase",name:"Oak Bookcase",img:h("/icons/parlour/Oak_bookcase_icon.png")},{id:"mahogany_bookcase",name:"Mahogany Bookcase",img:h("/icons/parlour/Mahogany_bookcase_icon.png")}]},{name:"Chairs",options:[{id:"crude_wooden_chair",name:"Crude Wooden Chair",img:h("/icons/parlour/Crude_wooden_chair_icon.png")},{id:"wooden_chair",name:"Wooden Chair",img:h("/icons/parlour/Wooden_chair_icon.png")},{id:"rocking_chair",name:"Rocking Char",img:h("/icons/parlour/Rocking_chair_icon.png")},{id:"oak_chair",name:"Oak Chair",img:h("/icons/parlour/Oak_chair_icon.png")},{id:"oak_armchair",name:"Oak Armchair",img:h("/icons/parlour/Oak_armchair_icon.png")},{id:"teak_armchair",name:"Teak Armchair",img:h("/icons/parlour/Teak_armchair_icon.png")},{id:"mahogany_armchair",name:"Mahogany Armchair",img:h("/icons/parlour/Mahogany_armchair_icon.png")}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:h("/icons/parlour/Torn_curtains_icon.png")},{id:"curtains",name:"Curtains",img:h("/icons/parlour/Curtains_icon.png")},{id:"opulent_curtains",name:"Opulent Curtains",img:h("/icons/parlour/Opulent_curtains_icon.png")},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:h("/icons/parlour/Raging_echoes_curtains_icon.png")}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:h("/icons/parlour/Clay_fireplace_icon.png")},{id:"stone_fireplace",name:"Stone Fireplace",img:h("/icons/parlour/Stone_fireplace_icon.png")},{id:"marble_fireplace",name:"Marble Fireplace",img:h("/icons/parlour/Marble_fireplace_icon.png")}]},{name:"Rug",options:[{id:"brown_rug",name:"Brown Rug",img:h("/icons/parlour/Brown_rug_icon.png")},{id:"rug",name:"Rug",img:h("/icons/parlour/Rug_icon.png")},{id:"deadman_rug",name:"Deadman Rug",img:h("/icons/parlour/Deadman_rug_icon.png")},{id:"opulent_rug",name:"Opulent Rug",img:h("/icons/parlour/Opulent_rug_icon.png")},{id:"raging_echoes_rug",name:"Raging Echoes Rug",img:h("/icons/parlour/Raging_echoes_rug_icon.png")}]}]},{key:"kitchen",name:"Kitchen",cost:5e3,minLvl:5,doors:[N.East,N.South],bg:"#542808",hotspots:[{name:"Barrel",options:[{id:"beer_barrel",name:"Beer Barrel",img:h("/icons/kitchen/Beer_barrel_icon.png")},{id:"cider_barrel",name:"Cider Barrel",img:h("/icons/kitchen/Cider_barrel_icon.png")},{id:"asgarnian_ale",name:"Asgarnian Ale",img:h("/icons/kitchen/Asgarnian_ale_barrel_icon.png")},{id:"greenmans_ale",name:"Greenman's Ale",img:h("/icons/kitchen/Greenmans_ale_barrel_icon.png")},{id:"dragon_bitter",name:"Dragon Bitter",img:h("/icons/kitchen/Dragon_bitter_barrel_icon.png")},{id:"chefs_delight",name:"Chef's Delight",img:h("/icons/kitchen/Chefs_delight_barrel_icon.png")}]},{name:"Cat Basket",options:[{id:"cat_blanket",name:"Cat Blanket",img:h("/icons/kitchen/Cat_blanket_icon.png")},{id:"cat_basket",name:"Cat Basket",img:h("/icons/kitchen/Cat_basket_icon.png")},{id:"cushioned_basket",name:"Cushioned Basket",img:h("/icons/kitchen/Cushioned_basket_icon.png")}]},{name:"Larder",options:[{id:"wooden_larder",name:"Wooden Larder",img:h("/icons/kitchen/Wooden_larder_icon.png")},{id:"oak_larder",name:"Oak Larder",img:h("/icons/kitchen/Oak_larder_icon.png")},{id:"teak_larder",name:"Teak Larder",img:h("/icons/kitchen/Teak_larder_icon.png")}]},{name:"Shelf",options:[{id:"wooden_shelves_1",name:"Wooden Shelves 1",img:h("/icons/kitchen/Wooden_shelves_1_icon.png")},{id:"wooden_shelves_2",name:"Wooden Shelves 2",img:h("/icons/kitchen/Wooden_shelves_2_icon.png")},{id:"wooden_shelves_3",name:"Wooden Shelves 3",img:h("/icons/kitchen/Wooden_shelves_3_icon.png")},{id:"oak_shelves_1",name:"Oak Shelves 1",img:h("/icons/kitchen/Oak_shelves_1_icon.png")},{id:"oak_shelves_2",name:"Oak Shelves 2",img:h("/icons/kitchen/Oak_shelves_2_icon.png")},{id:"teak_shelves_1",name:"Teak Shelves 1",img:h("/icons/kitchen/Teak_shelves_1_icon.png")},{id:"teak_shelves_2",name:"Teak Shelves 2",img:h("/icons/kitchen/Teak_shelves_2_icon.png")}]},{name:"Sink",options:[{id:"pump_and_drain",name:"Pump and Drain",img:h("/icons/kitchen/Pump_and_drain_icon.png")},{id:"pump_and_tub",name:"Pump and Tub",img:h("/icons/kitchen/Pump_and_tub_icon.png")},{id:"sink",name:"Sink",img:h("/icons/kitchen/Sink_icon.png")},{id:"gold_sink",name:"Gold Sink",img:h("/icons/kitchen/Gold_sink_icon.png")}]},{name:"Spice Rack",options:[{id:"spice_rack",name:"Spice Rack",img:h("/icons/kitchen/Spice_rack_icon.png")}]},{name:"Stove",options:[{id:"firepit",name:"Firepit",img:h("/icons/kitchen/Firepit_icon.png")},{id:"firepit_with_hook",name:"Firepit With Hook",img:h("/icons/kitchen/Firepit_with_hook_icon.png")},{id:"firepit_with_pot",name:"Firepit With Pot",img:h("/icons/kitchen/Firepit_with_pot_icon.png")},{id:"small_oven",name:"Small Oven",img:h("/icons/kitchen/Small_oven_icon.png")},{id:"large_oven",name:"Large Oven",img:h("/icons/kitchen/Large_oven_icon.png")},{id:"steel_range",name:"Steel Range",img:h("/icons/kitchen/Steel_range_icon.png")},{id:"fancy_range",name:"Fancy Range",img:h("/icons/kitchen/Fancy_range_icon.png")}]},{name:"Table",options:[{id:"kitchen_table",name:"Kitchen Table",img:h("/icons/kitchen/Kitchen_table_icon.png")},{id:"oak_table",name:"Oak Table",img:h("/icons/kitchen/Oak_kitchen_table_icon.png")},{id:"teak_table",name:"Teak Table",img:h("/icons/kitchen/Teak_kitchen_table_icon.png")}]}]},{key:"dining_room",name:"Dining Room",cost:5e3,minLvl:10,doors:[N.East,N.South,N.West],bg:"#424242",hotspots:[{name:"Bell Pull",options:[{id:"rope_bell_pull",name:"Rope Bell-Pull",img:h("/icons/dining/rope_bell-pull_icon.png")},{id:"bell_pull",name:"Bell-Pull",img:h("/icons/dining/bell-pull_icon.png")},{id:"posh_bell_pull",name:"Posh Bell-Pull",img:h("/icons/dining/bell-pull_icon.png")}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:h("/icons/parlour/Torn_curtains_icon.png")},{id:"curtains",name:"Curtains",img:h("/icons/parlour/Curtains_icon.png")},{id:"opulent_curtains",name:"Opulent Curtains",img:h("/icons/parlour/Opulent_curtains_icon.png")},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:h("/icons/parlour/Raging_echoes_curtains_icon.png")}]},{name:"Decoration",options:[{id:"oak_wall_decoration",name:"Oak Wall Decoration",img:h("/icons/dining/oak_wall_decoration_icon.png")},{id:"teak_wall_decoration",name:"Teak Wall Decoration",img:h("/icons/dining/teak_wall_decoration_icon.png")},{id:"gilded_wall_decoration",name:"Gilded Wall Decoration",img:h("/icons/dining/gilded_wall_decoration_icon.png")}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:h("/icons/parlour/Clay_fireplace_icon.png")},{id:"stone_fireplace",name:"Stone Fireplace",img:h("/icons/parlour/Stone_fireplace_icon.png")},{id:"marble_fireplace",name:"Marble Fireplace",img:h("/icons/parlour/Marble_fireplace_icon.png")}]},{name:"Seating",options:[{id:"wooden_bench",name:"Wooden Bench",img:h("/icons/dining/wooden_bench_icon.png")},{id:"oak_bench",name:"Oak Bench",img:h("/icons/dining/oak_bench_icon.png")},{id:"carved_oak_bench",name:"Carved Oak Bench",img:h("/icons/dining/carved_oak Bench")},{id:"teak_dining_bench",name:"Teak Dining Bench",img:h("/icons/dining/teak_dining_bench_icon.png")},{id:"carved_teak_bench",name:"Carved Teak Bench",img:h("/icons/dining/carved_teak_bench_icon.png")},{id:"mahogany_bench",name:"Mahogany Bench",img:h("/icons/dining/mahogany_bench_icon.png")},{id:"gilded_bench",name:"Gilded Bench",img:h("/icons/dining/gilded_bench_icon.png")}]},{name:"Table",options:[{id:"wood_dining_table",name:"Wood Dining Table",img:h("/icons/dining/wood_dining_table_icon.png")},{id:"oak_dining_table",name:"Oak Dining Table",img:h("/icons/dining/oak_dining_table_icon.png")},{id:"carved_oak_table",name:"Carved Oak Table",img:h("/icons/dining/carved_oak_table_icon.png")},{id:"teak_table",name:"Teak Table",img:h("/icons/dining/teak_table_icon.png")},{id:"carved_teak_table",name:"Carved Teak Table",img:h("/icons/dining/carved_teak_table_icon.png")},{id:"mahogany_table",name:"Mahogany Table",img:h("/icons/dining/mahogany_table_icon.png")},{id:"opulent_table",name:"Opulent Table",img:h("/icons/dining/opulent_table_icon.png")}]}]},{key:"workshop",name:"Workshop",cost:1e4,minLvl:15,doors:[N.North,N.South],bg:"#542808",hotspots:[{name:"Clockmaking",options:[{id:"crafting_table_1",name:"Crafting Table 1",img:h("/icons/workshop/crafting_table_icon.png")},{id:"crafting_table_2",name:"Crafting Table 2",img:h("/icons/workshop/crafting_table_icon.png")},{id:"crafting_table_3",name:"Crafting Table 3",img:h("/icons/workshop/crafting_table_icon.png")},{id:"crafting_table_4",name:"Crafting Table 4",img:h("/icons/workshop/crafting_table_4_icon.png")}]},{name:"Heraldry",options:[{id:"pluming_stand",name:"Pluming Stand",img:h("/icons/workshop/pluming_stand_icon.png")},{id:"shield_easel",name:"Shield Easel",img:h("/icons/workshop/shield_easel_icon.png")},{id:"banner_easel",name:"Banner Easel",img:h("/icons/workshop/banner_easel_icon.png")}]},{name:"Repair",options:[{id:"repair_bench",name:"Repair Bench",img:h("/icons/workshop/repair_bench_icon.png")},{id:"whetstone",name:"Whetstone",img:h("/icons/workshop/whetstone_icon.png")},{id:"armour_stand",name:"Armour Stand",img:h("/icons/workshop/armour_stand_icon.png")}]},{name:"Tool",options:[{id:"tool_store_1",name:"Tool Store 1",img:h("/icons/workshop/tool_store_1_icon.png")},{id:"tool_store_2",name:"Tool Store 2",img:h("/icons/workshop/tool_store_2_icon.png")},{id:"tool_store_3",name:"Tool Store 3",img:h("/icons/workshop/tool_store_3_icon.png")},{id:"tool_store_4",name:"Tool Store 4",img:h("/icons/workshop/tool_store_4_icon.png")},{id:"tool_store_5",name:"Tool Store 5",img:h("/icons/workshop/tool_store_5_icon.png")}]},{name:"Workbench",options:[{id:"wooden_workbench",name:"Wooden Workbench",img:h("/icons/workshop/wooden_workbench_icon.png")},{id:"oak_workbench",name:"Oak Workbench",img:h("/icons/workshop/oak_workbench_icon.png")},{id:"steel_framed_workbench",name:"Steel Framed Workbench",img:h("/icons/workshop/steel_framed_workbench_icon.png")},{id:"bench_with_vice",name:"Bench With Vice",img:h("/icons/workshop/bench_with_vice_icon.png")},{id:"bench_with_lathe",name:"Bench With Lathe",img:h("/icons/workshop/bench_with_lathe_icon.png")}]}]},{key:"bedroom",name:"Bedroom",cost:1e4,minLvl:20,doors:[N.East,N.South],bg:"#424242",hotspots:[{name:"Bed",options:[{id:"wooden_bed",name:"Wooden Bed",img:h("/icons/bedroom/Wooden_bed_icon.png")},{id:"oak_bed",name:"Oak Bed",img:h("/icons/bedroom/Oak_bed_icon.png")},{id:"large_oak_bed",name:"Large Oak Bed",img:h("/icons/bedroom/Large_oak_bed_icon.png")},{id:"teak_bed",name:"Teak Bed",img:h("/icons/bedroom/Teak_bed_icon.png")},{id:"large_teak_bed",name:"Large Teak Bed",img:h("/icons/bedroom/Large_teak_bed_icon.png")},{id:"4_poster",name:"4-Poster",img:h("/icons/bedroom/4-poster_icon.png")},{id:"gilded_4_poster",name:"Gilded 4-Poster",img:h("/icons/bedroom/Gilded_4-poster_icon.png")}]},{name:"Corner",options:[{id:"oak_clock",name:"Oak Clock",img:h("/icons/bedroom/Oak_clock_icon.png")},{id:"teak_clock",name:"Teak Clock",img:h("/icons/bedroom/Teak_clock_icon.png")},{id:"servants_money_bag",name:"Servant's Money Bag",img:h("/icons/bedroom/Servants_money_bag_icon.png")},{id:"gilded_clock",name:"Gilded Clock",img:h("/icons/bedroom/Gilded_clock_icon.png")}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:h("/icons/parlour/Torn_curtains_icon.png")},{id:"curtains",name:"Curtains",img:h("/icons/parlour/Curtains_icon.png")},{id:"opulent_curtains",name:"Opulent Curtains",img:h("/icons/parlour/Opulent_curtains_icon.png")},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:h("/icons/parlour/Raging_echoes_curtains_icon.png")}]},{name:"Dresser",options:[{id:"shaving_stand",name:"Shaving Stand",img:h("/icons/bedroom/Shaving_stand_icon.png")},{id:"oak_shaving_stand",name:"Oak Shaving Stand",img:h("/icons/bedroom/Oak_shaving_stand_icon.png")},{id:"oak_dresser",name:"Oak Dresser",img:h("/icons/bedroom/Oak_dresser_icon.png")},{id:"teak_dresser",name:"Teak Dresser",img:h("/icons/bedroom/Teak_dresser_icon.png")},{id:"fancy_teak_dresser",name:"Fancy Teak Dresser",img:h("/icons/bedroom/Fancy_teak_dresser_icon.png")},{id:"mahogany_dresser",name:"Mahogany Dresser",img:h("/icons/bedroom/Mahogany_dresser_icon.png")},{id:"Gilded_dresser",name:"Gilded Dresser",img:h("/icons/bedroom/Gilded_dresser_icon.png")}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:h("/icons/parlour/Clay_fireplace_icon.png")},{id:"stone_fireplace",name:"Stone Fireplace",img:h("/icons/parlour/Stone_fireplace_icon.png")},{id:"marble_fireplace",name:"Marble Fireplace",img:h("/icons/parlour/Marble_fireplace_icon.png")}]},{name:"Rug",options:[{id:"brown_rug",name:"Brown Rug",img:h("/icons/parlour/Brown_rug_icon.png")},{id:"rug",name:"Rug",img:h("/icons/parlour/Rug_icon.png")},{id:"deadman_rug",name:"Deadman Rug",img:h("/icons/parlour/Deadman_rug_icon.png")},{id:"opulent_rug",name:"Opulent Rug",img:h("/icons/parlour/Opulent_rug_icon.png")},{id:"raging_echoes_rug",name:"Raging Echoes Rug",img:h("/icons/parlour/Raging_echoes_rug_icon.png")}]},{name:"Wardrobe",options:[{id:"shoe_box",name:"Shoe Box",img:h("/icons/bedroom/Shoe_box_icon.png")},{id:"oak_drawer",name:"Oak Drawers",img:h("/icons/bedroom/Oak_drawers_icon.png")},{id:"oak_wardrobe",name:"Oak Wardrobe",img:h("/icons/bedroom/Oak_wardrobe_icon.png")},{id:"teak_drawer",name:"Teak Drawers",img:h("/icons/bedroom/Teak_drawers_icon.png")},{id:"teak_wardrobe",name:"Teak Wardrobe",img:h("/icons/bedroom/Teak_wardrobe_icon.png")},{id:"mahogany_wardrobe",name:"Mahogany Wardrobe",img:h("/icons/bedroom/Mahogany_wardrobe_icon.png")},{id:"gilded_wardrobe",name:"Gilded Wardrobe",img:h("/icons/bedroom/Gilded_wardrobe_icon.png")}]}]},{key:"skill_hall",name:"Skill Hall",cost:15e3,minLvl:25,doors:[N.North,N.East,N.South,N.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"league_hall",name:"Leauge Hall",cost:15e3,minLvl:27,doors:[N.East,N.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"games_room",name:"Games Room",cost:25e3,minLvl:30,doors:[N.East,N.South,N.West],bg:"#731e4c",hotspots:[]},{key:"combat_room",name:"Combat Room",cost:25e3,minLvl:30,doors:[N.East,N.South,N.West],bg:"#731e4c",hotspots:[]},{key:"quest_hall",name:"Quest Hall",cost:25e3,minLvl:32,doors:[N.North,N.East,N.South,N.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"menagerie",name:"Menagerie",cost:3e4,minLvl:37,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"study",name:"Study",cost:5e4,minLvl:40,doors:[N.East,N.South,N.West],bg:"#542808",hotspots:[]},{key:"costume_room",name:"Costume Room",cost:5e4,minLvl:42,doors:[N.South],bg:"#731e4c",hotspots:[]},{key:"chapel",name:"Chapel",cost:5e4,minLvl:45,doors:[N.East,N.South],bg:"#542808",hotspots:[]},{key:"portal_chamber",name:"Portal Chamber",cost:1e5,minLvl:50,doors:[N.South],bg:"#542808",hotspots:[]},{key:"formal_garden",name:"Formal Garden",cost:75e3,minLvl:55,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"throne_room",name:"Throne Room",cost:15e4,minLvl:60,doors:[N.South],bg:"#040459",hotspots:[],floors:[0]},{key:"superior_garden",name:"Superior Garden",cost:75e3,minLvl:65,doors:[N.North,N.East,N.South,N.West],bg:"#034a03",hotspots:[{name:"Fence space",options:[{id:"redwood_fence",name:"Redwood fence",img:"/icons/Redwood_fence_icon.png"},{id:"marble_wall",name:"Marble wall",img:"/icons/marble_wall.png"},{id:"obsidian_fence",name:"Obsidian fence",img:"/icons/obsidian_fence.png"}]},{name:"Pool space",options:["restoration_pool","revitalisation_pool","rejuvenation_pool","fancy_rejuvenation_pool","ornate_rejuvenation_pool"]},{name:"Teleport Space",options:["spirit_tree","obelisk","fairy_ring","spirit_tree_fairy_ring"]},{name:"Theme",options:["zen_theme","otherworldly_theme","volcanic_theme"]},{name:"Topiary space",options:["topiary_bush"]},{name:"Seating space",options:["teak_garden_bench","gnome_bench","marble_decorative_bench","obsidian_decorative_bench"]}],floors:[0]},{key:"oubliette",name:"Oubliette",cost:15e4,minLvl:65,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_corridor",name:"Dungeon Corridor",cost:7500,minLvl:70,doors:[N.North,N.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_junction",name:"Dungeon Junction",cost:7500,minLvl:70,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_stairs",name:"Dungeon Stairs",cost:7500,minLvl:70,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],stairs:!0,floors:[-1]},{key:"dungeon_pit",name:"Dungeon Pit",cost:1e4,minLvl:70,doors:[N.North,N.East,N.South,N.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"treasure_room",name:"Treasure Room",cost:25e4,minLvl:75,doors:[N.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"portal_nexus",name:"Portal nexus",cost:2e5,minLvl:72,doors:[N.North,N.East,N.South,N.West],bg:"#542808",hotspots:[],floors:[0]},{key:"achievement_gallery",name:"Achievement gallery",cost:2e5,minLvl:80,doors:[N.North,N.South],bg:"#3f0569",hotspots:[{name:"Adventure log",options:["mahogany_adventure_log","gilded_adventure_log","marble_adventure_log"]},{name:"Altar",options:["ancient_altar","lunar_altar","dark_altar","occult_altar"]},{name:"Boss lair",options:["boss_lair_display"]},{name:"Display",options:["mounted_emblem","mounted_coins","cape_hanger"]},{name:"Jewellery box",options:["basic_jewellery_box","fancy_jewellery_box","ornate_jewellery_box"]},{name:"Quest list",options:["quest_list"]}],floors:[0]}],_n=new Map;for(const t of Ge){if(_n.has(t.key))throw new Error(`Duplicate room type ${t.key}`);_n.set(t.key,t)}const so=t=>{const e=_n.get(t);if(!e)throw new Error(`Unknown room type ${t}`);return e},hn=[{key:"exit_portal",name:"Exit Portal",minLvl:1,exp:100,materials:{iron_bar:10}},{key:"decorative_rock",name:"Decorative Rock",minLvl:5,exp:100,materials:{limestone_brick:5}},{key:"pond",name:"Pond",minLvl:10,exp:100,materials:{soft_clay:10}},{key:"imp_statue",name:"Imp Statue",minLvl:15,exp:150,materials:{limestone_brick:5,soft_clay:5}},{key:"dungeon_entrance",name:"Dungeon Entrance",minLvl:70,exp:500,materials:{marble_block:1}},{key:"plant",name:"Plant",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"small_fern",name:"Small Fern",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"fern",name:"Fern",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"dock_leaf",name:"Dock Leaf",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"thistle",name:"Thistle",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"reeds",name:"Reeds",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"redwood_fence",name:"Redwood Fence",minLvl:75,exp:240,materials:{redwood_logs:10,steel_bar:2}},{key:"marble_wall",name:"Marble Wall",minLvl:79,exp:4e3,materials:{marble_block:8}},{key:"obsidian_fence",name:"Obsidian Fence",minLvl:83,exp:2741,materials:{toktz_mej_tal:10,tzhaar_ket_om:2,toktz_xil_ul:25}},{key:"restoration_pool",name:"Restoration pool",minLvl:65,exp:706,materials:{limestone_brick:5,bucket_of_water:5,soul_rune:1e3,body_rune:1e3}},{key:"revitalisation_pool",name:"Revitalisation pool",minLvl:70,exp:850,materials:{restoration_pool:1,stamina_potion_4_unnoted:10}},{key:"rejuvenation_pool",name:"Rejuvenation pool",minLvl:80,exp:900,materials:{revitalisation_pool:1,prayer_potion_4_unnoted:10}},{key:"fancy_rejuvenation_pool",name:"Fancy rejuvenation pool",minLvl:85,exp:1950,materials:{rejuvenation_pool:1,super_restore_4_unnoted:10,marble_block:2}},{key:"ornate_rejuvenation_pool",name:"Ornate rejuvenation pool",minLvl:90,exp:3107,materials:{fancy_rejuvenation_pool:1,anti_venom_4_unnoted:10,gold_leaf:5,blood_rune:1e3}},{key:"spirit_tree",name:"Spirit tree",minLvl:75,exp:350,materials:{spirit_sapling:1}},{key:"obelisk",name:"Obelisk",minLvl:80,exp:3e3,materials:{ancient_crystal:4,marble_block:4}},{key:"fairy_ring",name:"Fairy ring",minLvl:85,exp:535,materials:{mushroom:10,fairy_enchantment:1}},{key:"spirit_tree_fairy_ring",name:"Spirit tree & Fairy ring",minLvl:95,exp:885,materials:{spirit_sapling:1,mushroom:10,fairy_enchantment:1}},{key:"zen_theme",name:"Zen theme",minLvl:65,exp:474,materials:{bucket_of_sand:6,pink_dye:1,bagged_nice_tree:1}},{key:"otherworldly_theme",name:"Otherworldly theme",minLvl:75,exp:316,materials:{supercompost:8,blue_dye:1,mushroom:4,magic_secateurs:1}},{key:"volcanic_theme",name:"Volcanic theme",minLvl:85,exp:4464,materials:{granite_5kg:2,onyx:6,fire_rune:1e3,lava_rune:2e3}},{key:"topiary_bush",name:"Topiary bush",minLvl:65,exp:141,materials:{topiary_hedge_bagged:6}},{key:"teak_garden_bench",name:"Teak garden bench",minLvl:66,exp:540,materials:{teak_planks:6}},{key:"gnome_bench",name:"Gnome bench",minLvl:77,exp:840,materials:{mahogany_planks:6}},{key:"marble_decorative_bench",name:"Marble decorative bench",minLvl:88,exp:3e3,materials:{marble_block:6}},{key:"obsidian_decorative_bench",name:"Obsidian decorative bench",minLvl:98,exp:2331,materials:{marble_block:3,onyx:1,fire_rune:250,lava_rune:500}},{key:"mahogany_adventure_log",name:"Mahogany adventure log",minLvl:83,exp:504,materials:{mahogany_plank:3,papyrus:2,enchanted_gem:1}},{key:"gilded_adventure_log",name:"Gilded adventure log",minLvl:88,exp:1100,materials:{mahogany_plank:3,gold_leaf:2,enchanted_gem:1}},{key:"marble_adventure_log",name:"Marble adventure log",minLvl:93,exp:1160,materials:{marble_block:2,limestone_brick:4,enchanted_gem:1}},{key:"ancient_altar",name:"Ancient altar",minLvl:80,exp:1490,materials:{limestone_brick:10,magic_stone:1,ancient_signet:1,pharaohs_sceptre:1}},{key:"lunar_altar",name:"Lunar altar",minLvl:80,exp:1957,materials:{limestone_brick:10,magic_stone:1,lunar_signet:1,astral_rune:1e4}},{key:"dark_altar",name:"Dark altar",minLvl:80,exp:3888,materials:{limestone_brick:10,magic_stone:1,arceuus_signet:1,blood_rune:5e3,soul_rune:5e3}},{key:"occult_altar",name:"Occult altar",minLvl:90,exp:3445,materials:{Materials_for_the_other_two_altars_the_player_hasnt_built_excluding_the_magic_stone_and_limestone_bricks:0}},{key:"boss_lair_display",name:"Boss lair display",minLvl:87,exp:1483,materials:{steel_bar:4,molten_glass:5,mahogany_plank:10}},{key:"mounted_emblem",name:"Mounted emblem",minLvl:80,exp:5300,materials:{marble_block:1,gold_leaf:1,decorative_emblem:1}},{key:"mounted_coins",name:"Mounted coins",minLvl:80,exp:800,materials:{marble_block:1,gold_leaf:1,coins:1e8}},{key:"cape_hanger",name:"Cape hanger",minLvl:80,exp:800,materials:{marble_block:1,gold_leaf:1}},{key:"basic_jewellery_box",name:"Basic jewellery box",minLvl:81,exp:605,materials:{bolt_of_cloth:1,steel_bar:1,games_necklace_8:3,ring_of_dueling_8:3}},{key:"fancy_jewellery_box",name:"Fancy jewellery box",minLvl:86,exp:1350,materials:{basic_jewellery_box:1,gold_leaf:1,skills_necklace_4:5,combat_bracelet_4:5}},{key:"ornate_jewellery_box",name:"Ornate jewellery box",minLvl:91,exp:2680,materials:{fancy_jewellery_box:1,gold_leaf:2,amulet_of_glory_4:8,ring_of_wealth_5:8}},{key:"quest_list",name:"Quest list",minLvl:80,exp:310,materials:{papyrus:10,gold_leaf:1}},{key:"wooden_bed",name:"Wooden bed",minLvl:20,exp:117,materials:{plank:3,nails:3,bolt_of_cloth:2}},{key:"oak_bed",name:"Oak bed",minLvl:30,exp:210,materials:{oak_plank:3,bolt_of_cloth:2}},{key:"large_oak_bed",name:"Large oak bed",minLvl:34,exp:330,materials:{oak_plank:5,bolt_of_cloth:2}},{key:"teak_bed",name:"Teak bed",minLvl:40,exp:300,materials:{teak_plank:3,bolt_of_cloth:2}},{key:"large_teak_bed",name:"Large teak bed",minLvl:45,exp:480,materials:{teak_plank:5,bolt_of_cloth:2}},{key:"4_poster",name:"4-poster",minLvl:53,exp:450,materials:{mahogany_plank:3,bolt_of_cloth:2}},{key:"gilded_4_poster",name:"Gilded 4-poster",minLvl:60,exp:1330,materials:{mahogany_plank:5,bolt_of_cloth:2,gold_leaf:2}},{key:"oak_clock",name:"Oak clock",minLvl:25,exp:142,materials:{oak_plank:2,clockwork:1}},{key:"teak_clock",name:"Teak clock",minLvl:55,exp:202,materials:{teak_plank:2,clockwork:1}},{key:"servants_money_bag",name:"Servants Money Bag",minLvl:58,exp:595,materials:{mahogany_plank:2,bolt_of_cloth:1,gold_leaf:1}},{key:"gilded_clock",name:"Gilded clock",minLvl:85,exp:602,materials:{mahogany_plank:2,clockwork:1,gold_leaf:1}}],mn=new Map;for(const t of hn){if(mn.has(t.key))throw new Error(`Duplicate furniture type ${t.key}`);mn.set(t.key,t)}const gn=t=>{if(!t)return null;const e=mn.get(t);return e||{key:t,name:t.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),minLvl:1,exp:0,materials:{}}},To=(t,e)=>{if(!t)return null;const o=t.hotspots.map(n=>{if(!n)return"";const l=hn.indexOf(n);return l!==-1?l:"id"in n?`k:${n.id}`:`k:${n.key}`}).join("-");return`${e}-${Ge.indexOf(t.type)}-${t.orientation}-${o}`},Ie=t=>{const e=new URLSearchParams;e.set("n",t.name);for(const o of t.floors){const n=o.rooms.flat().map(To).filter(l=>!!l).join(".");e.set(`f${o.num}`,n)}return e},Lo=(t,e)=>{const o=e.split("-"),n=Number(o[0]),l=n%Te,i=Math.floor(n/Te),a=Ge[Number(o[1])];if(!a)throw new Error(`Unknown room type ${o[1]}`);const m=Number(o[2]),s=[];for(let r=0;r<a.hotspots.length;r++){const c=o[r+3];if(!c)s[r]=null;else if(c.startsWith("k:")){const _=c.substring(2);s[r]=gn(_)}else s[r]=hn[Number(c)]||null}return{floor:t,x:l,y:i,type:a,orientation:m,hotspots:s}},co=t=>{const e=t.get("n")||void 0,o=ro(e);for(const n of t.keys()){if(!n.startsWith("f"))continue;const l=Number(n.substring(1)),i=o.floors.find(m=>m.num===l);if(!i)throw new Error(`Unknown floor ${l}`);const a=t.get(n);if(a){const m=a.split(".");for(const s of m){const r=Lo(i,s);i.rooms[r.y][r.x]=r}}}return o};function Ln(t,e,o){const n=t.slice();return n[1]=e[o],n}function So(t){let e,o;return{c(){e=b("div"),o=q("Your house looks good to go!"),this.h()},l(n){e=k(n,"DIV",{class:!0});var l=y(e);o=j(l,"Your house looks good to go!"),l.forEach(f),this.h()},h(){E(e,"class","alert success svelte-159br2x")},m(n,l){F(n,e,l),d(e,o)},p:K,d(n){n&&f(e)}}}function Do(t){let e,o=t[0],n=[];for(let l=0;l<o.length;l+=1)n[l]=Sn(Ln(t,o,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=ce()},l(l){for(let i=0;i<n.length;i+=1)n[i].l(l);e=ce()},m(l,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(l,i);F(l,e,i)},p(l,i){if(i&1){o=l[0];let a;for(a=0;a<o.length;a+=1){const m=Ln(l,o,a);n[a]?n[a].p(m,i):(n[a]=Sn(m),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=o.length}},d(l){me(n,l),l&&f(e)}}}function Sn(t){let e,o=t[1]+"",n;return{c(){e=b("div"),n=q(o),this.h()},l(l){e=k(l,"DIV",{class:!0});var i=y(e);n=j(i,o),i.forEach(f),this.h()},h(){E(e,"class","alert error svelte-159br2x")},m(l,i){F(l,e,i),d(e,n)},p(l,i){i&1&&o!==(o=l[1]+"")&&Y(n,o)},d(l){l&&f(e)}}}function Ro(t){let e;function o(i,a){return i[0].length>0?Do:So}let n=o(t),l=n(t);return{c(){l.c(),e=ce()},l(i){l.l(i),e=ce()},m(i,a){l.m(i,a),F(i,e,a)},p(i,[a]){n===(n=o(i))&&l?l.p(i,a):(l.d(1),l=n(i),l&&(l.c(),l.m(e.parentNode,e)))},i:K,o:K,d(i){l.d(i),i&&f(e)}}}function Oo(t,e,o){let{errors:n}=e;return t.$$set=l=>{"errors"in l&&o(0,n=l.errors)},[n]}class Co extends ge{constructor(e){super(),pe(this,e,Oo,Ro,_e,{errors:0})}}function Dn(t,e,o){const n=t.slice();return n[10]=e[o],n}function Rn(t){let e,o,n=t[10]+"",l,i,a,m,s,r,c,_,g,u,p,W,R;function S(){return t[7](t[10])}function v(){return t[8](t[10])}return{c(){e=b("div"),o=b("div"),l=q(n),i=M(),a=b("div"),m=b("button"),s=b("i"),c=M(),_=b("div"),g=b("button"),u=b("i"),p=M(),this.h()},l(w){e=k(w,"DIV",{class:!0});var C=y(e);o=k(C,"DIV",{class:!0});var T=y(o);l=j(T,n),T.forEach(f),i=P(C),a=k(C,"DIV",{class:!0});var D=y(a);m=k(D,"BUTTON",{});var O=y(m);s=k(O,"I",{class:!0}),y(s).forEach(f),O.forEach(f),D.forEach(f),c=P(C),_=k(C,"DIV",{class:!0});var I=y(_);g=k(I,"BUTTON",{});var B=y(g);u=k(B,"I",{class:!0}),y(u).forEach(f),B.forEach(f),I.forEach(f),p=P(C),C.forEach(f),this.h()},h(){E(o,"class","name svelte-1ueo926"),E(s,"class","icofont-folder-open"),m.disabled=r=t[10]===t[0].name,E(a,"class","svelte-1ueo926"),E(u,"class","icofont-ui-delete"),E(_,"class","svelte-1ueo926"),E(e,"class","svelte-1ueo926"),Q(e,"current",t[10]===t[0].name)},m(w,C){F(w,e,C),d(e,o),d(o,l),d(e,i),d(e,a),d(a,m),d(m,s),d(e,c),d(e,_),d(_,g),d(g,u),d(e,p),W||(R=[$(m,"click",S),$(g,"click",v)],W=!0)},p(w,C){t=w,C&2&&n!==(n=t[10]+"")&&Y(l,n),C&3&&r!==(r=t[10]===t[0].name)&&(m.disabled=r),C&3&&Q(e,"current",t[10]===t[0].name)},d(w){w&&f(e),W=!1,Le(R)}}}function Io(t){let e,o,n,l,i,a,m,s,r,c,_,g,u,p,W,R,S,v,w,C,T,D=t[1],O=[];for(let I=0;I<D.length;I+=1)O[I]=Rn(Dn(t,D,I));return{c(){e=b("h2"),o=q("Getting started"),n=M(),l=b("ul"),i=b("li"),a=q("Click a cell to the left to place a new room"),m=M(),s=b("h2"),r=q("Saved houses"),c=M(),_=b("div"),g=b("div"),u=b("div"),p=b("input"),W=M(),R=b("div"),S=b("button"),v=b("i"),w=M();for(let I=0;I<O.length;I+=1)O[I].c();this.h()},l(I){e=k(I,"H2",{class:!0});var B=y(e);o=j(B,"Getting started"),B.forEach(f),n=P(I),l=k(I,"UL",{class:!0});var L=y(l);i=k(L,"LI",{});var V=y(i);a=j(V,"Click a cell to the left to place a new room"),V.forEach(f),L.forEach(f),m=P(I),s=k(I,"H2",{class:!0});var X=y(s);r=j(X,"Saved houses"),X.forEach(f),c=P(I),_=k(I,"DIV",{class:!0});var A=y(_);g=k(A,"DIV",{class:!0});var z=y(g);u=k(z,"DIV",{class:!0});var le=y(u);p=k(le,"INPUT",{type:!0}),le.forEach(f),W=P(z),R=k(z,"DIV",{class:!0});var ie=y(R);S=k(ie,"BUTTON",{});var ae=y(S);v=k(ae,"I",{class:!0}),y(v).forEach(f),ae.forEach(f),ie.forEach(f),z.forEach(f),w=P(A);for(let oe=0;oe<O.length;oe+=1)O[oe].l(A);A.forEach(f),this.h()},h(){E(e,"class","svelte-1ueo926"),E(l,"class","svelte-1ueo926"),E(s,"class","svelte-1ueo926"),E(p,"type","text"),E(u,"class","name svelte-1ueo926"),E(v,"class","icofont-save"),E(R,"class","svelte-1ueo926"),E(g,"class","svelte-1ueo926"),E(_,"class","houses-list svelte-1ueo926")},m(I,B){F(I,e,B),d(e,o),F(I,n,B),F(I,l,B),d(l,i),d(i,a),F(I,m,B),F(I,s,B),d(s,r),F(I,c,B),F(I,_,B),d(_,g),d(g,u),d(u,p),En(p,t[0].name),d(g,W),d(g,R),d(R,S),d(S,v),d(_,w);for(let L=0;L<O.length;L+=1)O[L]&&O[L].m(_,null);C||(T=[$(p,"input",t[5]),$(S,"click",t[6])],C=!0)},p(I,[B]){if(B&1&&p.value!==I[0].name&&En(p,I[0].name),B&27){D=I[1];let L;for(L=0;L<D.length;L+=1){const V=Dn(I,D,L);O[L]?O[L].p(V,B):(O[L]=Rn(V),O[L].c(),O[L].m(_,null))}for(;L<O.length;L+=1)O[L].d(1);O.length=D.length}},i:K,o:K,d(I){I&&f(e),I&&f(n),I&&f(l),I&&f(m),I&&f(s),I&&f(c),I&&f(_),me(O,I),C=!1,Le(T)}}}function Bo(t,e,o){let{house:n}=e,l=[];const i=Ze();un(()=>{const u=localStorage.getItem("houses");u&&o(1,l=JSON.parse(u))});const a=u=>{o(1,l=l.includes(u.name)?l:[...l,u.name]);const p=Ie(u).toString();localStorage.setItem(`house-${u.name}`,p),localStorage.setItem("houses",JSON.stringify(l)),i("save",{house:u})},m=u=>{const p=localStorage.getItem(`house-${u}`);if(p){const W=co(new URLSearchParams(p));i("open",{house:W})}},s=u=>{o(1,l=l.filter(p=>p!==u)),localStorage.removeItem(`house-${u}`),localStorage.setItem("houses",JSON.stringify(l))};function r(){n.name=this.value,o(0,n)}const c=()=>a(n),_=u=>m(u),g=u=>s(u);return t.$$set=u=>{"house"in u&&o(0,n=u.house)},[n,l,a,m,s,r,c,_,g]}class No extends ge{constructor(e){super(),pe(this,e,Bo,Io,_e,{house:0})}}function On(t,e,o){const n=t.slice();return n[2]=e[o],n}function Cn(t){let e,o,n=t[2].name+"",l,i,a,m=t[2].value+"",s,r,c,_=t[2].limit+"",g,u,p,W=t[2].level+"",R,S;return{c(){e=b("tr"),o=b("td"),l=q(n),i=M(),a=b("td"),s=q(m),r=M(),c=b("td"),g=q(_),u=M(),p=b("td"),R=q(W),S=M(),this.h()},l(v){e=k(v,"TR",{});var w=y(e);o=k(w,"TD",{});var C=y(o);l=j(C,n),C.forEach(f),i=P(w),a=k(w,"TD",{});var T=y(a);s=j(T,m),T.forEach(f),r=P(w),c=k(w,"TD",{});var D=y(c);g=j(D,_),D.forEach(f),u=P(w),p=k(w,"TD",{});var O=y(p);R=j(O,W),O.forEach(f),S=P(w),w.forEach(f),this.h()},h(){Q(e,"max",t[2].level===t[1])},m(v,w){F(v,e,w),d(e,o),d(o,l),d(e,i),d(e,a),d(a,s),d(e,r),d(e,c),d(c,g),d(e,u),d(e,p),d(p,R),d(e,S)},p(v,w){w&1&&n!==(n=v[2].name+"")&&Y(l,n),w&1&&m!==(m=v[2].value+"")&&Y(s,m),w&1&&_!==(_=v[2].limit+"")&&Y(g,_),w&1&&W!==(W=v[2].level+"")&&Y(R,W),w&3&&Q(e,"max",v[2].level===v[1])},d(v){v&&f(e)}}}function Wo(t){let e,o,n,l,i,a,m,s,r,c,_,g,u,p,W,R,S=t[0],v=[];for(let w=0;w<S.length;w+=1)v[w]=Cn(On(t,S,w));return{c(){e=b("table"),o=b("thead"),n=b("tr"),l=b("th"),i=q("Requirement"),a=M(),m=b("th"),s=q("Current"),r=M(),c=b("th"),_=q("Limit"),g=M(),u=b("th"),p=q("Min. Level"),W=M(),R=b("tbody");for(let w=0;w<v.length;w+=1)v[w].c();this.h()},l(w){e=k(w,"TABLE",{class:!0});var C=y(e);o=k(C,"THEAD",{});var T=y(o);n=k(T,"TR",{});var D=y(n);l=k(D,"TH",{});var O=y(l);i=j(O,"Requirement"),O.forEach(f),a=P(D),m=k(D,"TH",{});var I=y(m);s=j(I,"Current"),I.forEach(f),r=P(D),c=k(D,"TH",{});var B=y(c);_=j(B,"Limit"),B.forEach(f),g=P(D),u=k(D,"TH",{});var L=y(u);p=j(L,"Min. Level"),L.forEach(f),D.forEach(f),T.forEach(f),W=P(C),R=k(C,"TBODY",{});var V=y(R);for(let X=0;X<v.length;X+=1)v[X].l(V);V.forEach(f),C.forEach(f),this.h()},h(){E(e,"class","svelte-fdv1qg")},m(w,C){F(w,e,C),d(e,o),d(o,n),d(n,l),d(l,i),d(n,a),d(n,m),d(m,s),d(n,r),d(n,c),d(c,_),d(n,g),d(n,u),d(u,p),d(e,W),d(e,R);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(R,null)},p(w,[C]){if(C&3){S=w[0];let T;for(T=0;T<S.length;T+=1){const D=On(w,S,T);v[T]?v[T].p(D,C):(v[T]=Cn(D),v[T].c(),v[T].m(R,null))}for(;T<v.length;T+=1)v[T].d(1);v.length=S.length}},i:K,o:K,d(w){w&&f(e),me(v,w)}}}function Mo(t,e,o){let n,{requirements:l}=e;return t.$$set=i=>{"requirements"in i&&o(0,l=i.requirements)},t.$$.update=()=>{var i;t.$$.dirty&1&&o(1,n=(i=l[0])==null?void 0:i.level)},[l,n]}class Po extends ge{constructor(e){super(),pe(this,e,Mo,Wo,_e,{requirements:0})}}function In(t,e,o){const n=t.slice();return n[2]=e[o].type,n[0]=e[o].rooms,n}function Bn(t){let e,o,n=t[2].name+"",l,i,a,m=t[2].minLvl+"",s,r,c,_=t[2].cost+"",g,u,p,W=(t[0].length||"-")+"",R,S,v,w=(t[0].length>0?t[0].length*t[2].cost:"-")+"",C,T;return{c(){e=b("tr"),o=b("td"),l=q(n),i=M(),a=b("td"),s=q(m),r=M(),c=b("td"),g=q(_),u=M(),p=b("td"),R=q(W),S=M(),v=b("td"),C=q(w),T=M(),this.h()},l(D){e=k(D,"TR",{});var O=y(e);o=k(O,"TD",{});var I=y(o);l=j(I,n),I.forEach(f),i=P(O),a=k(O,"TD",{class:!0});var B=y(a);s=j(B,m),B.forEach(f),r=P(O),c=k(O,"TD",{class:!0});var L=y(c);g=j(L,_),L.forEach(f),u=P(O),p=k(O,"TD",{class:!0});var V=y(p);R=j(V,W),V.forEach(f),S=P(O),v=k(O,"TD",{class:!0});var X=y(v);C=j(X,w),X.forEach(f),T=P(O),O.forEach(f),this.h()},h(){E(a,"class","right"),E(c,"class","right"),E(p,"class","right"),E(v,"class","right")},m(D,O){F(D,e,O),d(e,o),d(o,l),d(e,i),d(e,a),d(a,s),d(e,r),d(e,c),d(c,g),d(e,u),d(e,p),d(p,R),d(e,S),d(e,v),d(v,C),d(e,T)},p(D,O){O&2&&n!==(n=D[2].name+"")&&Y(l,n),O&2&&m!==(m=D[2].minLvl+"")&&Y(s,m),O&2&&_!==(_=D[2].cost+"")&&Y(g,_),O&2&&W!==(W=(D[0].length||"-")+"")&&Y(R,W),O&2&&w!==(w=(D[0].length>0?D[0].length*D[2].cost:"-")+"")&&Y(C,w)},d(D){D&&f(e)}}}function Fo(t){let e,o,n,l,i,a,m,s,r,c,_,g,u,p,W,R,S,v,w,C,T=t[1],D=[];for(let O=0;O<T.length;O+=1)D[O]=Bn(In(t,T,O));return{c(){e=b("div"),o=b("table"),n=b("thead"),l=b("tr"),i=b("th"),a=q("Type"),m=M(),s=b("th"),r=q("Level"),c=M(),_=b("th"),g=q("Cost"),u=M(),p=b("th"),W=q("Amount"),R=M(),S=b("th"),v=q("Total"),w=M(),C=b("tbody");for(let O=0;O<D.length;O+=1)D[O].c();this.h()},l(O){e=k(O,"DIV",{class:!0});var I=y(e);o=k(I,"TABLE",{class:!0});var B=y(o);n=k(B,"THEAD",{});var L=y(n);l=k(L,"TR",{});var V=y(l);i=k(V,"TH",{});var X=y(i);a=j(X,"Type"),X.forEach(f),m=P(V),s=k(V,"TH",{class:!0});var A=y(s);r=j(A,"Level"),A.forEach(f),c=P(V),_=k(V,"TH",{class:!0});var z=y(_);g=j(z,"Cost"),z.forEach(f),u=P(V),p=k(V,"TH",{class:!0});var le=y(p);W=j(le,"Amount"),le.forEach(f),R=P(V),S=k(V,"TH",{class:!0});var ie=y(S);v=j(ie,"Total"),ie.forEach(f),V.forEach(f),L.forEach(f),w=P(B),C=k(B,"TBODY",{});var ae=y(C);for(let oe=0;oe<D.length;oe+=1)D[oe].l(ae);ae.forEach(f),B.forEach(f),I.forEach(f),this.h()},h(){E(s,"class","right"),E(_,"class","right"),E(p,"class","right"),E(S,"class","right"),E(o,"class","svelte-fdv1qg"),E(e,"class","scrollable-tab-content")},m(O,I){F(O,e,I),d(e,o),d(o,n),d(n,l),d(l,i),d(i,a),d(l,m),d(l,s),d(s,r),d(l,c),d(l,_),d(_,g),d(l,u),d(l,p),d(p,W),d(l,R),d(l,S),d(S,v),d(o,w),d(o,C);for(let B=0;B<D.length;B+=1)D[B]&&D[B].m(C,null)},p(O,[I]){if(I&2){T=O[1];let B;for(B=0;B<T.length;B+=1){const L=In(O,T,B);D[B]?D[B].p(L,I):(D[B]=Bn(L),D[B].c(),D[B].m(C,null))}for(;B<D.length;B+=1)D[B].d(1);D.length=T.length}},i:K,o:K,d(O){O&&f(e),me(D,O)}}}function Vo(t,e,o){let n,{rooms:l}=e;return t.$$set=i=>{"rooms"in i&&o(0,l=i.rooms)},t.$$.update=()=>{t.$$.dirty&1&&o(1,n=Ge.map(i=>({type:i,rooms:l.filter(a=>(a==null?void 0:a.type.key)===i.key)})).sort((i,a)=>a.rooms.length-i.rooms.length))},[l,n]}class qo extends ge{constructor(e){super(),pe(this,e,Vo,Fo,_e,{rooms:0})}}function Qe(t,{delay:e=0,duration:o=400,easing:n=mo}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:n,css:i=>`opacity: ${i*l}`}}const jo=t=>({tab:t&4}),Nn=t=>({tab:t[2]});function Wn(t,e,o){const n=t.slice();return n[6]=e[o],n}function Mn(t){let e,o=t[6]+"",n,l,i,a;function m(){return t[5](t[6])}return{c(){e=b("button"),n=q(o),l=M(),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var r=y(e);n=j(r,o),l=P(r),r.forEach(f),this.h()},h(){E(e,"class","svelte-1melpyn"),Q(e,"active",t[2]===t[6])},m(s,r){F(s,e,r),d(e,n),d(e,l),i||(a=$(e,"click",m),i=!0)},p(s,r){t=s,r&1&&o!==(o=t[6]+"")&&Y(n,o),r&5&&Q(e,"active",t[2]===t[6])},d(s){s&&f(e),i=!1,a()}}}function Pn(t){let e,o,n;const l=t[4].default,i=uo(l,t,t[3],Nn);return{c(){e=b("div"),i&&i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var m=y(e);i&&i.l(m),m.forEach(f),this.h()},h(){E(e,"class","tab svelte-1melpyn")},m(a,m){F(a,e,m),i&&i.m(e,null),n=!0},p(a,m){i&&i.p&&(!n||m&12)&&fo(i,l,a,a[3],n?go(l,a[3],m,jo):ho(a[3]),Nn)},i(a){n||(H(i,a),a&&dn(()=>{n&&(o||(o=ze(e,Qe,{},!0)),o.run(1))}),n=!0)},o(a){U(i,a),a&&(o||(o=ze(e,Qe,{},!1)),o.run(0)),n=!1},d(a){a&&f(e),i&&i.d(a),a&&o&&o.end()}}}function Go(t){let e,o,n,l,i=t[2],a,m=t[0],s=[];for(let c=0;c<m.length;c+=1)s[c]=Mn(Wn(t,m,c));let r=Pn(t);return{c(){e=b("div"),o=b("div");for(let c=0;c<s.length;c+=1)s[c].c();n=M(),l=b("div"),r.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var _=y(e);o=k(_,"DIV",{class:!0});var g=y(o);for(let p=0;p<s.length;p+=1)s[p].l(g);g.forEach(f),n=P(_),l=k(_,"DIV",{class:!0});var u=y(l);r.l(u),u.forEach(f),_.forEach(f),this.h()},h(){E(o,"class","navigation"),E(l,"class","content svelte-1melpyn"),E(e,"class","container svelte-1melpyn"),Q(e,"inverted",t[1])},m(c,_){F(c,e,_),d(e,o);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(o,null);d(e,n),d(e,l),r.m(l,null),a=!0},p(c,[_]){if(_&5){m=c[0];let g;for(g=0;g<m.length;g+=1){const u=Wn(c,m,g);s[g]?s[g].p(u,_):(s[g]=Mn(u),s[g].c(),s[g].m(o,null))}for(;g<s.length;g+=1)s[g].d(1);s.length=m.length}_&4&&_e(i,i=c[2])?(fe(),U(r,1,1,K),he(),r=Pn(c),r.c(),H(r,1),r.m(l,null)):r.p(c,_),(!a||_&2)&&Q(e,"inverted",c[1])},i(c){a||(H(r),a=!0)},o(c){U(r),a=!1},d(c){c&&f(e),me(s,c),r.d(c)}}}function Ao(t,e,o){let{$$slots:n={},$$scope:l}=e,{tabs:i}=e,{inverted:a=!1}=e,m=i[0];const s=r=>o(2,m=r);return t.$$set=r=>{"tabs"in r&&o(0,i=r.tabs),"inverted"in r&&o(1,a=r.inverted),"$$scope"in r&&o(3,l=r.$$scope)},[i,a,m,l,n,s]}class _o extends ge{constructor(e){super(),pe(this,e,Ao,Go,_e,{tabs:0,inverted:1})}}function Fn(t,e,o){const n=t.slice();return n[8]=e[o],n}function Ho(t){let e,o=t[1]&&Vn(t);return{c(){e=b("div"),o&&o.c(),this.h()},l(n){e=k(n,"DIV",{class:!0});var l=y(e);o&&o.l(l),l.forEach(f),this.h()},h(){E(e,"class","content svelte-qe21v1"),Q(e,"below",!!t[1]),Q(e,"supported",t[1]&&!t[1].type.open)},m(n,l){F(n,e,l),o&&o.m(e,null)},p(n,l){n[1]?o?o.p(n,l):(o=Vn(n),o.c(),o.m(e,null)):o&&(o.d(1),o=null),l&2&&Q(e,"below",!!n[1]),l&2&&Q(e,"supported",n[1]&&!n[1].type.open)},d(n){n&&f(e),o&&o.d()}}}function Uo(t){let e,o,n,l,i=t[0].type.name+"",a,m,s,r=t[5],c=[];for(let _=0;_<r.length;_+=1)c[_]=qn(Fn(t,r,_));return{c(){e=b("div"),o=M(),n=b("div"),l=b("div"),a=q(i),m=M();for(let _=0;_<c.length;_+=1)c[_].c();s=ce(),this.h()},l(_){e=k(_,"DIV",{class:!0}),y(e).forEach(f),o=P(_),n=k(_,"DIV",{class:!0});var g=y(n);l=k(g,"DIV",{class:!0});var u=y(l);a=j(u,i),u.forEach(f),g.forEach(f),m=P(_);for(let p=0;p<c.length;p+=1)c[p].l(_);s=ce(),this.h()},h(){E(e,"class","marker svelte-qe21v1"),ee(e,"background-color",t[0].type.color),E(l,"class","title svelte-qe21v1"),E(n,"class","content svelte-qe21v1"),ee(n,"color",t[0].type.color),ee(n,"background-color",t[0].type.bg)},m(_,g){F(_,e,g),F(_,o,g),F(_,n,g),d(n,l),d(l,a),F(_,m,g);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(_,g);F(_,s,g)},p(_,g){if(g&1&&ee(e,"background-color",_[0].type.color),g&1&&i!==(i=_[0].type.name+"")&&Y(a,i),g&1&&ee(n,"color",_[0].type.color),g&1&&ee(n,"background-color",_[0].type.bg),g&36){r=_[5];let u;for(u=0;u<r.length;u+=1){const p=Fn(_,r,u);c[u]?c[u].p(p,g):(c[u]=qn(p),c[u].c(),c[u].m(s.parentNode,s))}for(;u<c.length;u+=1)c[u].d(1);c.length=r.length}},d(_){_&&f(e),_&&f(o),_&&f(n),_&&f(m),me(c,_),_&&f(s)}}}function Vn(t){let e,o=t[1].type.name+"",n;return{c(){e=b("div"),n=q(o),this.h()},l(l){e=k(l,"DIV",{class:!0});var i=y(e);n=j(i,o),i.forEach(f),this.h()},h(){E(e,"class","title svelte-qe21v1")},m(l,i){F(l,e,i),d(e,n)},p(l,i){i&2&&o!==(o=l[1].type.name+"")&&Y(n,o)},d(l){l&&f(e)}}}function qn(t){let e,o;return{c(){e=b("div"),this.h()},l(n){e=k(n,"DIV",{class:!0}),y(e).forEach(f),this.h()},h(){E(e,"class",o="door "+sn(t[8])+" svelte-qe21v1"),Q(e,"connected",t[2].includes(t[8]))},m(n,l){F(n,e,l)},p(n,l){l&32&&o!==(o="door "+sn(n[8])+" svelte-qe21v1")&&E(e,"class",o),l&36&&Q(e,"connected",n[2].includes(n[8]))},d(n){n&&f(e)}}}function jn(t){let e;return{c(){e=b("div"),this.h()},l(o){e=k(o,"DIV",{class:!0}),y(e).forEach(f),this.h()},h(){E(e,"class","selected svelte-qe21v1")},m(o,n){F(o,e,n)},d(o){o&&f(e)}}}function Yo(t){let e,o,n,l,i;function a(c,_){return c[0]?Uo:Ho}let m=a(t),s=m(t),r=t[3]&&jn();return{c(){e=b("div"),s.c(),o=M(),r&&r.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var _=y(e);s.l(_),o=P(_),r&&r.l(_),_.forEach(f),this.h()},h(){E(e,"class",n="cell "+t[4]+" svelte-qe21v1")},m(c,_){F(c,e,_),s.m(e,null),d(e,o),r&&r.m(e,null),l||(i=[$(e,"click",Oe(t[6])),$(e,"keypress",Oe(t[6]))],l=!0)},p(c,[_]){m===(m=a(c))&&s?s.p(c,_):(s.d(1),s=m(c),s&&(s.c(),s.m(e,o))),c[3]?r||(r=jn(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),_&16&&n!==(n="cell "+c[4]+" svelte-qe21v1")&&E(e,"class",n)},i:K,o:K,d(c){c&&f(e),s.d(),r&&r.d(),l=!1,Le(i)}}}function zo(t,e,o){let n,l,{room:i}=e,{below:a}=e,{connections:m}=e,{selected:s}=e;const r=Ze(),c=()=>r("selected");return t.$$set=_=>{"room"in _&&o(0,i=_.room),"below"in _&&o(1,a=_.below),"connections"in _&&o(2,m=_.connections),"selected"in _&&o(3,s=_.selected)},t.$$.update=()=>{t.$$.dirty&1&&o(5,n=cn(i)),t.$$.dirty&1&&o(4,l=i?sn(i.orientation):"")},[i,a,m,s,l,n,c]}class Xo extends ge{constructor(e){super(),pe(this,e,zo,Yo,_e,{room:0,below:1,connections:2,selected:3})}}function Gn(t,e,o){const n=t.slice();return n[23]=e[o],n[25]=o,n}function Jo(t){const e=t.slice(),o=e[7](e[0]);return e[23]=o,e}function Ko(t){let e;return{c(){e=q("None")},l(o){e=j(o,"None")},m(o,n){F(o,e,n)},p:K,d(o){o&&f(e)}}}function An(t){let e,o,n,l,i=(ne(t[23])?t[23].name:t[23])+"",a;function m(c,_){if(_&1&&(e=null),_&1&&(o=null),e==null&&(e=!!(ne(c[23])&&c[23].img)),e)return Qo;if(o==null&&(o=!!(ne(c[23])&&c[23].icon)),o)return $o}let s=m(t,-1),r=s&&s(t);return{c(){r&&r.c(),n=M(),l=b("span"),a=q(i),this.h()},l(c){r&&r.l(c),n=P(c),l=k(c,"SPAN",{class:!0});var _=y(l);a=j(_,i),_.forEach(f),this.h()},h(){E(l,"class","option-name svelte-1wgdizi")},m(c,_){r&&r.m(c,_),F(c,n,_),F(c,l,_),d(l,a)},p(c,_){s===(s=m(c,_))&&r?r.p(c,_):(r&&r.d(1),r=s&&s(c),r&&(r.c(),r.m(n.parentNode,n))),_&1&&i!==(i=(ne(c[23])?c[23].name:c[23])+"")&&Y(a,i)},d(c){r&&r.d(c),c&&f(n),c&&f(l)}}}function $o(t){let e,o;return{c(){e=b("i"),this.h()},l(n){e=k(n,"I",{class:!0}),y(e).forEach(f),this.h()},h(){E(e,"class",o=Xe(t[23].icon)+" svelte-1wgdizi")},m(n,l){F(n,e,l)},p(n,l){l&1&&o!==(o=Xe(n[23].icon)+" svelte-1wgdizi")&&E(e,"class",o)},d(n){n&&f(e)}}}function Qo(t){let e,o,n;return{c(){e=b("img"),this.h()},l(l){e=k(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Je(e.src,o=t[23].img)||E(e,"src",o),E(e,"alt",n=t[23].name),E(e,"class","option-icon svelte-1wgdizi")},m(l,i){F(l,e,i)},p(l,i){i&1&&!Je(e.src,o=l[23].img)&&E(e,"src",o),i&1&&n!==(n=l[23].name)&&E(e,"alt",n)},d(l){l&&f(e)}}}function Hn(t){let e,o,n,l,i,a,m,s,r=t[5],c=[];for(let _=0;_<r.length;_+=1)c[_]=Un(Gn(t,r,_));return{c(){e=b("div"),o=b("div"),n=b("span"),l=q("None"),a=M();for(let _=0;_<c.length;_+=1)c[_].c();this.h()},l(_){e=k(_,"DIV",{class:!0,role:!0});var g=y(e);o=k(g,"DIV",{class:!0,tabindex:!0,role:!0,"aria-selected":!0});var u=y(o);n=k(u,"SPAN",{class:!0});var p=y(n);l=j(p,"None"),p.forEach(f),u.forEach(f),a=P(g);for(let W=0;W<c.length;W+=1)c[W].l(g);g.forEach(f),this.h()},h(){E(n,"class","option-name svelte-1wgdizi"),E(o,"class","dropdown-item svelte-1wgdizi"),E(o,"tabindex","0"),E(o,"role","option"),E(o,"aria-selected",i=!t[0]),Q(o,"focused",t[4]===-1),E(e,"class","dropdown-menu svelte-1wgdizi"),E(e,"role","listbox"),Q(e,"upward",t[6])},m(_,g){F(_,e,g),d(e,o),d(o,n),d(n,l),d(e,a);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(e,null);m||(s=[$(o,"click",t[16]),$(o,"keydown",t[17])],m=!0)},p(_,g){if(g&1&&i!==(i=!_[0])&&E(o,"aria-selected",i),g&16&&Q(o,"focused",_[4]===-1),g&1585){r=_[5];let u;for(u=0;u<r.length;u+=1){const p=Gn(_,r,u);c[u]?c[u].p(p,g):(c[u]=Un(p),c[u].c(),c[u].m(e,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=r.length}g&64&&Q(e,"upward",_[6])},d(_){_&&f(e),me(c,_),m=!1,Le(s)}}}function Zo(t){let e,o;return{c(){e=b("i"),this.h()},l(n){e=k(n,"I",{class:!0}),y(e).forEach(f),this.h()},h(){E(e,"class",o=Xe(t[23].icon)+" svelte-1wgdizi")},m(n,l){F(n,e,l)},p(n,l){l&32&&o!==(o=Xe(n[23].icon)+" svelte-1wgdizi")&&E(e,"class",o)},d(n){n&&f(e)}}}function xo(t){let e,o,n;return{c(){e=b("img"),this.h()},l(l){e=k(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Je(e.src,o=t[23].img)||E(e,"src",o),E(e,"alt",n=t[23].name),E(e,"class","option-icon svelte-1wgdizi")},m(l,i){F(l,e,i)},p(l,i){i&32&&!Je(e.src,o=l[23].img)&&E(e,"src",o),i&32&&n!==(n=l[23].name)&&E(e,"alt",n)},d(l){l&&f(e)}}}function Un(t){let e,o,n,l,i,a=(ne(t[23])?t[23].name:t[23])+"",m,s,r,c,_;function g(S,v){if(v&32&&(o=null),v&32&&(n=null),o==null&&(o=!!(ne(S[23])&&S[23].img)),o)return xo;if(n==null&&(n=!!(ne(S[23])&&S[23].icon)),n)return Zo}let u=g(t,-1),p=u&&u(t);function W(){return t[18](t[23])}function R(...S){return t[19](t[23],...S)}return{c(){e=b("div"),p&&p.c(),l=M(),i=b("span"),m=q(a),s=M(),this.h()},l(S){e=k(S,"DIV",{class:!0,tabindex:!0,role:!0,"aria-selected":!0});var v=y(e);p&&p.l(v),l=P(v),i=k(v,"SPAN",{class:!0});var w=y(i);m=j(w,a),w.forEach(f),s=P(v),v.forEach(f),this.h()},h(){E(i,"class","option-name svelte-1wgdizi"),E(e,"class","dropdown-item svelte-1wgdizi"),E(e,"tabindex","0"),E(e,"role","option"),E(e,"aria-selected",r=t[0]===(ne(t[23])?t[23].id:t[23])),Q(e,"selected",t[0]===(ne(t[23])?t[23].id:t[23])),Q(e,"focused",t[4]===t[25])},m(S,v){F(S,e,v),p&&p.m(e,null),d(e,l),d(e,i),d(i,m),d(e,s),c||(_=[$(e,"click",W),$(e,"keydown",R)],c=!0)},p(S,v){t=S,u===(u=g(t,v))&&p?p.p(t,v):(p&&p.d(1),p=u&&u(t),p&&(p.c(),p.m(e,l))),v&32&&a!==(a=(ne(t[23])?t[23].name:t[23])+"")&&Y(m,a),v&33&&r!==(r=t[0]===(ne(t[23])?t[23].id:t[23]))&&E(e,"aria-selected",r),v&33&&Q(e,"selected",t[0]===(ne(t[23])?t[23].id:t[23])),v&16&&Q(e,"focused",t[4]===t[25])},d(S){S&&f(e),p&&p.d(),c=!1,Le(_)}}}function et(t){let e,o,n,l,i,a,m;function s(u,p){return p&1&&(l=null),l==null&&(l=!!(u[0]&&u[7](u[0]))),l?An:Ko}function r(u,p){return p===An?Jo(u):u}let c=s(t,-1),_=c(r(t,c)),g=t[2]&&Hn(t);return{c(){e=b("div"),o=b("button"),n=b("div"),_.c(),i=M(),g&&g.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var p=y(e);o=k(p,"BUTTON",{type:!0,class:!0,"aria-haspopup":!0,"aria-expanded":!0});var W=y(o);n=k(W,"DIV",{class:!0});var R=y(n);_.l(R),R.forEach(f),W.forEach(f),i=P(p),g&&g.l(p),p.forEach(f),this.h()},h(){E(n,"class","dropdown-text svelte-1wgdizi"),E(o,"type","button"),E(o,"class","dropdown-toggle svelte-1wgdizi"),E(o,"aria-haspopup","listbox"),E(o,"aria-expanded",t[2]),E(e,"class","icon-dropdown svelte-1wgdizi"),ee(e,"width",t[1])},m(u,p){F(u,e,p),d(e,o),d(o,n),_.m(n,null),d(e,i),g&&g.m(e,null),t[20](e),a||(m=[$(o,"click",Oe(t[15])),$(e,"keydown",t[8])],a=!0)},p(u,[p]){c===(c=s(u,p))&&_?_.p(r(u,c),p):(_.d(1),_=c(r(u,c)),_&&(_.c(),_.m(n,null))),p&4&&E(o,"aria-expanded",u[2]),u[2]?g?g.p(u,p):(g=Hn(u),g.c(),g.m(e,null)):g&&(g.d(1),g=null),p&2&&ee(e,"width",u[1])},i:K,o:K,d(u){u&&f(e),_.d(),g&&g.d(),t[20](null),a=!1,Le(m)}}}let nt=28;function ne(t){return typeof t=="object"&&t!==null}function ot(t,e,o){let n,l,{options:i=[]}=e,{selected:a=""}=e,{width:m="200px"}=e,s=!1,r,c=-1,_,g,u;function p(L){return n.find(V=>ne(V)?V.id===L:V===L)}function W(L){s&&r&&!r.contains(L.target)&&o(2,s=!1)}function R(L){if(s)switch(L.key){case"Escape":o(2,s=!1);break;case"ArrowDown":L.preventDefault(),o(4,c=Math.min(c+1,n.length));break;case"ArrowUp":L.preventDefault(),o(4,c=Math.max(c-1,-1));break;case"Enter":case" ":if(L.preventDefault(),c===-1)w("");else{const V=n[c];w(ne(V)?V.id:V)}break}}function S(L,V){(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),w(V))}un(()=>{document.addEventListener("click",W),o(14,u=window.innerHeight);function L(){r&&(o(13,g=r.getBoundingClientRect()),o(12,_=Math.min((n.length+1)*nt,200))),o(14,u=window.innerHeight)}return window.addEventListener("resize",L),L(),()=>{document.removeEventListener("click",W),window.removeEventListener("resize",L)}});const v=Ze();function w(L){o(0,a=L),o(2,s=!1),v("change",L)}const C=()=>o(2,s=!s),T=()=>w(""),D=L=>S(L,""),O=L=>w(ne(L)?L.id:L),I=(L,V)=>S(V,ne(L)?L.id:L);function B(L){po[L?"unshift":"push"](()=>{r=L,o(3,r)})}return t.$$set=L=>{"options"in L&&o(11,i=L.options),"selected"in L&&o(0,a=L.selected),"width"in L&&o(1,m=L.width)},t.$$.update=()=>{t.$$.dirty&2048&&o(5,n=Array.isArray(i)?i.map(L=>{var V;return ne(L)?L:{id:L,name:((V=gn(L))==null?void 0:V.name)||L}}):[]),t.$$.dirty&28676&&o(6,l=s&&g&&g.bottom+_>u&&g.top>_)},[a,m,s,r,c,n,l,p,R,S,w,i,_,g,u,C,T,D,O,I,B]}class tt extends ge{constructor(e){super(),pe(this,e,ot,et,_e,{options:11,selected:0,width:1})}}function Yn(t,e,o){const n=t.slice();return n[27]=e[o],n[29]=o,n}function zn(t,e,o){const n=t.slice();n[30]=e[o];const l=n[30].floors&&!n[30].floors.includes(n[0].num);return n[31]=l,n}function lt(t){let e,o,n,l,i,a,m,s,r,c,_,g,u,p,W,R=t[9],S=[];for(let T=0;T<R.length;T+=1)S[T]=Xn(zn(t,R,T));let v=t[1]&&Jn(t),w=t[0].num>=0&&t[3]&&Kn(),C=t[1]&&$n(t);return{c(){e=b("div"),o=b("select"),n=b("option"),l=q("Pick a room...");for(let T=0;T<S.length;T+=1)S[T].c();a=M(),v&&v.c(),m=M(),s=b("button"),r=b("i"),c=M(),w&&w.c(),_=M(),C&&C.c(),g=ce(),this.h()},l(T){e=k(T,"DIV",{class:!0});var D=y(e);o=k(D,"SELECT",{class:!0});var O=y(o);n=k(O,"OPTION",{});var I=y(n);l=j(I,"Pick a room..."),I.forEach(f);for(let L=0;L<S.length;L+=1)S[L].l(O);O.forEach(f),a=P(D),v&&v.l(D),m=P(D),s=k(D,"BUTTON",{class:!0});var B=y(s);r=k(B,"I",{class:!0}),y(r).forEach(f),B.forEach(f),D.forEach(f),c=P(T),w&&w.l(T),_=P(T),C&&C.l(T),g=ce(),this.h()},h(){n.__value="",n.value=n.__value,n.disabled=!0,n.selected=!0,E(o,"class","svelte-9hdm1t"),E(r,"class","icofont-ui-close"),E(s,"class","svelte-9hdm1t"),E(e,"class","svelte-9hdm1t")},m(T,D){var O;F(T,e,D),d(e,o),d(o,n),d(n,l);for(let I=0;I<S.length;I+=1)S[I]&&S[I].m(o,null);Ke(o,((O=t[1])==null?void 0:O.type.key)||""),d(e,a),v&&v.m(e,null),d(e,m),d(e,s),d(s,r),F(T,c,D),w&&w.m(T,D),F(T,_,D),C&&C.m(T,D),F(T,g,D),u=!0,p||(W=[$(o,"change",t[18]),$(s,"click",Oe(t[10]))],p=!0)},p(T,D){var O,I;if(D[0]&513){R=T[9];let B;for(B=0;B<R.length;B+=1){const L=zn(T,R,B);S[B]?S[B].p(L,D):(S[B]=Xn(L),S[B].c(),S[B].m(o,null))}for(;B<S.length;B+=1)S[B].d(1);S.length=R.length}(!u||D[0]&514&&i!==(i=((O=T[1])==null?void 0:O.type.key)||""))&&Ke(o,((I=T[1])==null?void 0:I.type.key)||""),T[1]?v?v.p(T,D):(v=Jn(T),v.c(),v.m(e,m)):v&&(v.d(1),v=null),T[0].num>=0&&T[3]?w||(w=Kn(),w.c(),w.m(_.parentNode,_)):w&&(w.d(1),w=null),T[1]?C?(C.p(T,D),D[0]&2&&H(C,1)):(C=$n(T),C.c(),H(C,1),C.m(g.parentNode,g)):C&&(fe(),U(C,1,1,()=>{C=null}),he())},i(T){u||(H(C),u=!0)},o(T){U(C),u=!1},d(T){T&&f(e),me(S,T),v&&v.d(),T&&f(c),w&&w.d(T),T&&f(_),C&&C.d(T),T&&f(g),p=!1,Le(W)}}}function it(t){let e,o;return{c(){e=b("p"),o=q("There is no supporting room below!"),this.h()},l(n){e=k(n,"P",{class:!0});var l=y(e);o=j(l,"There is no supporting room below!"),l.forEach(f),this.h()},h(){E(e,"class","svelte-9hdm1t")},m(n,l){F(n,e,l),d(e,o)},p:K,i:K,o:K,d(n){n&&f(e)}}}function Xn(t){var r;let e,o=t[30].name+"",n,l=t[31]?` (floors: ${(r=t[30].floors)==null?void 0:r.join(", ")})`:"",i,a,m,s;return{c(){e=b("option"),n=q(o),i=q(l),a=M(),this.h()},l(c){e=k(c,"OPTION",{});var _=y(e);n=j(_,o),i=j(_,l),a=P(_),_.forEach(f),this.h()},h(){e.disabled=m=t[31],e.__value=s=t[30].key,e.value=e.__value},m(c,_){F(c,e,_),d(e,n),d(e,i),d(e,a)},p(c,_){var g;_[0]&512&&o!==(o=c[30].name+"")&&Y(n,o),_[0]&513&&l!==(l=c[31]?` (floors: ${(g=c[30].floors)==null?void 0:g.join(", ")})`:"")&&Y(i,l),_[0]&513&&m!==(m=c[31])&&(e.disabled=m),_[0]&512&&s!==(s=c[30].key)&&(e.__value=s,e.value=e.__value)},d(c){c&&f(e)}}}function Jn(t){let e,o,n,l,i,a,m,s;return{c(){e=b("button"),o=b("i"),n=M(),l=b("button"),i=b("i"),this.h()},l(r){e=k(r,"BUTTON",{class:!0});var c=y(e);o=k(c,"I",{class:!0}),y(o).forEach(f),c.forEach(f),n=P(r),l=k(r,"BUTTON",{class:!0});var _=y(l);i=k(_,"I",{class:!0}),y(i).forEach(f),_.forEach(f),this.h()},h(){E(o,"class","icofont-ui-rotation"),E(e,"class","svelte-9hdm1t"),E(i,"class","icofont-ui-delete"),l.disabled=a=t[0].num>=0&&!!t[3],E(l,"class","svelte-9hdm1t")},m(r,c){F(r,e,c),d(e,o),F(r,n,c),F(r,l,c),d(l,i),m||(s=[$(e,"click",Oe(t[11])),$(l,"click",Oe(t[19]))],m=!0)},p(r,c){c[0]&9&&a!==(a=r[0].num>=0&&!!r[3])&&(l.disabled=a)},d(r){r&&f(e),r&&f(n),r&&f(l),m=!1,Le(s)}}}function Kn(t){let e,o,n,l,i;return{c(){e=b("div"),o=b("i"),n=M(),l=b("p"),i=q("This room is supportting the one above it!"),this.h()},l(a){e=k(a,"DIV",{class:!0});var m=y(e);o=k(m,"I",{class:!0}),y(o).forEach(f),n=P(m),l=k(m,"P",{class:!0});var s=y(l);i=j(s,"This room is supportting the one above it!"),s.forEach(f),m.forEach(f),this.h()},h(){E(o,"class","icofont-info svelte-9hdm1t"),E(l,"class","svelte-9hdm1t"),E(e,"class","svelte-9hdm1t")},m(a,m){F(a,e,m),d(e,o),d(e,n),d(e,l),d(l,i)},d(a){a&&f(e)}}}function $n(t){let e,o;return e=new _o({props:{tabs:["Details","Hotspots"],inverted:!0,$$slots:{default:[st,({tab:n})=>({26:n}),({tab:n})=>[n?67108864:0]]},$$scope:{ctx:t}}}),{c(){ve(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){ke(e,n,l),o=!0},p(n,l){const i={};l[0]&67109122|l[1]&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){o||(H(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){ye(e,n)}}}function at(t){let e,o,n,l=t[8],i=[];for(let m=0;m<l.length;m+=1)i[m]=Qn(Yn(t,l,m));const a=m=>U(i[m],1,1,()=>{i[m]=null});return{c(){e=b("table"),o=b("tbody");for(let m=0;m<i.length;m+=1)i[m].c()},l(m){e=k(m,"TABLE",{});var s=y(e);o=k(s,"TBODY",{});var r=y(o);for(let c=0;c<i.length;c+=1)i[c].l(r);r.forEach(f),s.forEach(f)},m(m,s){F(m,e,s),d(e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,null);n=!0},p(m,s){if(s[0]&8450){l=m[8];let r;for(r=0;r<l.length;r+=1){const c=Yn(m,l,r);i[r]?(i[r].p(c,s),H(i[r],1)):(i[r]=Qn(c),i[r].c(),H(i[r],1),i[r].m(o,null))}for(fe(),r=l.length;r<i.length;r+=1)a(r);he()}},i(m){if(!n){for(let s=0;s<l.length;s+=1)H(i[s]);n=!0}},o(m){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)U(i[s]);n=!1},d(m){m&&f(e),me(i,m)}}}function rt(t){let e,o,n,l,i,a,m,s=t[1].type.name+"",r,c,_,g,u,p,W,R=t[1].type.cost+"",S,v,w,C,T,D,O,I=t[1].type.minLvl+"",B;return{c(){e=b("table"),o=b("tbody"),n=b("tr"),l=b("td"),i=q("Name"),a=M(),m=b("td"),r=q(s),c=M(),_=b("tr"),g=b("td"),u=q("Cost"),p=M(),W=b("td"),S=q(R),v=M(),w=b("tr"),C=b("td"),T=q("Min. Level"),D=M(),O=b("td"),B=q(I)},l(L){e=k(L,"TABLE",{});var V=y(e);o=k(V,"TBODY",{});var X=y(o);n=k(X,"TR",{});var A=y(n);l=k(A,"TD",{});var z=y(l);i=j(z,"Name"),z.forEach(f),a=P(A),m=k(A,"TD",{});var le=y(m);r=j(le,s),le.forEach(f),A.forEach(f),c=P(X),_=k(X,"TR",{});var ie=y(_);g=k(ie,"TD",{});var ae=y(g);u=j(ae,"Cost"),ae.forEach(f),p=P(ie),W=k(ie,"TD",{});var oe=y(W);S=j(oe,R),oe.forEach(f),ie.forEach(f),v=P(X),w=k(X,"TR",{});var Se=y(w);C=k(Se,"TD",{});var we=y(C);T=j(we,"Min. Level"),we.forEach(f),D=P(Se),O=k(Se,"TD",{});var Ne=y(O);B=j(Ne,I),Ne.forEach(f),Se.forEach(f),X.forEach(f),V.forEach(f)},m(L,V){F(L,e,V),d(e,o),d(o,n),d(n,l),d(l,i),d(n,a),d(n,m),d(m,r),d(o,c),d(o,_),d(_,g),d(g,u),d(_,p),d(_,W),d(W,S),d(o,v),d(o,w),d(w,C),d(C,T),d(w,D),d(w,O),d(O,B)},p(L,V){V[0]&2&&s!==(s=L[1].type.name+"")&&Y(r,s),V[0]&2&&R!==(R=L[1].type.cost+"")&&Y(S,R),V[0]&2&&I!==(I=L[1].type.minLvl+"")&&Y(B,I)},i:K,o:K,d(L){L&&f(e)}}}function Qn(t){var _;let e,o,n=t[27].name+"",l,i,a,m,s,r;function c(...g){return t[20](t[29],...g)}return m=new tt({props:{options:t[27].options,selected:((_=t[1].hotspots[t[29]])==null?void 0:_.key)||""}}),m.$on("change",c),{c(){e=b("tr"),o=b("td"),l=q(n),i=M(),a=b("td"),ve(m.$$.fragment),s=M()},l(g){e=k(g,"TR",{});var u=y(e);o=k(u,"TD",{});var p=y(o);l=j(p,n),p.forEach(f),i=P(u),a=k(u,"TD",{});var W=y(a);be(m.$$.fragment,W),W.forEach(f),s=P(u),u.forEach(f)},m(g,u){F(g,e,u),d(e,o),d(o,l),d(e,i),d(e,a),ke(m,a,null),d(e,s),r=!0},p(g,u){var W;t=g,(!r||u[0]&256)&&n!==(n=t[27].name+"")&&Y(l,n);const p={};u[0]&256&&(p.options=t[27].options),u[0]&2&&(p.selected=((W=t[1].hotspots[t[29]])==null?void 0:W.key)||""),m.$set(p)},i(g){r||(H(m.$$.fragment,g),r=!0)},o(g){U(m.$$.fragment,g),r=!1},d(g){g&&f(e),ye(m)}}}function st(t){let e,o,n,l;const i=[rt,at],a=[];function m(s,r){return s[26]==="Details"?0:s[26]==="Hotspots"?1:-1}return~(e=m(t))&&(o=a[e]=i[e](t)),{c(){o&&o.c(),n=ce()},l(s){o&&o.l(s),n=ce()},m(s,r){~e&&a[e].m(s,r),F(s,n,r),l=!0},p(s,r){let c=e;e=m(s),e===c?~e&&a[e].p(s,r):(o&&(fe(),U(a[c],1,1,()=>{a[c]=null}),he()),~e?(o=a[e],o?o.p(s,r):(o=a[e]=i[e](s),o.c()),H(o,1),o.m(n.parentNode,n)):o=null)},i(s){l||(H(o),l=!0)},o(s){U(o),l=!1},d(s){~e&&a[e].d(s),s&&f(n)}}}function ct(t){let e,o,n,l,i;const a=[it,lt],m=[];function s(r,c){var _;return r[0].num>0&&(!r[2]||(_=r[2].type)!=null&&_.open)?0:1}return n=s(t),l=m[n]=a[n](t),{c(){e=b("div"),o=b("div"),l.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var c=y(e);o=k(c,"DIV",{class:!0});var _=y(o);l.l(_),_.forEach(f),c.forEach(f),this.h()},h(){E(o,"class","content svelte-9hdm1t"),E(e,"class","popup svelte-9hdm1t"),ee(e,"top",t[7]),ee(e,"bottom",t[6]),ee(e,"left",t[5]),ee(e,"right",t[4])},m(r,c){F(r,e,c),d(e,o),m[n].m(o,null),i=!0},p(r,c){let _=n;n=s(r),n===_?m[n].p(r,c):(fe(),U(m[_],1,1,()=>{m[_]=null}),he(),l=m[n],l?l.p(r,c):(l=m[n]=a[n](r),l.c()),H(l,1),l.m(o,null)),c[0]&128&&ee(e,"top",r[7]),c[0]&64&&ee(e,"bottom",r[6]),c[0]&32&&ee(e,"left",r[5]),c[0]&16&&ee(e,"right",r[4])},i(r){i||(H(l),i=!0)},o(r){U(l),i=!1},d(r){r&&f(e),m[n].d()}}}function _t(t,e,o){let n,l,i,a,m,s,r,c;const _=Te/2,g=Be/2,u=100/Te,p=100/Be;let{floor:W}=e,{x:R}=e,{y:S}=e,{room:v}=e,{below:w}=e,{above:C}=e;const T=Ze(),D=()=>T("close"),O=()=>T("rotateRoom",{x:R,y:S}),I=A=>{T("changeRoomType",{x:R,y:S,type:A?so(A):null})},B=(A,z)=>{T("changeFurniture",{x:R,y:S,hotspotIndex:A,type:z?gn(z):null})},L=A=>I(A.currentTarget.value),V=()=>I(null),X=(A,z)=>B(A,z.detail);return t.$$set=A=>{"floor"in A&&o(0,W=A.floor),"x"in A&&o(14,R=A.x),"y"in A&&o(15,S=A.y),"room"in A&&o(1,v=A.room),"below"in A&&o(2,w=A.below),"above"in A&&o(3,C=A.above)},t.$$.update=()=>{t.$$.dirty[0]&2&&o(8,l=(v==null?void 0:v.type.hotspots)||[]),t.$$.dirty[0]&32768&&o(17,i=S<g),t.$$.dirty[0]&16384&&o(16,a=R<_),t.$$.dirty[0]&163840&&o(7,m=i?`${p*(S+1)}%`:""),t.$$.dirty[0]&163840&&o(6,s=i?"":`${p*(Be-S)}%`),t.$$.dirty[0]&81920&&o(5,r=a?`${u*R}%`:""),t.$$.dirty[0]&81920&&o(4,c=a?"":`${u*(Te-R-1)}%`)},o(9,n=[...Ge].sort((A,z)=>A.name.localeCompare(z.name))),[W,v,w,C,c,r,s,m,l,n,D,O,I,B,R,S,a,i,L,V,X]}class mt extends ge{constructor(e){super(),pe(this,e,_t,ct,_e,{floor:0,x:14,y:15,room:1,below:2,above:3},null,[-1,-1])}}function Zn(t,e,o){const n=t.slice();return n[13]=e[o],n[15]=o,n}function xn(t,e,o){const n=t.slice();return n[16]=e[o],n[18]=o,n}function eo(t){var l;let e,o;function n(){return t[8](t[18],t[15])}return e=new Xo({props:{room:t[16],below:((l=t[1])==null?void 0:l.rooms[t[15]][t[18]])||null,selected:t[18]===t[3]&&t[15]===t[4],connections:t[7](t[18],t[15],t[16])}}),e.$on("selected",n),{c(){ve(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,a){ke(e,i,a),o=!0},p(i,a){var s;t=i;const m={};a&1&&(m.room=t[16]),a&2&&(m.below=((s=t[1])==null?void 0:s.rooms[t[15]][t[18]])||null),a&24&&(m.selected=t[18]===t[3]&&t[15]===t[4]),a&1&&(m.connections=t[7](t[18],t[15],t[16])),e.$set(m)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){U(e.$$.fragment,i),o=!1},d(i){ye(e,i)}}}function no(t){let e,o,n=t[13],l=[];for(let a=0;a<n.length;a+=1)l[a]=eo(xn(t,n,a));const i=a=>U(l[a],1,1,()=>{l[a]=null});return{c(){e=b("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var m=y(e);for(let s=0;s<l.length;s+=1)l[s].l(m);m.forEach(f),this.h()},h(){E(e,"class","row svelte-11ba7nn")},m(a,m){F(a,e,m);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);o=!0},p(a,m){if(m&219){n=a[13];let s;for(s=0;s<n.length;s+=1){const r=xn(a,n,s);l[s]?(l[s].p(r,m),H(l[s],1)):(l[s]=eo(r),l[s].c(),H(l[s],1),l[s].m(e,null))}for(fe(),s=n.length;s<l.length;s+=1)i(s);he()}},i(a){if(!o){for(let m=0;m<n.length;m+=1)H(l[m]);o=!0}},o(a){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)U(l[m]);o=!1},d(a){a&&f(e),me(l,a)}}}function oo(t){var n,l;let e,o;return e=new mt({props:{floor:t[0],x:t[3],y:t[4],room:t[5],below:((n=t[1])==null?void 0:n.rooms[t[4]][t[3]])||null,above:((l=t[2])==null?void 0:l.rooms[t[4]][t[3]])||null}}),e.$on("changeRoomType",t[9]),e.$on("rotateRoom",t[10]),e.$on("changeFurniture",t[11]),e.$on("close",t[12]),{c(){ve(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,a){ke(e,i,a),o=!0},p(i,a){var s,r;const m={};a&1&&(m.floor=i[0]),a&8&&(m.x=i[3]),a&16&&(m.y=i[4]),a&32&&(m.room=i[5]),a&26&&(m.below=((s=i[1])==null?void 0:s.rooms[i[4]][i[3]])||null),a&28&&(m.above=((r=i[2])==null?void 0:r.rooms[i[4]][i[3]])||null),e.$set(m)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){U(e.$$.fragment,i),o=!1},d(i){ye(e,i)}}}function ut(t){let e,o,n,l,i=t[0].rooms,a=[];for(let r=0;r<i.length;r+=1)a[r]=no(Zn(t,i,r));const m=r=>U(a[r],1,1,()=>{a[r]=null});let s=t[3]!==null&&t[4]!==null&&oo(t);return{c(){e=b("div");for(let r=0;r<a.length;r+=1)a[r].c();o=M(),s&&s.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var c=y(e);for(let _=0;_<a.length;_+=1)a[_].l(c);o=P(c),s&&s.l(c),c.forEach(f),this.h()},h(){E(e,"class","grid svelte-11ba7nn")},m(r,c){F(r,e,c);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);d(e,o),s&&s.m(e,null),l=!0},p(r,[c]){if(c&219){i=r[0].rooms;let _;for(_=0;_<i.length;_+=1){const g=Zn(r,i,_);a[_]?(a[_].p(g,c),H(a[_],1)):(a[_]=no(g),a[_].c(),H(a[_],1),a[_].m(e,o))}for(fe(),_=i.length;_<a.length;_+=1)m(_);he()}r[3]!==null&&r[4]!==null?s?(s.p(r,c),c&24&&H(s,1)):(s=oo(r),s.c(),H(s,1),s.m(e,null)):s&&(fe(),U(s,1,1,()=>{s=null}),he())},i(r){if(!l){for(let c=0;c<i.length;c+=1)H(a[c]);H(s),dn(()=>{l&&(n||(n=ze(e,Qe,{},!0)),n.run(1))}),l=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)U(a[c]);U(s),n||(n=ze(e,Qe,{},!1)),n.run(0),l=!1},d(r){r&&f(e),me(a,r),s&&s.d(),r&&n&&n.end()}}}function dt(t,e,o){let n,{floor:l}=e,{below:i}=e,{above:a}=e,m=null,s=null;const r=(R,S)=>{o(3,m=R),o(4,s=S)},c=(R,S,v)=>{if(!v)return[];const w={[Re.North]:S===0?null:l.rooms[S-1][R],[Re.East]:R>=Te-1?null:l.rooms[S][R+1],[Re.South]:S>=Be-1?null:l.rooms[S+1][R],[Re.West]:R===0?null:l.rooms[S][R-1]},C=[];for(const T of cn(v)){const D=w[T];if(D){for(const O of cn(D))if(T===fn(O,2)){C.push(T);break}}}return C},_=(R,S)=>r(R,S);function g(R){an.call(this,t,R)}function u(R){an.call(this,t,R)}function p(R){an.call(this,t,R)}const W=()=>r(null,null);return t.$$set=R=>{"floor"in R&&o(0,l=R.floor),"below"in R&&o(1,i=R.below),"above"in R&&o(2,a=R.above)},t.$$.update=()=>{t.$$.dirty&25&&o(5,n=m!==null&&s!==null?l.rooms[s][m]:null)},[l,i,a,m,s,n,r,c,_,g,u,p,W]}class ft extends ge{constructor(e){super(),pe(this,e,dt,ut,_e,{floor:0,below:1,above:2})}}function to(t,e,o){const n=t.slice();return n[3]=e[o],n[17]=o,n}function lo(t){let e,o;return e=new ft({props:{floor:t[3],below:t[0].floors[t[1]-1]||null,above:t[0].floors[t[1]+1]||null}}),e.$on("changeRoomType",t[6]),e.$on("rotateRoom",t[7]),e.$on("changeFurniture",t[8]),{c(){ve(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){ke(e,n,l),o=!0},p(n,l){const i={};l&8&&(i.floor=n[3]),l&3&&(i.below=n[0].floors[n[1]-1]||null),l&3&&(i.above=n[0].floors[n[1]+1]||null),e.$set(i)},i(n){o||(H(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){ye(e,n)}}}function io(t){let e,o,n=t[3].num+"",l;return{c(){e=b("option"),o=q("Floor "),l=q(n),this.h()},l(i){e=k(i,"OPTION",{});var a=y(e);o=j(a,"Floor "),l=j(a,n),a.forEach(f),this.h()},h(){e.__value=t[17],e.value=e.__value},m(i,a){F(i,e,a),d(e,o),d(e,l)},p(i,a){a&1&&n!==(n=i[3].num+"")&&Y(l,n)},d(i){i&&f(e)}}}function ht(t){let e,o,n=t[15]+"",l;return{c(){e=b("p"),o=q("Unknown tab "),l=q(n)},l(i){e=k(i,"P",{});var a=y(e);o=j(a,"Unknown tab "),l=j(a,n),a.forEach(f)},m(i,a){F(i,e,a),d(e,o),d(e,l)},p(i,a){a&32768&&n!==(n=i[15]+"")&&Y(l,n)},i:K,o:K,d(i){i&&f(e)}}}function gt(t){let e,o;return e=new qo({props:{rooms:t[0].floors.map(ao).flat(2)}}),{c(){ve(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){ke(e,n,l),o=!0},p(n,l){const i={};l&1&&(i.rooms=n[0].floors.map(ao).flat(2)),e.$set(i)},i(n){o||(H(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){ye(e,n)}}}function pt(t){let e,o;return e=new Po({props:{requirements:t[2].levelRequirements}}),{c(){ve(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){ke(e,n,l),o=!0},p(n,l){const i={};l&4&&(i.requirements=n[2].levelRequirements),e.$set(i)},i(n){o||(H(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){ye(e,n)}}}function vt(t){let e,o;return e=new Co({props:{errors:t[2].errors}}),{c(){ve(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){ke(e,n,l),o=!0},p(n,l){const i={};l&4&&(i.errors=n[2].errors),e.$set(i)},i(n){o||(H(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){ye(e,n)}}}function bt(t){let e,o;return e=new No({props:{house:t[0]}}),e.$on("open",t[4]),e.$on("save",t[5]),{c(){ve(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,l){ke(e,n,l),o=!0},p(n,l){const i={};l&1&&(i.house=n[0]),e.$set(i)},i(n){o||(H(e.$$.fragment,n),o=!0)},o(n){U(e.$$.fragment,n),o=!1},d(n){ye(e,n)}}}function kt(t){let e,o,n,l;const i=[bt,vt,pt,gt,ht],a=[];function m(s,r){return s[15]==="General"?0:s[15]==="Errors"?1:s[15]==="Requirements"?2:s[15]==="Rooms"?3:4}return e=m(t),o=a[e]=i[e](t),{c(){o.c(),n=ce()},l(s){o.l(s),n=ce()},m(s,r){a[e].m(s,r),F(s,n,r),l=!0},p(s,r){let c=e;e=m(s),e===c?a[e].p(s,r):(fe(),U(a[c],1,1,()=>{a[c]=null}),he(),o=a[e],o?o.p(s,r):(o=a[e]=i[e](s),o.c()),H(o,1),o.m(n.parentNode,n))},i(s){l||(H(o),l=!0)},o(s){U(o),l=!1},d(s){a[e].d(s),s&&f(n)}}}function yt(t){var vn;let e,o=t[1],n,l,i,a,m,s,r,c,_,g,u,p,W,R,S,v,w,C,T,D,O,I=t[2].totalPrice+"",B,L,V,X,A,z,le,ie,ae=(((vn=t[2].levelRequirements[0])==null?void 0:vn.level)||0)+"",oe,Se,we,Ne,xe,ue,Fe,en,Ve=t[2].extent[0]+"",Ae,nn,qe=t[2].extent[1]+"",He,on,De,de,tn,pn,re=lo(t),We=t[0].floors,x=[];for(let G=0;G<We.length;G+=1)x[G]=io(to(t,We,G));return De=new _o({props:{tabs:["General","Errors","Requirements","Rooms"],$$slots:{default:[kt,({tab:G})=>({15:G}),({tab:G})=>G?32768:0]},$$scope:{ctx:t}}}),{c(){e=b("div"),re.c(),n=M(),l=b("div"),i=b("div"),a=b("button"),m=b("i"),r=M(),c=b("select");for(let G=0;G<x.length;G+=1)x[G].c();_=M(),g=b("button"),u=b("i"),W=M(),R=b("button"),S=b("i"),v=M(),w=b("div"),C=M(),T=b("div"),D=b("i"),O=M(),B=q(I),L=M(),V=b("div"),X=q("•"),A=M(),z=b("div"),le=b("i"),ie=M(),oe=q(ae),Se=M(),we=b("div"),Ne=q("•"),xe=M(),ue=b("div"),Fe=b("i"),en=M(),Ae=q(Ve),nn=q("x"),He=q(qe),on=M(),ve(De.$$.fragment),this.h()},l(G){e=k(G,"DIV",{class:!0});var Z=y(e);re.l(Z),Z.forEach(f),n=P(G),l=k(G,"DIV",{class:!0});var se=y(l);i=k(se,"DIV",{class:!0});var J=y(i);a=k(J,"BUTTON",{class:!0});var te=y(a);m=k(te,"I",{class:!0}),y(m).forEach(f),te.forEach(f),r=P(J),c=k(J,"SELECT",{class:!0});var je=y(c);for(let ln=0;ln<x.length;ln+=1)x[ln].l(je);je.forEach(f),_=P(J),g=k(J,"BUTTON",{class:!0});var bn=y(g);u=k(bn,"I",{class:!0}),y(u).forEach(f),bn.forEach(f),W=P(J),R=k(J,"BUTTON",{class:!0});var kn=y(R);S=k(kn,"I",{class:!0}),y(S).forEach(f),kn.forEach(f),v=P(J),w=k(J,"DIV",{class:!0}),y(w).forEach(f),C=P(J),T=k(J,"DIV",{class:!0});var Ue=y(T);D=k(Ue,"I",{class:!0}),y(D).forEach(f),O=P(Ue),B=j(Ue,I),Ue.forEach(f),L=P(J),V=k(J,"DIV",{class:!0});var yn=y(V);X=j(yn,"•"),yn.forEach(f),A=P(J),z=k(J,"DIV",{class:!0});var Ye=y(z);le=k(Ye,"I",{class:!0}),y(le).forEach(f),ie=P(Ye),oe=j(Ye,ae),Ye.forEach(f),Se=P(J),we=k(J,"DIV",{class:!0});var wn=y(we);Ne=j(wn,"•"),wn.forEach(f),xe=P(J),ue=k(J,"DIV",{class:!0});var Me=y(ue);Fe=k(Me,"I",{class:!0}),y(Fe).forEach(f),en=P(Me),Ae=j(Me,Ve),nn=j(Me,"x"),He=j(Me,qe),Me.forEach(f),J.forEach(f),on=P(se),be(De.$$.fragment,se),se.forEach(f),this.h()},h(){E(e,"class","map svelte-10cuohi"),E(m,"class","icofont-arrow-up"),a.disabled=s=t[3].num>=rn,E(a,"class","svelte-10cuohi"),E(c,"class","svelte-10cuohi"),t[1]===void 0&&dn(()=>t[11].call(c)),E(u,"class","icofont-arrow-down"),g.disabled=p=t[3].num<=$e,E(g,"class","svelte-10cuohi"),E(S,"class","icofont-ui-delete"),E(R,"class","svelte-10cuohi"),E(w,"class","svelte-10cuohi"),ee(w,"flex","1"),E(D,"class","icofont-money-bag"),E(T,"class","svelte-10cuohi"),E(V,"class","svelte-10cuohi"),E(le,"class","icofont-bars"),E(z,"class","svelte-10cuohi"),E(we,"class","svelte-10cuohi"),E(Fe,"class","icofont-drag"),E(ue,"class","svelte-10cuohi"),E(i,"class","floor-controls svelte-10cuohi"),E(l,"class","sidebar svelte-10cuohi")},m(G,Z){F(G,e,Z),re.m(e,null),F(G,n,Z),F(G,l,Z),d(l,i),d(i,a),d(a,m),d(i,r),d(i,c);for(let se=0;se<x.length;se+=1)x[se]&&x[se].m(c,null);Ke(c,t[1],!0),d(i,_),d(i,g),d(g,u),d(i,W),d(i,R),d(R,S),d(i,v),d(i,w),d(i,C),d(i,T),d(T,D),d(T,O),d(T,B),d(i,L),d(i,V),d(V,X),d(i,A),d(i,z),d(z,le),d(z,ie),d(z,oe),d(i,Se),d(i,we),d(we,Ne),d(i,xe),d(i,ue),d(ue,Fe),d(ue,en),d(ue,Ae),d(ue,nn),d(ue,He),d(l,on),ke(De,l,null),de=!0,tn||(pn=[$(a,"click",Oe(t[10])),$(c,"change",t[11]),$(c,"change",t[12]),$(g,"click",Oe(t[13])),$(R,"click",t[9])],tn=!0)},p(G,[Z]){var J;if(Z&2&&_e(o,o=G[1])?(fe(),U(re,1,1,K),he(),re=lo(G),re.c(),H(re,1),re.m(e,null)):re.p(G,Z),(!de||Z&8&&s!==(s=G[3].num>=rn))&&(a.disabled=s),Z&1){We=G[0].floors;let te;for(te=0;te<We.length;te+=1){const je=to(G,We,te);x[te]?x[te].p(je,Z):(x[te]=io(je),x[te].c(),x[te].m(c,null))}for(;te<x.length;te+=1)x[te].d(1);x.length=We.length}Z&2&&Ke(c,G[1]),(!de||Z&8&&p!==(p=G[3].num<=$e))&&(g.disabled=p),(!de||Z&4)&&I!==(I=G[2].totalPrice+"")&&Y(B,I),(!de||Z&4)&&ae!==(ae=(((J=G[2].levelRequirements[0])==null?void 0:J.level)||0)+"")&&Y(oe,ae),(!de||Z&4)&&Ve!==(Ve=G[2].extent[0]+"")&&Y(Ae,Ve),(!de||Z&4)&&qe!==(qe=G[2].extent[1]+"")&&Y(He,qe);const se={};Z&294917&&(se.$$scope={dirty:Z,ctx:G}),De.$set(se)},i(G){de||(H(re),H(De.$$.fragment,G),de=!0)},o(G){U(re),U(De.$$.fragment,G),de=!1},d(G){G&&f(e),re.d(G),G&&f(n),G&&f(l),me(x,G),ye(De),tn=!1,Le(pn)}}}const ao=t=>t.rooms;function wt(t,e,o){let n,l,i;vo(t,ko,v=>o(14,i=v));let a=ro(),m=Math.abs($e);un(()=>{i.url.search?o(0,a=co(i.url.searchParams)):o(0,a.floors[1].rooms[4][4]=Tn(a.floors[1],4,4,so("garden")),a)});const s=v=>{o(0,a=v.detail.house),Pe(`?${Ie(a)}`,{replaceState:!0})},r=v=>{Pe(`?${Ie(a)}`,{replaceState:!0})},c=v=>{v.detail.type===null?o(0,a.floors[m].rooms[v.detail.y][v.detail.x]=null,a):o(0,a.floors[m].rooms[v.detail.y][v.detail.x]=Tn(a.floors[m],v.detail.x,v.detail.y,v.detail.type),a),Pe(`?${Ie(a)}`,{replaceState:!0})},_=v=>{const w=a.floors[m].rooms[v.detail.y][v.detail.x];w&&(w.orientation=fn(w.orientation),o(0,a.floors[m].rooms[v.detail.y][v.detail.x]=w,a),Pe(`?${Ie(a)}`,{replaceState:!0}))},g=v=>{const w=a.floors[m].rooms[v.detail.y][v.detail.x];w&&(w.hotspots[v.detail.hotspotIndex]=v.detail.type,Pe(`?${Ie(a)}`,{replaceState:!0}))},u=()=>{var v;if(confirm("Are you sure you want to delete all rooms on this floor?")){for(let w=0;w<Be;w++)for(let C=0;C<Te;C++)(a.floors[m].num<0||!((v=a.floors[m+1])!=null&&v.rooms[w][C]))&&o(0,a.floors[m].rooms[w][C]=null,a);Pe(`?${Ie(a)}`,{replaceState:!0})}},p=()=>o(1,m++,m);function W(){m=bo(this),o(1,m)}const R=v=>o(1,m=Number(v.currentTarget.value)),S=()=>o(1,m--,m);return t.$$.update=()=>{t.$$.dirty&3&&o(3,n=a.floors[m]),t.$$.dirty&1&&o(2,l=Eo(a))},[a,m,l,n,s,r,c,_,g,u,p,W,R,S]}class St extends ge{constructor(e){super(),pe(this,e,wt,yt,_e,{})}}export{St as default};
