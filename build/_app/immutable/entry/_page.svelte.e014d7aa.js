import{S as he,i as ge,s as ce,e as se,b as W,E as J,h as f,k as v,q as V,l as b,m as k,r as q,n as w,D as d,F as _e,u as U,a as M,c as P,M as yt,N as K,O as Te,P as Ze,o as _t,H as Q,Q as co,v as de,d as H,f as fe,g as G,I as _o,J as uo,K as mo,L as fo,R as ut,T as Ye,U as Re,p as x,w as ho,V as ze,C as Xe,W as Je,y as pe,z as ve,A as be,B as ke,X as lt,G as go,Y as po}from"../chunks/index.32d6410e.js";import{p as vo}from"../chunks/stores.2afe523d.js";import{j as Ie}from"../chunks/singletons.7e2ddbd7.js";Ie.disable_scroll_handling;const Pe=Ie.goto;Ie.invalidate;Ie.invalidateAll;Ie.preload_data;Ie.preload_code;Ie.before_navigate;Ie.after_navigate;const we=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],Ee=9,Ce=9,bo=(n,e)=>{const o={house:n,num:e,rooms:[]};for(let t=0;t<Ce;t++){o.rooms.push([]);for(let l=0;l<Ee;l++)o.rooms[t].push(null)}return o},ko=n=>{const e=n.floors.map(m=>m.rooms).flat(2).filter(m=>!!m);let o=0,t=Ee,l=Ce,i=0,a=0,u=null;const s=[],r=[];let c=!1;for(const m of e)o+=m.type.cost,u=u&&m.type.minLvl<=u.type.minLvl?u:m,t=Math.min(t,m.x),i=Math.max(i,m.x),l=Math.min(l,m.y),a=Math.max(a,m.y),(m.type.key==="garden"||m.type.key==="formal_garden")&&(c=!0);if(c||s.push("You have must have at least one 'Garden' or 'Formal Garden' to place an exit portal!"),u&&r.push({name:"Highest Level Room",value:u.type.name,limit:"-",level:u.type.minLvl}),e.length>0){const m=we.find(g=>g.rooms>=e.length);if(m)r.push({name:"Number of Rooms",value:e.length,limit:m.rooms,level:m.level});else{const g=we[we.length-1].rooms;s.push(`You have too many rooms (${e.length})! You cannot have more than ${g}`)}}const _=Math.max(0,i-t+1);if(_>0){const m=we.find(g=>g.extent[0]>=_);if(m)r.push({name:"Extent X",value:_,limit:m.extent[0],level:m.level});else{const g=we[we.length-1].extent[0];s.push(`Your house is too wide (${_})! It can be at most ${g} wide`)}}const h=Math.max(0,a-l+1);if(h>0){const m=we.find(g=>g.extent[1]>=h);if(m)r.push({name:"Extent Y",value:h,limit:m.extent[1],level:m.level});else{const g=we[we.length-1].extent[1];s.push(`Your house is too tall (${h})! It can be at most ${g} tall`)}}return r.sort((m,g)=>g.level-m.level),{totalPrice:o,levelRequirements:r,extent:[_,h],errors:s}},Ke=-1,it=1,io=(n="Default")=>{const e={name:n,floors:[]};for(let o=Ke;o<=it;o++)e.floors.push(bo(e,o));return e};var De=(n=>(n[n.North=0]="North",n[n.East=1]="East",n[n.South=2]="South",n[n.West=3]="West",n))(De||{});const at=n=>De[n].toLowerCase(),mt=(n,e=1)=>(n+=e)%4,rt=n=>(n==null?void 0:n.type.doors.map(e=>mt(e,n.orientation)))||[],wt=(n,e,o,t)=>({floor:n,x:e,y:o,type:t,orientation:De.North,hotspots:Array(t.hotspots.length).fill(null)}),B=De,je=[{key:"garden",name:"Garden",cost:1e3,minLvl:1,doors:[B.North,B.East,B.South,B.West],bg:"#034a03",hotspots:[{name:"Centrepiece",options:[{id:"exit_portal",name:"Exit Portal",img:"/icons/garden/Exit_portal_icon.png"},{id:"decorative_rock",name:"Decorative Rock",img:"/icons/garden/Decorative_rock_icon.png"},{id:"pond",name:"Pond",img:"/icons/garden/Pond_icon.png"},{id:"imp_statue",name:"Imp Statue",img:"/icons/garden/Imp_statue_icon.png"},{id:"dungeon_entrance",name:"Dungeon Entrance",img:"/icons/garden/Dungeon_entrance_icon.png"}]},{name:"Tree",options:[{id:"tree",name:"Tree",img:"/icons/garden/Tree_Construction_icon.png"},{id:"nice_tree",name:"Nice Tree",img:"/icons/garden/Nice_tree_icon.png"},{id:"oak_tree",name:"Oak Tree",img:"/icons/garden/Oak_tree_icon.png"},{id:"willow_tree",name:"Willow_tree",img:"/icons/garden/Willow_tree_Construction_icon.png"},{id:"maple_tree",name:"Maple Tree",img:"/icons/garden/Maple_tree_Construction_icon.png"},{id:"yew_tree",name:"Yew Tree",img:"/icons/garden/Yew_tree_Construction_icon.png"},{id:"magic_tree",name:"Magic Tree",img:"/icons/garden/Magic_tree_Construction_icon.png"}]},{name:"Big Tree",options:[{id:"tree",name:"Tree",img:"/icons/garden/Tree_Construction_icon.png"},{id:"nice_tree",name:"Nice Tree",img:"/icons/garden/Nice_tree_icon.png"},{id:"oak_tree",name:"Oak Tree",img:"/icons/garden/Oak_tree_icon.png"},{id:"willow_tree",name:"Willow_tree",img:"/icons/garden/Willow_tree_Construction_icon.png"},{id:"maple_tree",name:"Maple Tree",img:"/icons/garden/Maple_tree_Construction_icon.png"},{id:"yew_tree",name:"Yew Tree",img:"/icons/garden/Yew_tree_Construction_icon.png"},{id:"magic_tree",name:"Magic Tree",img:"/icons/garden/Magic_tree_Construction_icon.png"}]},{name:"Small Plant 1",options:[{id:"plant",name:"Plant",img:"/icons/garden/Plant_icon.png"},{id:"small_fern",name:"Small Fern",img:"/icons/garden/Small_fern_icon.png"},{id:"fern",name:"Fern",img:"/icons/garden/Fern_small_plant_icon.png"}]},{name:"Small Plant 2",options:[{id:"dock_leaf",name:"Dock Leaf",img:"/icons/garden/Dock_leaf_icon.png"},{id:"thistle",name:"Thistle",img:"/icons/garden/Thistle_icon.png"},{id:"reeds",name:"Reeds",img:"/icons/garden/Reeds_icon.png"}]},{name:"Big Plant 1",options:[{id:"pumpkin",name:"Pumpkin",img:"/icons/garden/Pumpkin_icon.png"},{id:"beehive_1",name:"Beehive (Style 1)",img:"/icons/garden/Beehive_style_1_icon.png"},{id:"beehive_2",name:"Beehive (Style 2)",img:"/icons/garden/Beehive_style_2_icon.png"},{id:"big_fern",name:"Fern",img:"/icons/garden/Fern_big_plant_icon.png"},{id:"bush",name:"Big Bush",img:"/icons/garden/Bush_icon.png"},{id:"tall_plant",name:"Tall Plant",img:"/icons/garden/Tall_plant_icon.png"}]},{name:"Big Plant 2",options:[{id:"pumpkin",name:"Pumpkin",img:"/icons/garden/Pumpkin_icon.png"},{id:"beehive_1",name:"Beehive (Style 1)",img:"/icons/garden/Beehive_style_1_icon.png"},{id:"beehive_2",name:"Beehive (Style 2)",img:"/icons/garden/Beehive_style_2_icon.png"},{id:"short_plant",name:"Short Plant",img:"/icons/garden/Short_plant_icon.png"},{id:"large_leaf_bush",name:"Large Leaf Bush",img:"/icons/garden/Large_leaf_bush_icon.png"},{id:"huge_plant",name:"Huge Plant",img:"/icons/garden/Huge_plant_icon.png"}]},{name:"Tip jar",options:[{id:"tip_jar",name:"Tip Jar",img:"/icons/garden/Tip_jar_icon.png"}]}],open:!0,floors:[0]},{key:"parlour",name:"Parlour",cost:1e3,minLvl:1,doors:[B.East,B.South,B.West],bg:"#424242",hotspots:[{name:"Bookcase",options:[{id:"wooden_bookcase",name:"Wooden Bookcase",img:"/icons/parlour/Wooden_bookcase_icon.png"},{id:"oak_bookcase",name:"Oak Bookcase",img:"/icons/parlour/Oak_bookcase_icon.png"},{id:"mahogany_bookcase",name:"Mahogany Bookcase",img:"/icons/parlour/Mahogany_bookcase_icon.png"}]},{name:"Chairs",options:[{id:"crude_wooden_chair",name:"Crude Wooden Chair",img:"/icons/parlour/Crude_wooden_chair_icon.png"},{id:"wooden_chair",name:"Wooden Chair",img:"/icons/parlour/Wooden_chair_icon.png"},{id:"rocking_chair",name:"Rocking Char",img:"/icons/parlour/Rocking_chair_icon.png"},{id:"oak_chair",name:"Oak Chair",img:"/icons/parlour/Oak_chair_icon.png"},{id:"oak_armchair",name:"Oak Armchair",img:"/icons/parlour/Oak_armchair_icon.png"},{id:"teak_armchair",name:"Teak Armchair",img:"/icons/parlour/Teak_armchair_icon.png"},{id:"mahogany_armchair",name:"Mahogany Armchair",img:"/icons/parlour/Mahogany_armchair_icon.png"}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:"/icons/parlour/Torn_curtains_icon.png"},{id:"curtains",name:"Curtains",img:"/icons/parlour/Curtains_icon.png"},{id:"opulent_curtains",name:"Opulent Curtains",img:"/icons/parlour/Opulent_curtains_icon.png"},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:"/icons/parlour/Raging_echoes_curtains_icon.png"}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:"/icons/parlour/Clay_fireplace_icon.png"},{id:"stone_fireplace",name:"Stone Fireplace",img:"/icons/parlour/Stone_fireplace_icon.png"},{id:"marble_fireplace",name:"Marble Fireplace",img:"/icons/parlour/Marble_fireplace_icon.png"}]},{name:"Rug",options:[{id:"brown_rug",name:"Brown Rug",img:"/icons/parlour/Brown_rug_icon.png"},{id:"rug",name:"Rug",img:"/icons/parlour/Rug_icon.png"},{id:"deadman_rug",name:"Deadman Rug",img:"/icons/parlour/Deadman_rug_icon.png"},{id:"opulent_rug",name:"Opulent Rug",img:"/icons/parlour/Opulent_rug_icon.png"},{id:"raging_echoes_rug",name:"Raging Echoes Rug",img:"/icons/parlour/Raging_echoes_rug_icon.png"}]}]},{key:"kitchen",name:"Kitchen",cost:5e3,minLvl:5,doors:[B.East,B.South],bg:"#542808",hotspots:[{name:"Barrel",options:[{id:"beer_barrel",name:"Beer Barrel",img:"/icons/kitchen/Beer_barrel_icon.png"},{id:"cider_barrel",name:"Cider Barrel",img:"/icons/kitchen/Cider_barrel_icon.png"},{id:"asgarnian_ale",name:"Asgarnian Ale",img:"/icons/kitchen/Asgarnian_ale_barrel_icon.png"},{id:"greenmans_ale",name:"Greenman's Ale",img:"/icons/kitchen/Greenmans_ale_barrel_icon.png"},{id:"dragon_bitter",name:"Dragon Bitter",img:"/icons/kitchen/Dragon_bitter_barrel_icon.png"},{id:"chefs_delight",name:"Chef's Delight",img:"/icons/kitchen/Chefs_delight_barrel_icon.png"}]},{name:"Cat Basket",options:[{id:"cat_blanket",name:"Cat Blanket",img:"/icons/kitchen/Cat_blanket_icon.png"},{id:"cat_basket",name:"Cat Basket",img:"/icons/kitchen/Cat_basket_icon.png"},{id:"cushioned_basket",name:"Cushioned Basket",img:"/icons/kitchen/Cushioned_basket_icon.png"}]},{name:"Larder",options:[{id:"wooden_larder",name:"Wooden Larder",img:"/icons/kitchen/Wooden_larder_icon.png"},{id:"oak_larder",name:"Oak Larder",img:"/icons/kitchen/Oak_larder_icon.png"},{id:"teak_larder",name:"Teak Larder",img:"/icons/kitchen/Teak_larder_icon.png"}]},{name:"Shelf",options:[{id:"wooden_shelves_1",name:"Wooden Shelves 1",img:"/icons/kitchen/Wooden_shelves_1_icon.png"},{id:"wooden_shelves_2",name:"Wooden Shelves 2",img:"/icons/kitchen/Wooden_shelves_2_icon.png"},{id:"wooden_shelves_3",name:"Wooden Shelves 3",img:"/icons/kitchen/Wooden_shelves_3_icon.png"},{id:"oak_shelves_1",name:"Oak Shelves 1",img:"/icons/kitchen/Oak_shelves_1_icon.png"},{id:"oak_shelves_2",name:"Oak Shelves 2",img:"/icons/kitchen/Oak_shelves_2_icon.png"},{id:"teak_shelves_1",name:"Teak Shelves 1",img:"/icons/kitchen/Teak_shelves_1_icon.png"},{id:"teak_shelves_2",name:"Teak Shelves 2",img:"/icons/kitchen/Teak_shelves_2_icon.png"}]},{name:"Sink",options:[{id:"pump_and_drain",name:"Pump and Drain",img:"/icons/kitchen/Pump_and_drain_icon.png"},{id:"pump_and_tub",name:"Pump and Tub",img:"/icons/kitchen/Pump_and_tub_icon.png"},{id:"sink",name:"Sink",img:"/icons/kitchen/Sink_icon.png"},{id:"gold_sink",name:"Gold Sink",img:"/icons/kitchen/Gold_sink_icon.png"}]},{name:"Spice Rack",options:[{id:"spice_rack",name:"Spice Rack",img:"/icons/kitchen/Spice_rack_icon.png"}]},{name:"Stove",options:[{id:"firepit",name:"Firepit",img:"/icons/kitchen/Firepit_icon.png"},{id:"firepit_with_hook",name:"Firepit With Hook",img:"/icons/kitchen/Firepit_with_hook_icon.png"},{id:"firepit_with_pot",name:"Firepit With Pot",img:"/icons/kitchen/Firepit_with_pot_icon.png"},{id:"small_oven",name:"Small Oven",img:"/icons/kitchen/Small_oven_icon.png"},{id:"large_oven",name:"Large Oven",img:"/icons/kitchen/Large_oven_icon.png"},{id:"steel_range",name:"Steel Range",img:"/icons/kitchen/Steel_range_icon.png"},{id:"fancy_range",name:"Fancy Range",img:"/icons/kitchen/Fancy_range_icon.png"}]},{name:"Table",options:[{id:"kitchen_table",name:"Kitchen Table",img:"/icons/kitchen/Kitchen_table_icon.png"},{id:"oak_table",name:"Oak Table",img:"/icons/kitchen/Oak_kitchen_table_icon.png"},{id:"teak_table",name:"Teak Table",img:"/icons/kitchen/Teak_kitchen_table_icon.png"}]}]},{key:"dining_room",name:"Dining Room",cost:5e3,minLvl:10,doors:[B.East,B.South,B.West],bg:"#424242",hotspots:[]},{key:"workshop",name:"Workshop",cost:1e4,minLvl:15,doors:[B.North,B.South],bg:"#542808",hotspots:[]},{key:"bedroom",name:"Bedroom",cost:1e4,minLvl:20,doors:[B.East,B.South],bg:"#424242",hotspots:[{name:"Bed",options:[{id:"wooden_bed",name:"Wooden Bed",img:"/icons/bedroom/Wooden_bed_icon.png"},{id:"oak_bed",name:"Oak Bed",img:"/icons/bedroom/Oak_bed_icon.png"},{id:"large_oak_bed",name:"Large Oak Bed",img:"/icons/bedroom/Large_oak_bed_icon.png"},{id:"teak_bed",name:"Teak Bed",img:"/icons/bedroom/Teak_bed_icon.png"},{id:"large_teak_bed",name:"Large Teak Bed",img:"/icons/bedroom/Large_teak_bed_icon.png"},{id:"4_poster",name:"4-Poster",img:"/icons/bedroom/4-poster_icon.png"},{id:"gilded_4_poster",name:"Gilded 4-Poster",img:"/icons/bedroom/Gilded_4-poster_icon.png"}]},{name:"Corner",options:[{id:"oak_clock",name:"Oak Clock",img:"/icons/bedroom/Oak_clock_icon.png"},{id:"teak_clock",name:"Teak Clock",img:"/icons/bedroom/Teak_clock_icon.png"},{id:"servants_money_bag",name:"Servant's Money Bag",img:"/icons/bedroom/Servants_money_bag_icon.png"},{id:"gilded_clock",name:"Gilded Clock",img:"/icons/bedroom/Gilded_clock_icon.png"}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:"/icons/parlour/Torn_curtains_icon.png"},{id:"curtains",name:"Curtains",img:"/icons/parlour/Curtains_icon.png"},{id:"opulent_curtains",name:"Opulent Curtains",img:"/icons/parlour/Opulent_curtains_icon.png"},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:"/icons/parlour/Raging_echoes_curtains_icon.png"}]},{name:"Dresser",options:[{id:"shaving_stand",name:"Shaving Stand",img:"/icons/bedroom/Shaving_stand_icon.png"},{id:"oak_shaving_stand",name:"Oak Shaving Stand",img:"/icons/bedroom/Oak_shaving_stand_icon.png"},{id:"oak_dresser",name:"Oak Dresser",img:"/icons/bedroom/Oak_dresser_icon.png"},{id:"teak_dresser",name:"Teak Dresser",img:"/icons/bedroom/Teak_dresser_icon.png"},{id:"fancy_teak_dresser",name:"Fancy Teak Dresser",img:"/icons/bedroom/Fancy_teak_dresser_icon.png"},{id:"mahogany_dresser",name:"Mahogany Dresser",img:"/icons/bedroom/Mahogany_dresser_icon.png"},{id:"Gilded_dresser",name:"Gilded Dresser",img:"/icons/bedroom/Gilded_dresser_icon.png"}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:"/icons/parlour/Clay_fireplace_icon.png"},{id:"stone_fireplace",name:"Stone Fireplace",img:"/icons/parlour/Stone_fireplace_icon.png"},{id:"marble_fireplace",name:"Marble Fireplace",img:"/icons/parlour/Marble_fireplace_icon.png"}]},{name:"Rug",options:[{id:"brown_rug",name:"Brown Rug",img:"/icons/parlour/Brown_rug_icon.png"},{id:"rug",name:"Rug",img:"/icons/parlour/Rug_icon.png"},{id:"deadman_rug",name:"Deadman Rug",img:"/icons/parlour/Deadman_rug_icon.png"},{id:"opulent_rug",name:"Opulent Rug",img:"/icons/parlour/Opulent_rug_icon.png"},{id:"raging_echoes_rug",name:"Raging Echoes Rug",img:"/icons/parlour/Raging_echoes_rug_icon.png"}]},{name:"Wardrobe",options:[{id:"shoe_box",name:"Shoe Box",img:"/icons/bedroom/Shoe_box_icon.png"},{id:"oak_drawer",name:"Oak Drawers",img:"/icons/bedroom/Oak_drawers_icon.png"},{id:"oak_wardrobe",name:"Oak Wardrobe",img:"/icons/bedroom/Oak_wardrobe_icon.png"},{id:"teak_drawer",name:"Teak Drawers",img:"/icons/bedroom/Teak_drawers_icon.png"},{id:"teak_wardrobe",name:"Teak Wardrobe",img:"/icons/bedroom/Teak_wardrobe_icon.png"},{id:"mahogany_wardrobe",name:"Mahogany Wardrobe",img:"/icons/bedroom/Mahogany_wardrobe_icon.png"},{id:"gilded_wardrobe",name:"Gilded Wardrobe",img:"/icons/bedroom/Gilded_wardrobe_icon.png"}]}]},{key:"skill_hall",name:"Skill Hall",cost:15e3,minLvl:25,doors:[B.North,B.East,B.South,B.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"league_hall",name:"Leauge Hall",cost:15e3,minLvl:27,doors:[B.East,B.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"games_room",name:"Games Room",cost:25e3,minLvl:30,doors:[B.East,B.South,B.West],bg:"#731e4c",hotspots:[]},{key:"combat_room",name:"Combat Room",cost:25e3,minLvl:30,doors:[B.East,B.South,B.West],bg:"#731e4c",hotspots:[]},{key:"quest_hall",name:"Quest Hall",cost:25e3,minLvl:32,doors:[B.North,B.East,B.South,B.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"menagerie",name:"Menagerie",cost:3e4,minLvl:37,doors:[B.North,B.East,B.South,B.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"study",name:"Study",cost:5e4,minLvl:40,doors:[B.East,B.South,B.West],bg:"#542808",hotspots:[]},{key:"costume_room",name:"Costume Room",cost:5e4,minLvl:42,doors:[B.South],bg:"#731e4c",hotspots:[]},{key:"chapel",name:"Chapel",cost:5e4,minLvl:45,doors:[B.East,B.South],bg:"#542808",hotspots:[]},{key:"portal_chamber",name:"Portal Chamber",cost:1e5,minLvl:50,doors:[B.South],bg:"#542808",hotspots:[]},{key:"formal_garden",name:"Formal Garden",cost:75e3,minLvl:55,doors:[B.North,B.East,B.South,B.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"throne_room",name:"Throne Room",cost:15e4,minLvl:60,doors:[B.South],bg:"#040459",hotspots:[],floors:[0]},{key:"superior_garden",name:"Superior Garden",cost:75e3,minLvl:65,doors:[B.North,B.East,B.South,B.West],bg:"#034a03",hotspots:[{name:"Fence space",options:[{id:"redwood_fence",name:"Redwood fence",img:"/icons/Redwood_fence_icon.png"},{id:"marble_wall",name:"Marble wall",img:"/icons/marble_wall.png"},{id:"obsidian_fence",name:"Obsidian fence",img:"/icons/obsidian_fence.png"}]},{name:"Pool space",options:["restoration_pool","revitalisation_pool","rejuvenation_pool","fancy_rejuvenation_pool","ornate_rejuvenation_pool"]},{name:"Teleport Space",options:["spirit_tree","obelisk","fairy_ring","spirit_tree_fairy_ring"]},{name:"Theme",options:["zen_theme","otherworldly_theme","volcanic_theme"]},{name:"Topiary space",options:["topiary_bush"]},{name:"Seating space",options:["teak_garden_bench","gnome_bench","marble_decorative_bench","obsidian_decorative_bench"]}],floors:[0]},{key:"oubliette",name:"Oubliette",cost:15e4,minLvl:65,doors:[B.North,B.East,B.South,B.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_corridor",name:"Dungeon Corridor",cost:7500,minLvl:70,doors:[B.North,B.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_junction",name:"Dungeon Junction",cost:7500,minLvl:70,doors:[B.North,B.East,B.South,B.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_stairs",name:"Dungeon Stairs",cost:7500,minLvl:70,doors:[B.North,B.East,B.South,B.West],bg:"#800303",hotspots:[],stairs:!0,floors:[-1]},{key:"dungeon_pit",name:"Dungeon Pit",cost:1e4,minLvl:70,doors:[B.North,B.East,B.South,B.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"treasure_room",name:"Treasure Room",cost:25e4,minLvl:75,doors:[B.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"portal_nexus",name:"Portal nexus",cost:2e5,minLvl:72,doors:[B.North,B.East,B.South,B.West],bg:"#542808",hotspots:[],floors:[0]},{key:"achievement_gallery",name:"Achievement gallery",cost:2e5,minLvl:80,doors:[B.North,B.South],bg:"#3f0569",hotspots:[{name:"Adventure log",options:["mahogany_adventure_log","gilded_adventure_log","marble_adventure_log"]},{name:"Altar",options:["ancient_altar","lunar_altar","dark_altar","occult_altar"]},{name:"Boss lair",options:["boss_lair_display"]},{name:"Display",options:["mounted_emblem","mounted_coins","cape_hanger"]},{name:"Jewellery box",options:["basic_jewellery_box","fancy_jewellery_box","ornate_jewellery_box"]},{name:"Quest list",options:["quest_list"]}],floors:[0]}],st=new Map;for(const n of je){if(st.has(n.key))throw new Error(`Duplicate room type ${n.key}`);st.set(n.key,n)}const ao=n=>{const e=st.get(n);if(!e)throw new Error(`Unknown room type ${n}`);return e},dt=[{key:"exit_portal",name:"Exit Portal",minLvl:1,exp:100,materials:{iron_bar:10}},{key:"decorative_rock",name:"Decorative Rock",minLvl:5,exp:100,materials:{limestone_brick:5}},{key:"pond",name:"Pond",minLvl:10,exp:100,materials:{soft_clay:10}},{key:"imp_statue",name:"Imp Statue",minLvl:15,exp:150,materials:{limestone_brick:5,soft_clay:5}},{key:"dungeon_entrance",name:"Dungeon Entrance",minLvl:70,exp:500,materials:{marble_block:1}},{key:"plant",name:"Plant",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"small_fern",name:"Small Fern",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"fern",name:"Fern",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"dock_leaf",name:"Dock Leaf",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"thistle",name:"Thistle",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"reeds",name:"Reeds",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"redwood_fence",name:"Redwood Fence",minLvl:75,exp:240,materials:{redwood_logs:10,steel_bar:2}},{key:"marble_wall",name:"Marble Wall",minLvl:79,exp:4e3,materials:{marble_block:8}},{key:"obsidian_fence",name:"Obsidian Fence",minLvl:83,exp:2741,materials:{toktz_mej_tal:10,tzhaar_ket_om:2,toktz_xil_ul:25}},{key:"restoration_pool",name:"Restoration pool",minLvl:65,exp:706,materials:{limestone_brick:5,bucket_of_water:5,soul_rune:1e3,body_rune:1e3}},{key:"revitalisation_pool",name:"Revitalisation pool",minLvl:70,exp:850,materials:{restoration_pool:1,stamina_potion_4_unnoted:10}},{key:"rejuvenation_pool",name:"Rejuvenation pool",minLvl:80,exp:900,materials:{revitalisation_pool:1,prayer_potion_4_unnoted:10}},{key:"fancy_rejuvenation_pool",name:"Fancy rejuvenation pool",minLvl:85,exp:1950,materials:{rejuvenation_pool:1,super_restore_4_unnoted:10,marble_block:2}},{key:"ornate_rejuvenation_pool",name:"Ornate rejuvenation pool",minLvl:90,exp:3107,materials:{fancy_rejuvenation_pool:1,anti_venom_4_unnoted:10,gold_leaf:5,blood_rune:1e3}},{key:"spirit_tree",name:"Spirit tree",minLvl:75,exp:350,materials:{spirit_sapling:1}},{key:"obelisk",name:"Obelisk",minLvl:80,exp:3e3,materials:{ancient_crystal:4,marble_block:4}},{key:"fairy_ring",name:"Fairy ring",minLvl:85,exp:535,materials:{mushroom:10,fairy_enchantment:1}},{key:"spirit_tree_fairy_ring",name:"Spirit tree & Fairy ring",minLvl:95,exp:885,materials:{spirit_sapling:1,mushroom:10,fairy_enchantment:1}},{key:"zen_theme",name:"Zen theme",minLvl:65,exp:474,materials:{bucket_of_sand:6,pink_dye:1,bagged_nice_tree:1}},{key:"otherworldly_theme",name:"Otherworldly theme",minLvl:75,exp:316,materials:{supercompost:8,blue_dye:1,mushroom:4,magic_secateurs:1}},{key:"volcanic_theme",name:"Volcanic theme",minLvl:85,exp:4464,materials:{granite_5kg:2,onyx:6,fire_rune:1e3,lava_rune:2e3}},{key:"topiary_bush",name:"Topiary bush",minLvl:65,exp:141,materials:{topiary_hedge_bagged:6}},{key:"teak_garden_bench",name:"Teak garden bench",minLvl:66,exp:540,materials:{teak_planks:6}},{key:"gnome_bench",name:"Gnome bench",minLvl:77,exp:840,materials:{mahogany_planks:6}},{key:"marble_decorative_bench",name:"Marble decorative bench",minLvl:88,exp:3e3,materials:{marble_block:6}},{key:"obsidian_decorative_bench",name:"Obsidian decorative bench",minLvl:98,exp:2331,materials:{marble_block:3,onyx:1,fire_rune:250,lava_rune:500}},{key:"mahogany_adventure_log",name:"Mahogany adventure log",minLvl:83,exp:504,materials:{mahogany_plank:3,papyrus:2,enchanted_gem:1}},{key:"gilded_adventure_log",name:"Gilded adventure log",minLvl:88,exp:1100,materials:{mahogany_plank:3,gold_leaf:2,enchanted_gem:1}},{key:"marble_adventure_log",name:"Marble adventure log",minLvl:93,exp:1160,materials:{marble_block:2,limestone_brick:4,enchanted_gem:1}},{key:"ancient_altar",name:"Ancient altar",minLvl:80,exp:1490,materials:{limestone_brick:10,magic_stone:1,ancient_signet:1,pharaohs_sceptre:1}},{key:"lunar_altar",name:"Lunar altar",minLvl:80,exp:1957,materials:{limestone_brick:10,magic_stone:1,lunar_signet:1,astral_rune:1e4}},{key:"dark_altar",name:"Dark altar",minLvl:80,exp:3888,materials:{limestone_brick:10,magic_stone:1,arceuus_signet:1,blood_rune:5e3,soul_rune:5e3}},{key:"occult_altar",name:"Occult altar",minLvl:90,exp:3445,materials:{Materials_for_the_other_two_altars_the_player_hasnt_built_excluding_the_magic_stone_and_limestone_bricks:0}},{key:"boss_lair_display",name:"Boss lair display",minLvl:87,exp:1483,materials:{steel_bar:4,molten_glass:5,mahogany_plank:10}},{key:"mounted_emblem",name:"Mounted emblem",minLvl:80,exp:5300,materials:{marble_block:1,gold_leaf:1,decorative_emblem:1}},{key:"mounted_coins",name:"Mounted coins",minLvl:80,exp:800,materials:{marble_block:1,gold_leaf:1,coins:1e8}},{key:"cape_hanger",name:"Cape hanger",minLvl:80,exp:800,materials:{marble_block:1,gold_leaf:1}},{key:"basic_jewellery_box",name:"Basic jewellery box",minLvl:81,exp:605,materials:{bolt_of_cloth:1,steel_bar:1,games_necklace_8:3,ring_of_dueling_8:3}},{key:"fancy_jewellery_box",name:"Fancy jewellery box",minLvl:86,exp:1350,materials:{basic_jewellery_box:1,gold_leaf:1,skills_necklace_4:5,combat_bracelet_4:5}},{key:"ornate_jewellery_box",name:"Ornate jewellery box",minLvl:91,exp:2680,materials:{fancy_jewellery_box:1,gold_leaf:2,amulet_of_glory_4:8,ring_of_wealth_5:8}},{key:"quest_list",name:"Quest list",minLvl:80,exp:310,materials:{papyrus:10,gold_leaf:1}},{key:"wooden_bed",name:"Wooden bed",minLvl:20,exp:117,materials:{plank:3,nails:3,bolt_of_cloth:2}},{key:"oak_bed",name:"Oak bed",minLvl:30,exp:210,materials:{oak_plank:3,bolt_of_cloth:2}},{key:"large_oak_bed",name:"Large oak bed",minLvl:34,exp:330,materials:{oak_plank:5,bolt_of_cloth:2}},{key:"teak_bed",name:"Teak bed",minLvl:40,exp:300,materials:{teak_plank:3,bolt_of_cloth:2}},{key:"large_teak_bed",name:"Large teak bed",minLvl:45,exp:480,materials:{teak_plank:5,bolt_of_cloth:2}},{key:"4_poster",name:"4-poster",minLvl:53,exp:450,materials:{mahogany_plank:3,bolt_of_cloth:2}},{key:"gilded_4_poster",name:"Gilded 4-poster",minLvl:60,exp:1330,materials:{mahogany_plank:5,bolt_of_cloth:2,gold_leaf:2}},{key:"oak_clock",name:"Oak clock",minLvl:25,exp:142,materials:{oak_plank:2,clockwork:1}},{key:"teak_clock",name:"Teak clock",minLvl:55,exp:202,materials:{teak_plank:2,clockwork:1}},{key:"servants_money_bag",name:"Servants Money Bag",minLvl:58,exp:595,materials:{mahogany_plank:2,bolt_of_cloth:1,gold_leaf:1}},{key:"gilded_clock",name:"Gilded clock",minLvl:85,exp:602,materials:{mahogany_plank:2,clockwork:1,gold_leaf:1}}],ct=new Map;for(const n of dt){if(ct.has(n.key))throw new Error(`Duplicate furniture type ${n.key}`);ct.set(n.key,n)}const ft=n=>{if(!n)return null;const e=ct.get(n);return e||{key:n,name:n.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),minLvl:1,exp:0,materials:{}}},yo=(n,e)=>{if(!n)return null;const o=n.hotspots.map(t=>{if(!t)return"";const l=dt.indexOf(t);return l!==-1?l:"id"in t?`k:${t.id}`:`k:${t.key}`}).join("-");return`${e}-${je.indexOf(n.type)}-${n.orientation}-${o}`},Oe=n=>{const e=new URLSearchParams;e.set("n",n.name);for(const o of n.floors){const t=o.rooms.flat().map(yo).filter(l=>!!l).join(".");e.set(`f${o.num}`,t)}return e},wo=(n,e)=>{const o=e.split("-"),t=Number(o[0]),l=t%Ee,i=Math.floor(t/Ee),a=je[Number(o[1])];if(!a)throw new Error(`Unknown room type ${o[1]}`);const u=Number(o[2]),s=[];for(let r=0;r<a.hotspots.length;r++){const c=o[r+3];if(!c)s[r]=null;else if(c.startsWith("k:")){const _=c.substring(2);s[r]=ft(_)}else s[r]=dt[Number(c)]||null}return{floor:n,x:l,y:i,type:a,orientation:u,hotspots:s}},ro=n=>{const e=n.get("n")||void 0,o=io(e);for(const t of n.keys()){if(!t.startsWith("f"))continue;const l=Number(t.substring(1)),i=o.floors.find(u=>u.num===l);if(!i)throw new Error(`Unknown floor ${l}`);const a=n.get(t);if(a){const u=a.split(".");for(const s of u){const r=wo(i,s);i.rooms[r.y][r.x]=r}}}return o};function Et(n,e,o){const t=n.slice();return t[1]=e[o],t}function Eo(n){let e,o;return{c(){e=v("div"),o=V("Your house looks good to go!"),this.h()},l(t){e=b(t,"DIV",{class:!0});var l=k(e);o=q(l,"Your house looks good to go!"),l.forEach(f),this.h()},h(){w(e,"class","alert success svelte-159br2x")},m(t,l){W(t,e,l),d(e,o)},p:J,d(t){t&&f(e)}}}function To(n){let e,o=n[0],t=[];for(let l=0;l<o.length;l+=1)t[l]=Tt(Et(n,o,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=se()},l(l){for(let i=0;i<t.length;i+=1)t[i].l(l);e=se()},m(l,i){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,i);W(l,e,i)},p(l,i){if(i&1){o=l[0];let a;for(a=0;a<o.length;a+=1){const u=Et(l,o,a);t[a]?t[a].p(u,i):(t[a]=Tt(u),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=o.length}},d(l){_e(t,l),l&&f(e)}}}function Tt(n){let e,o=n[1]+"",t;return{c(){e=v("div"),t=V(o),this.h()},l(l){e=b(l,"DIV",{class:!0});var i=k(e);t=q(i,o),i.forEach(f),this.h()},h(){w(e,"class","alert error svelte-159br2x")},m(l,i){W(l,e,i),d(e,t)},p(l,i){i&1&&o!==(o=l[1]+"")&&U(t,o)},d(l){l&&f(e)}}}function Lo(n){let e;function o(i,a){return i[0].length>0?To:Eo}let t=o(n),l=t(n);return{c(){l.c(),e=se()},l(i){l.l(i),e=se()},m(i,a){l.m(i,a),W(i,e,a)},p(i,[a]){t===(t=o(i))&&l?l.p(i,a):(l.d(1),l=t(i),l&&(l.c(),l.m(e.parentNode,e)))},i:J,o:J,d(i){l.d(i),i&&f(e)}}}function So(n,e,o){let{errors:t}=e;return n.$$set=l=>{"errors"in l&&o(0,t=l.errors)},[t]}class Do extends he{constructor(e){super(),ge(this,e,So,Lo,ce,{errors:0})}}function Lt(n,e,o){const t=n.slice();return t[10]=e[o],t}function St(n){let e,o,t=n[10]+"",l,i,a,u,s,r,c,_,h,m,g,N,D;function L(){return n[7](n[10])}function p(){return n[8](n[10])}return{c(){e=v("div"),o=v("div"),l=V(t),i=M(),a=v("div"),u=v("button"),s=v("i"),c=M(),_=v("div"),h=v("button"),m=v("i"),g=M(),this.h()},l(y){e=b(y,"DIV",{class:!0});var I=k(e);o=b(I,"DIV",{class:!0});var E=k(o);l=q(E,t),E.forEach(f),i=P(I),a=b(I,"DIV",{class:!0});var S=k(a);u=b(S,"BUTTON",{});var R=k(u);s=b(R,"I",{class:!0}),k(s).forEach(f),R.forEach(f),S.forEach(f),c=P(I),_=b(I,"DIV",{class:!0});var O=k(_);h=b(O,"BUTTON",{});var C=k(h);m=b(C,"I",{class:!0}),k(m).forEach(f),C.forEach(f),O.forEach(f),g=P(I),I.forEach(f),this.h()},h(){w(o,"class","name svelte-1ueo926"),w(s,"class","icofont-folder-open"),u.disabled=r=n[10]===n[0].name,w(a,"class","svelte-1ueo926"),w(m,"class","icofont-ui-delete"),w(_,"class","svelte-1ueo926"),w(e,"class","svelte-1ueo926"),Q(e,"current",n[10]===n[0].name)},m(y,I){W(y,e,I),d(e,o),d(o,l),d(e,i),d(e,a),d(a,u),d(u,s),d(e,c),d(e,_),d(_,h),d(h,m),d(e,g),N||(D=[K(u,"click",L),K(h,"click",p)],N=!0)},p(y,I){n=y,I&2&&t!==(t=n[10]+"")&&U(l,t),I&3&&r!==(r=n[10]===n[0].name)&&(u.disabled=r),I&3&&Q(e,"current",n[10]===n[0].name)},d(y){y&&f(e),N=!1,Te(D)}}}function Ro(n){let e,o,t,l,i,a,u,s,r,c,_,h,m,g,N,D,L,p,y,I,E,S=n[1],R=[];for(let O=0;O<S.length;O+=1)R[O]=St(Lt(n,S,O));return{c(){e=v("h2"),o=V("Getting started"),t=M(),l=v("ul"),i=v("li"),a=V("Click a cell to the left to place a new room"),u=M(),s=v("h2"),r=V("Saved houses"),c=M(),_=v("div"),h=v("div"),m=v("div"),g=v("input"),N=M(),D=v("div"),L=v("button"),p=v("i"),y=M();for(let O=0;O<R.length;O+=1)R[O].c();this.h()},l(O){e=b(O,"H2",{class:!0});var C=k(e);o=q(C,"Getting started"),C.forEach(f),t=P(O),l=b(O,"UL",{class:!0});var T=k(l);i=b(T,"LI",{});var F=k(i);a=q(F,"Click a cell to the left to place a new room"),F.forEach(f),T.forEach(f),u=P(O),s=b(O,"H2",{class:!0});var z=k(s);r=q(z,"Saved houses"),z.forEach(f),c=P(O),_=b(O,"DIV",{class:!0});var A=k(_);h=b(A,"DIV",{class:!0});var Y=k(h);m=b(Y,"DIV",{class:!0});var ne=k(m);g=b(ne,"INPUT",{type:!0}),ne.forEach(f),N=P(Y),D=b(Y,"DIV",{class:!0});var le=k(D);L=b(le,"BUTTON",{});var ie=k(L);p=b(ie,"I",{class:!0}),k(p).forEach(f),ie.forEach(f),le.forEach(f),Y.forEach(f),y=P(A);for(let te=0;te<R.length;te+=1)R[te].l(A);A.forEach(f),this.h()},h(){w(e,"class","svelte-1ueo926"),w(l,"class","svelte-1ueo926"),w(s,"class","svelte-1ueo926"),w(g,"type","text"),w(m,"class","name svelte-1ueo926"),w(p,"class","icofont-save"),w(D,"class","svelte-1ueo926"),w(h,"class","svelte-1ueo926"),w(_,"class","houses-list svelte-1ueo926")},m(O,C){W(O,e,C),d(e,o),W(O,t,C),W(O,l,C),d(l,i),d(i,a),W(O,u,C),W(O,s,C),d(s,r),W(O,c,C),W(O,_,C),d(_,h),d(h,m),d(m,g),yt(g,n[0].name),d(h,N),d(h,D),d(D,L),d(L,p),d(_,y);for(let T=0;T<R.length;T+=1)R[T]&&R[T].m(_,null);I||(E=[K(g,"input",n[5]),K(L,"click",n[6])],I=!0)},p(O,[C]){if(C&1&&g.value!==O[0].name&&yt(g,O[0].name),C&27){S=O[1];let T;for(T=0;T<S.length;T+=1){const F=Lt(O,S,T);R[T]?R[T].p(F,C):(R[T]=St(F),R[T].c(),R[T].m(_,null))}for(;T<R.length;T+=1)R[T].d(1);R.length=S.length}},i:J,o:J,d(O){O&&f(e),O&&f(t),O&&f(l),O&&f(u),O&&f(s),O&&f(c),O&&f(_),_e(R,O),I=!1,Te(E)}}}function Io(n,e,o){let{house:t}=e,l=[];const i=Ze();_t(()=>{const m=localStorage.getItem("houses");m&&o(1,l=JSON.parse(m))});const a=m=>{o(1,l=l.includes(m.name)?l:[...l,m.name]);const g=Oe(m).toString();localStorage.setItem(`house-${m.name}`,g),localStorage.setItem("houses",JSON.stringify(l)),i("save",{house:m})},u=m=>{const g=localStorage.getItem(`house-${m}`);if(g){const N=ro(new URLSearchParams(g));i("open",{house:N})}},s=m=>{o(1,l=l.filter(g=>g!==m)),localStorage.removeItem(`house-${m}`),localStorage.setItem("houses",JSON.stringify(l))};function r(){t.name=this.value,o(0,t)}const c=()=>a(t),_=m=>u(m),h=m=>s(m);return n.$$set=m=>{"house"in m&&o(0,t=m.house)},[t,l,a,u,s,r,c,_,h]}class Oo extends he{constructor(e){super(),ge(this,e,Io,Ro,ce,{house:0})}}function Dt(n,e,o){const t=n.slice();return t[2]=e[o],t}function Rt(n){let e,o,t=n[2].name+"",l,i,a,u=n[2].value+"",s,r,c,_=n[2].limit+"",h,m,g,N=n[2].level+"",D,L;return{c(){e=v("tr"),o=v("td"),l=V(t),i=M(),a=v("td"),s=V(u),r=M(),c=v("td"),h=V(_),m=M(),g=v("td"),D=V(N),L=M(),this.h()},l(p){e=b(p,"TR",{});var y=k(e);o=b(y,"TD",{});var I=k(o);l=q(I,t),I.forEach(f),i=P(y),a=b(y,"TD",{});var E=k(a);s=q(E,u),E.forEach(f),r=P(y),c=b(y,"TD",{});var S=k(c);h=q(S,_),S.forEach(f),m=P(y),g=b(y,"TD",{});var R=k(g);D=q(R,N),R.forEach(f),L=P(y),y.forEach(f),this.h()},h(){Q(e,"max",n[2].level===n[1])},m(p,y){W(p,e,y),d(e,o),d(o,l),d(e,i),d(e,a),d(a,s),d(e,r),d(e,c),d(c,h),d(e,m),d(e,g),d(g,D),d(e,L)},p(p,y){y&1&&t!==(t=p[2].name+"")&&U(l,t),y&1&&u!==(u=p[2].value+"")&&U(s,u),y&1&&_!==(_=p[2].limit+"")&&U(h,_),y&1&&N!==(N=p[2].level+"")&&U(D,N),y&3&&Q(e,"max",p[2].level===p[1])},d(p){p&&f(e)}}}function Co(n){let e,o,t,l,i,a,u,s,r,c,_,h,m,g,N,D,L=n[0],p=[];for(let y=0;y<L.length;y+=1)p[y]=Rt(Dt(n,L,y));return{c(){e=v("table"),o=v("thead"),t=v("tr"),l=v("th"),i=V("Requirement"),a=M(),u=v("th"),s=V("Current"),r=M(),c=v("th"),_=V("Limit"),h=M(),m=v("th"),g=V("Min. Level"),N=M(),D=v("tbody");for(let y=0;y<p.length;y+=1)p[y].c();this.h()},l(y){e=b(y,"TABLE",{class:!0});var I=k(e);o=b(I,"THEAD",{});var E=k(o);t=b(E,"TR",{});var S=k(t);l=b(S,"TH",{});var R=k(l);i=q(R,"Requirement"),R.forEach(f),a=P(S),u=b(S,"TH",{});var O=k(u);s=q(O,"Current"),O.forEach(f),r=P(S),c=b(S,"TH",{});var C=k(c);_=q(C,"Limit"),C.forEach(f),h=P(S),m=b(S,"TH",{});var T=k(m);g=q(T,"Min. Level"),T.forEach(f),S.forEach(f),E.forEach(f),N=P(I),D=b(I,"TBODY",{});var F=k(D);for(let z=0;z<p.length;z+=1)p[z].l(F);F.forEach(f),I.forEach(f),this.h()},h(){w(e,"class","svelte-fdv1qg")},m(y,I){W(y,e,I),d(e,o),d(o,t),d(t,l),d(l,i),d(t,a),d(t,u),d(u,s),d(t,r),d(t,c),d(c,_),d(t,h),d(t,m),d(m,g),d(e,N),d(e,D);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(D,null)},p(y,[I]){if(I&3){L=y[0];let E;for(E=0;E<L.length;E+=1){const S=Dt(y,L,E);p[E]?p[E].p(S,I):(p[E]=Rt(S),p[E].c(),p[E].m(D,null))}for(;E<p.length;E+=1)p[E].d(1);p.length=L.length}},i:J,o:J,d(y){y&&f(e),_e(p,y)}}}function Bo(n,e,o){let t,{requirements:l}=e;return n.$$set=i=>{"requirements"in i&&o(0,l=i.requirements)},n.$$.update=()=>{var i;n.$$.dirty&1&&o(1,t=(i=l[0])==null?void 0:i.level)},[l,t]}class No extends he{constructor(e){super(),ge(this,e,Bo,Co,ce,{requirements:0})}}function It(n,e,o){const t=n.slice();return t[2]=e[o].type,t[0]=e[o].rooms,t}function Ot(n){let e,o,t=n[2].name+"",l,i,a,u=n[2].minLvl+"",s,r,c,_=n[2].cost+"",h,m,g,N=(n[0].length||"-")+"",D,L,p,y=(n[0].length>0?n[0].length*n[2].cost:"-")+"",I,E;return{c(){e=v("tr"),o=v("td"),l=V(t),i=M(),a=v("td"),s=V(u),r=M(),c=v("td"),h=V(_),m=M(),g=v("td"),D=V(N),L=M(),p=v("td"),I=V(y),E=M(),this.h()},l(S){e=b(S,"TR",{});var R=k(e);o=b(R,"TD",{});var O=k(o);l=q(O,t),O.forEach(f),i=P(R),a=b(R,"TD",{class:!0});var C=k(a);s=q(C,u),C.forEach(f),r=P(R),c=b(R,"TD",{class:!0});var T=k(c);h=q(T,_),T.forEach(f),m=P(R),g=b(R,"TD",{class:!0});var F=k(g);D=q(F,N),F.forEach(f),L=P(R),p=b(R,"TD",{class:!0});var z=k(p);I=q(z,y),z.forEach(f),E=P(R),R.forEach(f),this.h()},h(){w(a,"class","right"),w(c,"class","right"),w(g,"class","right"),w(p,"class","right")},m(S,R){W(S,e,R),d(e,o),d(o,l),d(e,i),d(e,a),d(a,s),d(e,r),d(e,c),d(c,h),d(e,m),d(e,g),d(g,D),d(e,L),d(e,p),d(p,I),d(e,E)},p(S,R){R&2&&t!==(t=S[2].name+"")&&U(l,t),R&2&&u!==(u=S[2].minLvl+"")&&U(s,u),R&2&&_!==(_=S[2].cost+"")&&U(h,_),R&2&&N!==(N=(S[0].length||"-")+"")&&U(D,N),R&2&&y!==(y=(S[0].length>0?S[0].length*S[2].cost:"-")+"")&&U(I,y)},d(S){S&&f(e)}}}function Mo(n){let e,o,t,l,i,a,u,s,r,c,_,h,m,g,N,D,L,p,y,I,E=n[1],S=[];for(let R=0;R<E.length;R+=1)S[R]=Ot(It(n,E,R));return{c(){e=v("div"),o=v("table"),t=v("thead"),l=v("tr"),i=v("th"),a=V("Type"),u=M(),s=v("th"),r=V("Level"),c=M(),_=v("th"),h=V("Cost"),m=M(),g=v("th"),N=V("Amount"),D=M(),L=v("th"),p=V("Total"),y=M(),I=v("tbody");for(let R=0;R<S.length;R+=1)S[R].c();this.h()},l(R){e=b(R,"DIV",{class:!0});var O=k(e);o=b(O,"TABLE",{class:!0});var C=k(o);t=b(C,"THEAD",{});var T=k(t);l=b(T,"TR",{});var F=k(l);i=b(F,"TH",{});var z=k(i);a=q(z,"Type"),z.forEach(f),u=P(F),s=b(F,"TH",{class:!0});var A=k(s);r=q(A,"Level"),A.forEach(f),c=P(F),_=b(F,"TH",{class:!0});var Y=k(_);h=q(Y,"Cost"),Y.forEach(f),m=P(F),g=b(F,"TH",{class:!0});var ne=k(g);N=q(ne,"Amount"),ne.forEach(f),D=P(F),L=b(F,"TH",{class:!0});var le=k(L);p=q(le,"Total"),le.forEach(f),F.forEach(f),T.forEach(f),y=P(C),I=b(C,"TBODY",{});var ie=k(I);for(let te=0;te<S.length;te+=1)S[te].l(ie);ie.forEach(f),C.forEach(f),O.forEach(f),this.h()},h(){w(s,"class","right"),w(_,"class","right"),w(g,"class","right"),w(L,"class","right"),w(o,"class","svelte-fdv1qg"),w(e,"class","scrollable-tab-content")},m(R,O){W(R,e,O),d(e,o),d(o,t),d(t,l),d(l,i),d(i,a),d(l,u),d(l,s),d(s,r),d(l,c),d(l,_),d(_,h),d(l,m),d(l,g),d(g,N),d(l,D),d(l,L),d(L,p),d(o,y),d(o,I);for(let C=0;C<S.length;C+=1)S[C]&&S[C].m(I,null)},p(R,[O]){if(O&2){E=R[1];let C;for(C=0;C<E.length;C+=1){const T=It(R,E,C);S[C]?S[C].p(T,O):(S[C]=Ot(T),S[C].c(),S[C].m(I,null))}for(;C<S.length;C+=1)S[C].d(1);S.length=E.length}},i:J,o:J,d(R){R&&f(e),_e(S,R)}}}function Po(n,e,o){let t,{rooms:l}=e;return n.$$set=i=>{"rooms"in i&&o(0,l=i.rooms)},n.$$.update=()=>{n.$$.dirty&1&&o(1,t=je.map(i=>({type:i,rooms:l.filter(a=>(a==null?void 0:a.type.key)===i.key)})).sort((i,a)=>a.rooms.length-i.rooms.length))},[l,t]}class Wo extends he{constructor(e){super(),ge(this,e,Po,Mo,ce,{rooms:0})}}function Qe(n,{delay:e=0,duration:o=400,easing:t=co}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:o,easing:t,css:i=>`opacity: ${i*l}`}}const Fo=n=>({tab:n&4}),Ct=n=>({tab:n[2]});function Bt(n,e,o){const t=n.slice();return t[6]=e[o],t}function Nt(n){let e,o=n[6]+"",t,l,i,a;function u(){return n[5](n[6])}return{c(){e=v("button"),t=V(o),l=M(),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var r=k(e);t=q(r,o),l=P(r),r.forEach(f),this.h()},h(){w(e,"class","svelte-1melpyn"),Q(e,"active",n[2]===n[6])},m(s,r){W(s,e,r),d(e,t),d(e,l),i||(a=K(e,"click",u),i=!0)},p(s,r){n=s,r&1&&o!==(o=n[6]+"")&&U(t,o),r&5&&Q(e,"active",n[2]===n[6])},d(s){s&&f(e),i=!1,a()}}}function Mt(n){let e,o,t;const l=n[4].default,i=_o(l,n,n[3],Ct);return{c(){e=v("div"),i&&i.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var u=k(e);i&&i.l(u),u.forEach(f),this.h()},h(){w(e,"class","tab svelte-1melpyn")},m(a,u){W(a,e,u),i&&i.m(e,null),t=!0},p(a,u){i&&i.p&&(!t||u&12)&&uo(i,l,a,a[3],t?fo(l,a[3],u,Fo):mo(a[3]),Ct)},i(a){t||(G(i,a),a&&ut(()=>{t&&(o||(o=Ye(e,Qe,{},!0)),o.run(1))}),t=!0)},o(a){H(i,a),a&&(o||(o=Ye(e,Qe,{},!1)),o.run(0)),t=!1},d(a){a&&f(e),i&&i.d(a),a&&o&&o.end()}}}function Vo(n){let e,o,t,l,i=n[2],a,u=n[0],s=[];for(let c=0;c<u.length;c+=1)s[c]=Nt(Bt(n,u,c));let r=Mt(n);return{c(){e=v("div"),o=v("div");for(let c=0;c<s.length;c+=1)s[c].c();t=M(),l=v("div"),r.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var _=k(e);o=b(_,"DIV",{class:!0});var h=k(o);for(let g=0;g<s.length;g+=1)s[g].l(h);h.forEach(f),t=P(_),l=b(_,"DIV",{class:!0});var m=k(l);r.l(m),m.forEach(f),_.forEach(f),this.h()},h(){w(o,"class","navigation"),w(l,"class","content svelte-1melpyn"),w(e,"class","container svelte-1melpyn"),Q(e,"inverted",n[1])},m(c,_){W(c,e,_),d(e,o);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(o,null);d(e,t),d(e,l),r.m(l,null),a=!0},p(c,[_]){if(_&5){u=c[0];let h;for(h=0;h<u.length;h+=1){const m=Bt(c,u,h);s[h]?s[h].p(m,_):(s[h]=Nt(m),s[h].c(),s[h].m(o,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=u.length}_&4&&ce(i,i=c[2])?(de(),H(r,1,1,J),fe(),r=Mt(c),r.c(),G(r,1),r.m(l,null)):r.p(c,_),(!a||_&2)&&Q(e,"inverted",c[1])},i(c){a||(G(r),a=!0)},o(c){H(r),a=!1},d(c){c&&f(e),_e(s,c),r.d(c)}}}function qo(n,e,o){let{$$slots:t={},$$scope:l}=e,{tabs:i}=e,{inverted:a=!1}=e,u=i[0];const s=r=>o(2,u=r);return n.$$set=r=>{"tabs"in r&&o(0,i=r.tabs),"inverted"in r&&o(1,a=r.inverted),"$$scope"in r&&o(3,l=r.$$scope)},[i,a,u,l,t,s]}class so extends he{constructor(e){super(),ge(this,e,qo,Vo,ce,{tabs:0,inverted:1})}}function Pt(n,e,o){const t=n.slice();return t[8]=e[o],t}function jo(n){let e,o=n[1]&&Wt(n);return{c(){e=v("div"),o&&o.c(),this.h()},l(t){e=b(t,"DIV",{class:!0});var l=k(e);o&&o.l(l),l.forEach(f),this.h()},h(){w(e,"class","content svelte-qe21v1"),Q(e,"below",!!n[1]),Q(e,"supported",n[1]&&!n[1].type.open)},m(t,l){W(t,e,l),o&&o.m(e,null)},p(t,l){t[1]?o?o.p(t,l):(o=Wt(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),l&2&&Q(e,"below",!!t[1]),l&2&&Q(e,"supported",t[1]&&!t[1].type.open)},d(t){t&&f(e),o&&o.d()}}}function Ao(n){let e,o,t,l,i=n[0].type.name+"",a,u,s,r=n[5],c=[];for(let _=0;_<r.length;_+=1)c[_]=Ft(Pt(n,r,_));return{c(){e=v("div"),o=M(),t=v("div"),l=v("div"),a=V(i),u=M();for(let _=0;_<c.length;_+=1)c[_].c();s=se(),this.h()},l(_){e=b(_,"DIV",{class:!0}),k(e).forEach(f),o=P(_),t=b(_,"DIV",{class:!0});var h=k(t);l=b(h,"DIV",{class:!0});var m=k(l);a=q(m,i),m.forEach(f),h.forEach(f),u=P(_);for(let g=0;g<c.length;g+=1)c[g].l(_);s=se(),this.h()},h(){w(e,"class","marker svelte-qe21v1"),x(e,"background-color",n[0].type.color),w(l,"class","title svelte-qe21v1"),w(t,"class","content svelte-qe21v1"),x(t,"color",n[0].type.color),x(t,"background-color",n[0].type.bg)},m(_,h){W(_,e,h),W(_,o,h),W(_,t,h),d(t,l),d(l,a),W(_,u,h);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(_,h);W(_,s,h)},p(_,h){if(h&1&&x(e,"background-color",_[0].type.color),h&1&&i!==(i=_[0].type.name+"")&&U(a,i),h&1&&x(t,"color",_[0].type.color),h&1&&x(t,"background-color",_[0].type.bg),h&36){r=_[5];let m;for(m=0;m<r.length;m+=1){const g=Pt(_,r,m);c[m]?c[m].p(g,h):(c[m]=Ft(g),c[m].c(),c[m].m(s.parentNode,s))}for(;m<c.length;m+=1)c[m].d(1);c.length=r.length}},d(_){_&&f(e),_&&f(o),_&&f(t),_&&f(u),_e(c,_),_&&f(s)}}}function Wt(n){let e,o=n[1].type.name+"",t;return{c(){e=v("div"),t=V(o),this.h()},l(l){e=b(l,"DIV",{class:!0});var i=k(e);t=q(i,o),i.forEach(f),this.h()},h(){w(e,"class","title svelte-qe21v1")},m(l,i){W(l,e,i),d(e,t)},p(l,i){i&2&&o!==(o=l[1].type.name+"")&&U(t,o)},d(l){l&&f(e)}}}function Ft(n){let e,o;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),k(e).forEach(f),this.h()},h(){w(e,"class",o="door "+at(n[8])+" svelte-qe21v1"),Q(e,"connected",n[2].includes(n[8]))},m(t,l){W(t,e,l)},p(t,l){l&32&&o!==(o="door "+at(t[8])+" svelte-qe21v1")&&w(e,"class",o),l&36&&Q(e,"connected",t[2].includes(t[8]))},d(t){t&&f(e)}}}function Vt(n){let e;return{c(){e=v("div"),this.h()},l(o){e=b(o,"DIV",{class:!0}),k(e).forEach(f),this.h()},h(){w(e,"class","selected svelte-qe21v1")},m(o,t){W(o,e,t)},d(o){o&&f(e)}}}function Go(n){let e,o,t,l,i;function a(c,_){return c[0]?Ao:jo}let u=a(n),s=u(n),r=n[3]&&Vt();return{c(){e=v("div"),s.c(),o=M(),r&&r.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var _=k(e);s.l(_),o=P(_),r&&r.l(_),_.forEach(f),this.h()},h(){w(e,"class",t="cell "+n[4]+" svelte-qe21v1")},m(c,_){W(c,e,_),s.m(e,null),d(e,o),r&&r.m(e,null),l||(i=[K(e,"click",Re(n[6])),K(e,"keypress",Re(n[6]))],l=!0)},p(c,[_]){u===(u=a(c))&&s?s.p(c,_):(s.d(1),s=u(c),s&&(s.c(),s.m(e,o))),c[3]?r||(r=Vt(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),_&16&&t!==(t="cell "+c[4]+" svelte-qe21v1")&&w(e,"class",t)},i:J,o:J,d(c){c&&f(e),s.d(),r&&r.d(),l=!1,Te(i)}}}function Ho(n,e,o){let t,l,{room:i}=e,{below:a}=e,{connections:u}=e,{selected:s}=e;const r=Ze(),c=()=>r("selected");return n.$$set=_=>{"room"in _&&o(0,i=_.room),"below"in _&&o(1,a=_.below),"connections"in _&&o(2,u=_.connections),"selected"in _&&o(3,s=_.selected)},n.$$.update=()=>{n.$$.dirty&1&&o(5,t=rt(i)),n.$$.dirty&1&&o(4,l=i?at(i.orientation):"")},[i,a,u,s,l,t,c]}class Uo extends he{constructor(e){super(),ge(this,e,Ho,Go,ce,{room:0,below:1,connections:2,selected:3})}}function qt(n,e,o){const t=n.slice();return t[23]=e[o],t[25]=o,t}function Yo(n){const e=n.slice(),o=e[7](e[0]);return e[23]=o,e}function zo(n){let e;return{c(){e=V("None")},l(o){e=q(o,"None")},m(o,t){W(o,e,t)},p:J,d(o){o&&f(e)}}}function jt(n){let e,o,t,l,i=(ee(n[23])?n[23].name:n[23])+"",a;function u(c,_){if(_&1&&(e=null),_&1&&(o=null),e==null&&(e=!!(ee(c[23])&&c[23].img)),e)return Jo;if(o==null&&(o=!!(ee(c[23])&&c[23].icon)),o)return Xo}let s=u(n,-1),r=s&&s(n);return{c(){r&&r.c(),t=M(),l=v("span"),a=V(i),this.h()},l(c){r&&r.l(c),t=P(c),l=b(c,"SPAN",{class:!0});var _=k(l);a=q(_,i),_.forEach(f),this.h()},h(){w(l,"class","option-name svelte-1wgdizi")},m(c,_){r&&r.m(c,_),W(c,t,_),W(c,l,_),d(l,a)},p(c,_){s===(s=u(c,_))&&r?r.p(c,_):(r&&r.d(1),r=s&&s(c),r&&(r.c(),r.m(t.parentNode,t))),_&1&&i!==(i=(ee(c[23])?c[23].name:c[23])+"")&&U(a,i)},d(c){r&&r.d(c),c&&f(t),c&&f(l)}}}function Xo(n){let e,o;return{c(){e=v("i"),this.h()},l(t){e=b(t,"I",{class:!0}),k(e).forEach(f),this.h()},h(){w(e,"class",o=ze(n[23].icon)+" svelte-1wgdizi")},m(t,l){W(t,e,l)},p(t,l){l&1&&o!==(o=ze(t[23].icon)+" svelte-1wgdizi")&&w(e,"class",o)},d(t){t&&f(e)}}}function Jo(n){let e,o,t;return{c(){e=v("img"),this.h()},l(l){e=b(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Xe(e.src,o=n[23].img)||w(e,"src",o),w(e,"alt",t=n[23].name),w(e,"class","option-icon svelte-1wgdizi")},m(l,i){W(l,e,i)},p(l,i){i&1&&!Xe(e.src,o=l[23].img)&&w(e,"src",o),i&1&&t!==(t=l[23].name)&&w(e,"alt",t)},d(l){l&&f(e)}}}function At(n){let e,o,t,l,i,a,u,s,r=n[5],c=[];for(let _=0;_<r.length;_+=1)c[_]=Gt(qt(n,r,_));return{c(){e=v("div"),o=v("div"),t=v("span"),l=V("None"),a=M();for(let _=0;_<c.length;_+=1)c[_].c();this.h()},l(_){e=b(_,"DIV",{class:!0,role:!0});var h=k(e);o=b(h,"DIV",{class:!0,tabindex:!0,role:!0,"aria-selected":!0});var m=k(o);t=b(m,"SPAN",{class:!0});var g=k(t);l=q(g,"None"),g.forEach(f),m.forEach(f),a=P(h);for(let N=0;N<c.length;N+=1)c[N].l(h);h.forEach(f),this.h()},h(){w(t,"class","option-name svelte-1wgdizi"),w(o,"class","dropdown-item svelte-1wgdizi"),w(o,"tabindex","0"),w(o,"role","option"),w(o,"aria-selected",i=!n[0]),Q(o,"focused",n[4]===-1),w(e,"class","dropdown-menu svelte-1wgdizi"),w(e,"role","listbox"),Q(e,"upward",n[6])},m(_,h){W(_,e,h),d(e,o),d(o,t),d(t,l),d(e,a);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(e,null);u||(s=[K(o,"click",n[16]),K(o,"keydown",n[17])],u=!0)},p(_,h){if(h&1&&i!==(i=!_[0])&&w(o,"aria-selected",i),h&16&&Q(o,"focused",_[4]===-1),h&1585){r=_[5];let m;for(m=0;m<r.length;m+=1){const g=qt(_,r,m);c[m]?c[m].p(g,h):(c[m]=Gt(g),c[m].c(),c[m].m(e,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=r.length}h&64&&Q(e,"upward",_[6])},d(_){_&&f(e),_e(c,_),u=!1,Te(s)}}}function Ko(n){let e,o;return{c(){e=v("i"),this.h()},l(t){e=b(t,"I",{class:!0}),k(e).forEach(f),this.h()},h(){w(e,"class",o=ze(n[23].icon)+" svelte-1wgdizi")},m(t,l){W(t,e,l)},p(t,l){l&32&&o!==(o=ze(t[23].icon)+" svelte-1wgdizi")&&w(e,"class",o)},d(t){t&&f(e)}}}function Qo(n){let e,o,t;return{c(){e=v("img"),this.h()},l(l){e=b(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Xe(e.src,o=n[23].img)||w(e,"src",o),w(e,"alt",t=n[23].name),w(e,"class","option-icon svelte-1wgdizi")},m(l,i){W(l,e,i)},p(l,i){i&32&&!Xe(e.src,o=l[23].img)&&w(e,"src",o),i&32&&t!==(t=l[23].name)&&w(e,"alt",t)},d(l){l&&f(e)}}}function Gt(n){let e,o,t,l,i,a=(ee(n[23])?n[23].name:n[23])+"",u,s,r,c,_;function h(L,p){if(p&32&&(o=null),p&32&&(t=null),o==null&&(o=!!(ee(L[23])&&L[23].img)),o)return Qo;if(t==null&&(t=!!(ee(L[23])&&L[23].icon)),t)return Ko}let m=h(n,-1),g=m&&m(n);function N(){return n[18](n[23])}function D(...L){return n[19](n[23],...L)}return{c(){e=v("div"),g&&g.c(),l=M(),i=v("span"),u=V(a),s=M(),this.h()},l(L){e=b(L,"DIV",{class:!0,tabindex:!0,role:!0,"aria-selected":!0});var p=k(e);g&&g.l(p),l=P(p),i=b(p,"SPAN",{class:!0});var y=k(i);u=q(y,a),y.forEach(f),s=P(p),p.forEach(f),this.h()},h(){w(i,"class","option-name svelte-1wgdizi"),w(e,"class","dropdown-item svelte-1wgdizi"),w(e,"tabindex","0"),w(e,"role","option"),w(e,"aria-selected",r=n[0]===(ee(n[23])?n[23].id:n[23])),Q(e,"selected",n[0]===(ee(n[23])?n[23].id:n[23])),Q(e,"focused",n[4]===n[25])},m(L,p){W(L,e,p),g&&g.m(e,null),d(e,l),d(e,i),d(i,u),d(e,s),c||(_=[K(e,"click",N),K(e,"keydown",D)],c=!0)},p(L,p){n=L,m===(m=h(n,p))&&g?g.p(n,p):(g&&g.d(1),g=m&&m(n),g&&(g.c(),g.m(e,l))),p&32&&a!==(a=(ee(n[23])?n[23].name:n[23])+"")&&U(u,a),p&33&&r!==(r=n[0]===(ee(n[23])?n[23].id:n[23]))&&w(e,"aria-selected",r),p&33&&Q(e,"selected",n[0]===(ee(n[23])?n[23].id:n[23])),p&16&&Q(e,"focused",n[4]===n[25])},d(L){L&&f(e),g&&g.d(),c=!1,Te(_)}}}function Zo(n){let e,o,t,l,i,a,u;function s(m,g){return g&1&&(l=null),l==null&&(l=!!(m[0]&&m[7](m[0]))),l?jt:zo}function r(m,g){return g===jt?Yo(m):m}let c=s(n,-1),_=c(r(n,c)),h=n[2]&&At(n);return{c(){e=v("div"),o=v("button"),t=v("div"),_.c(),i=M(),h&&h.c(),this.h()},l(m){e=b(m,"DIV",{class:!0});var g=k(e);o=b(g,"BUTTON",{type:!0,class:!0,"aria-haspopup":!0,"aria-expanded":!0});var N=k(o);t=b(N,"DIV",{class:!0});var D=k(t);_.l(D),D.forEach(f),N.forEach(f),i=P(g),h&&h.l(g),g.forEach(f),this.h()},h(){w(t,"class","dropdown-text svelte-1wgdizi"),w(o,"type","button"),w(o,"class","dropdown-toggle svelte-1wgdizi"),w(o,"aria-haspopup","listbox"),w(o,"aria-expanded",n[2]),w(e,"class","icon-dropdown svelte-1wgdizi"),x(e,"width",n[1])},m(m,g){W(m,e,g),d(e,o),d(o,t),_.m(t,null),d(e,i),h&&h.m(e,null),n[20](e),a||(u=[K(o,"click",Re(n[15])),K(e,"keydown",n[8])],a=!0)},p(m,[g]){c===(c=s(m,g))&&_?_.p(r(m,c),g):(_.d(1),_=c(r(m,c)),_&&(_.c(),_.m(t,null))),g&4&&w(o,"aria-expanded",m[2]),m[2]?h?h.p(m,g):(h=At(m),h.c(),h.m(e,null)):h&&(h.d(1),h=null),g&2&&x(e,"width",m[1])},i:J,o:J,d(m){m&&f(e),_.d(),h&&h.d(),n[20](null),a=!1,Te(u)}}}let $o=28;function ee(n){return typeof n=="object"&&n!==null}function xo(n,e,o){let t,l,{options:i=[]}=e,{selected:a=""}=e,{width:u="200px"}=e,s=!1,r,c=-1,_,h,m;function g(T){return t.find(F=>ee(F)?F.id===T:F===T)}function N(T){s&&r&&!r.contains(T.target)&&o(2,s=!1)}function D(T){if(s)switch(T.key){case"Escape":o(2,s=!1);break;case"ArrowDown":T.preventDefault(),o(4,c=Math.min(c+1,t.length));break;case"ArrowUp":T.preventDefault(),o(4,c=Math.max(c-1,-1));break;case"Enter":case" ":if(T.preventDefault(),c===-1)y("");else{const F=t[c];y(ee(F)?F.id:F)}break}}function L(T,F){(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),y(F))}_t(()=>{document.addEventListener("click",N),o(14,m=window.innerHeight);function T(){r&&(o(13,h=r.getBoundingClientRect()),o(12,_=Math.min((t.length+1)*$o,200))),o(14,m=window.innerHeight)}return window.addEventListener("resize",T),T(),()=>{document.removeEventListener("click",N),window.removeEventListener("resize",T)}});const p=Ze();function y(T){o(0,a=T),o(2,s=!1),p("change",T)}const I=()=>o(2,s=!s),E=()=>y(""),S=T=>L(T,""),R=T=>y(ee(T)?T.id:T),O=(T,F)=>L(F,ee(T)?T.id:T);function C(T){ho[T?"unshift":"push"](()=>{r=T,o(3,r)})}return n.$$set=T=>{"options"in T&&o(11,i=T.options),"selected"in T&&o(0,a=T.selected),"width"in T&&o(1,u=T.width)},n.$$.update=()=>{n.$$.dirty&2048&&o(5,t=Array.isArray(i)?i.map(T=>{var F;return ee(T)?T:{id:T,name:((F=ft(T))==null?void 0:F.name)||T}}):[]),n.$$.dirty&28676&&o(6,l=s&&h&&h.bottom+_>m&&h.top>_)},[a,u,s,r,c,t,l,g,D,L,y,i,_,h,m,I,E,S,R,O,C]}class en extends he{constructor(e){super(),ge(this,e,xo,Zo,ce,{options:11,selected:0,width:1})}}function Ht(n,e,o){const t=n.slice();return t[27]=e[o],t[29]=o,t}function Ut(n,e,o){const t=n.slice();t[30]=e[o];const l=t[30].floors&&!t[30].floors.includes(t[0].num);return t[31]=l,t}function tn(n){let e,o,t,l,i,a,u,s,r,c,_,h,m,g,N,D=n[9],L=[];for(let E=0;E<D.length;E+=1)L[E]=Yt(Ut(n,D,E));let p=n[1]&&zt(n),y=n[0].num>=0&&n[3]&&Xt(),I=n[1]&&Jt(n);return{c(){e=v("div"),o=v("select"),t=v("option"),l=V("Pick a room...");for(let E=0;E<L.length;E+=1)L[E].c();a=M(),p&&p.c(),u=M(),s=v("button"),r=v("i"),c=M(),y&&y.c(),_=M(),I&&I.c(),h=se(),this.h()},l(E){e=b(E,"DIV",{class:!0});var S=k(e);o=b(S,"SELECT",{class:!0});var R=k(o);t=b(R,"OPTION",{});var O=k(t);l=q(O,"Pick a room..."),O.forEach(f);for(let T=0;T<L.length;T+=1)L[T].l(R);R.forEach(f),a=P(S),p&&p.l(S),u=P(S),s=b(S,"BUTTON",{class:!0});var C=k(s);r=b(C,"I",{class:!0}),k(r).forEach(f),C.forEach(f),S.forEach(f),c=P(E),y&&y.l(E),_=P(E),I&&I.l(E),h=se(),this.h()},h(){t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,w(o,"class","svelte-9hdm1t"),w(r,"class","icofont-ui-close"),w(s,"class","svelte-9hdm1t"),w(e,"class","svelte-9hdm1t")},m(E,S){var R;W(E,e,S),d(e,o),d(o,t),d(t,l);for(let O=0;O<L.length;O+=1)L[O]&&L[O].m(o,null);Je(o,((R=n[1])==null?void 0:R.type.key)||""),d(e,a),p&&p.m(e,null),d(e,u),d(e,s),d(s,r),W(E,c,S),y&&y.m(E,S),W(E,_,S),I&&I.m(E,S),W(E,h,S),m=!0,g||(N=[K(o,"change",n[18]),K(s,"click",Re(n[10]))],g=!0)},p(E,S){var R,O;if(S[0]&513){D=E[9];let C;for(C=0;C<D.length;C+=1){const T=Ut(E,D,C);L[C]?L[C].p(T,S):(L[C]=Yt(T),L[C].c(),L[C].m(o,null))}for(;C<L.length;C+=1)L[C].d(1);L.length=D.length}(!m||S[0]&514&&i!==(i=((R=E[1])==null?void 0:R.type.key)||""))&&Je(o,((O=E[1])==null?void 0:O.type.key)||""),E[1]?p?p.p(E,S):(p=zt(E),p.c(),p.m(e,u)):p&&(p.d(1),p=null),E[0].num>=0&&E[3]?y||(y=Xt(),y.c(),y.m(_.parentNode,_)):y&&(y.d(1),y=null),E[1]?I?(I.p(E,S),S[0]&2&&G(I,1)):(I=Jt(E),I.c(),G(I,1),I.m(h.parentNode,h)):I&&(de(),H(I,1,1,()=>{I=null}),fe())},i(E){m||(G(I),m=!0)},o(E){H(I),m=!1},d(E){E&&f(e),_e(L,E),p&&p.d(),E&&f(c),y&&y.d(E),E&&f(_),I&&I.d(E),E&&f(h),g=!1,Te(N)}}}function on(n){let e,o;return{c(){e=v("p"),o=V("There is no supporting room below!"),this.h()},l(t){e=b(t,"P",{class:!0});var l=k(e);o=q(l,"There is no supporting room below!"),l.forEach(f),this.h()},h(){w(e,"class","svelte-9hdm1t")},m(t,l){W(t,e,l),d(e,o)},p:J,i:J,o:J,d(t){t&&f(e)}}}function Yt(n){var r;let e,o=n[30].name+"",t,l=n[31]?` (floors: ${(r=n[30].floors)==null?void 0:r.join(", ")})`:"",i,a,u,s;return{c(){e=v("option"),t=V(o),i=V(l),a=M(),this.h()},l(c){e=b(c,"OPTION",{});var _=k(e);t=q(_,o),i=q(_,l),a=P(_),_.forEach(f),this.h()},h(){e.disabled=u=n[31],e.__value=s=n[30].key,e.value=e.__value},m(c,_){W(c,e,_),d(e,t),d(e,i),d(e,a)},p(c,_){var h;_[0]&512&&o!==(o=c[30].name+"")&&U(t,o),_[0]&513&&l!==(l=c[31]?` (floors: ${(h=c[30].floors)==null?void 0:h.join(", ")})`:"")&&U(i,l),_[0]&513&&u!==(u=c[31])&&(e.disabled=u),_[0]&512&&s!==(s=c[30].key)&&(e.__value=s,e.value=e.__value)},d(c){c&&f(e)}}}function zt(n){let e,o,t,l,i,a,u,s;return{c(){e=v("button"),o=v("i"),t=M(),l=v("button"),i=v("i"),this.h()},l(r){e=b(r,"BUTTON",{class:!0});var c=k(e);o=b(c,"I",{class:!0}),k(o).forEach(f),c.forEach(f),t=P(r),l=b(r,"BUTTON",{class:!0});var _=k(l);i=b(_,"I",{class:!0}),k(i).forEach(f),_.forEach(f),this.h()},h(){w(o,"class","icofont-ui-rotation"),w(e,"class","svelte-9hdm1t"),w(i,"class","icofont-ui-delete"),l.disabled=a=n[0].num>=0&&!!n[3],w(l,"class","svelte-9hdm1t")},m(r,c){W(r,e,c),d(e,o),W(r,t,c),W(r,l,c),d(l,i),u||(s=[K(e,"click",Re(n[11])),K(l,"click",Re(n[19]))],u=!0)},p(r,c){c[0]&9&&a!==(a=r[0].num>=0&&!!r[3])&&(l.disabled=a)},d(r){r&&f(e),r&&f(t),r&&f(l),u=!1,Te(s)}}}function Xt(n){let e,o,t,l,i;return{c(){e=v("div"),o=v("i"),t=M(),l=v("p"),i=V("This room is supportting the one above it!"),this.h()},l(a){e=b(a,"DIV",{class:!0});var u=k(e);o=b(u,"I",{class:!0}),k(o).forEach(f),t=P(u),l=b(u,"P",{class:!0});var s=k(l);i=q(s,"This room is supportting the one above it!"),s.forEach(f),u.forEach(f),this.h()},h(){w(o,"class","icofont-info svelte-9hdm1t"),w(l,"class","svelte-9hdm1t"),w(e,"class","svelte-9hdm1t")},m(a,u){W(a,e,u),d(e,o),d(e,t),d(e,l),d(l,i)},d(a){a&&f(e)}}}function Jt(n){let e,o;return e=new so({props:{tabs:["Details","Hotspots"],inverted:!0,$$slots:{default:[an,({tab:t})=>({26:t}),({tab:t})=>[t?67108864:0]]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l[0]&67109122|l[1]&8&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function nn(n){let e,o,t,l=n[8],i=[];for(let u=0;u<l.length;u+=1)i[u]=Kt(Ht(n,l,u));const a=u=>H(i[u],1,1,()=>{i[u]=null});return{c(){e=v("table"),o=v("tbody");for(let u=0;u<i.length;u+=1)i[u].c()},l(u){e=b(u,"TABLE",{});var s=k(e);o=b(s,"TBODY",{});var r=k(o);for(let c=0;c<i.length;c+=1)i[c].l(r);r.forEach(f),s.forEach(f)},m(u,s){W(u,e,s),d(e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,null);t=!0},p(u,s){if(s[0]&8450){l=u[8];let r;for(r=0;r<l.length;r+=1){const c=Ht(u,l,r);i[r]?(i[r].p(c,s),G(i[r],1)):(i[r]=Kt(c),i[r].c(),G(i[r],1),i[r].m(o,null))}for(de(),r=l.length;r<i.length;r+=1)a(r);fe()}},i(u){if(!t){for(let s=0;s<l.length;s+=1)G(i[s]);t=!0}},o(u){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)H(i[s]);t=!1},d(u){u&&f(e),_e(i,u)}}}function ln(n){let e,o,t,l,i,a,u,s=n[1].type.name+"",r,c,_,h,m,g,N,D=n[1].type.cost+"",L,p,y,I,E,S,R,O=n[1].type.minLvl+"",C;return{c(){e=v("table"),o=v("tbody"),t=v("tr"),l=v("td"),i=V("Name"),a=M(),u=v("td"),r=V(s),c=M(),_=v("tr"),h=v("td"),m=V("Cost"),g=M(),N=v("td"),L=V(D),p=M(),y=v("tr"),I=v("td"),E=V("Min. Level"),S=M(),R=v("td"),C=V(O)},l(T){e=b(T,"TABLE",{});var F=k(e);o=b(F,"TBODY",{});var z=k(o);t=b(z,"TR",{});var A=k(t);l=b(A,"TD",{});var Y=k(l);i=q(Y,"Name"),Y.forEach(f),a=P(A),u=b(A,"TD",{});var ne=k(u);r=q(ne,s),ne.forEach(f),A.forEach(f),c=P(z),_=b(z,"TR",{});var le=k(_);h=b(le,"TD",{});var ie=k(h);m=q(ie,"Cost"),ie.forEach(f),g=P(le),N=b(le,"TD",{});var te=k(N);L=q(te,D),te.forEach(f),le.forEach(f),p=P(z),y=b(z,"TR",{});var Le=k(y);I=b(Le,"TD",{});var ye=k(I);E=q(ye,"Min. Level"),ye.forEach(f),S=P(Le),R=b(Le,"TD",{});var Be=k(R);C=q(Be,O),Be.forEach(f),Le.forEach(f),z.forEach(f),F.forEach(f)},m(T,F){W(T,e,F),d(e,o),d(o,t),d(t,l),d(l,i),d(t,a),d(t,u),d(u,r),d(o,c),d(o,_),d(_,h),d(h,m),d(_,g),d(_,N),d(N,L),d(o,p),d(o,y),d(y,I),d(I,E),d(y,S),d(y,R),d(R,C)},p(T,F){F[0]&2&&s!==(s=T[1].type.name+"")&&U(r,s),F[0]&2&&D!==(D=T[1].type.cost+"")&&U(L,D),F[0]&2&&O!==(O=T[1].type.minLvl+"")&&U(C,O)},i:J,o:J,d(T){T&&f(e)}}}function Kt(n){var _;let e,o,t=n[27].name+"",l,i,a,u,s,r;function c(...h){return n[20](n[29],...h)}return u=new en({props:{options:n[27].options,selected:((_=n[1].hotspots[n[29]])==null?void 0:_.key)||""}}),u.$on("change",c),{c(){e=v("tr"),o=v("td"),l=V(t),i=M(),a=v("td"),pe(u.$$.fragment),s=M()},l(h){e=b(h,"TR",{});var m=k(e);o=b(m,"TD",{});var g=k(o);l=q(g,t),g.forEach(f),i=P(m),a=b(m,"TD",{});var N=k(a);ve(u.$$.fragment,N),N.forEach(f),s=P(m),m.forEach(f)},m(h,m){W(h,e,m),d(e,o),d(o,l),d(e,i),d(e,a),be(u,a,null),d(e,s),r=!0},p(h,m){var N;n=h,(!r||m[0]&256)&&t!==(t=n[27].name+"")&&U(l,t);const g={};m[0]&256&&(g.options=n[27].options),m[0]&2&&(g.selected=((N=n[1].hotspots[n[29]])==null?void 0:N.key)||""),u.$set(g)},i(h){r||(G(u.$$.fragment,h),r=!0)},o(h){H(u.$$.fragment,h),r=!1},d(h){h&&f(e),ke(u)}}}function an(n){let e,o,t,l;const i=[ln,nn],a=[];function u(s,r){return s[26]==="Details"?0:s[26]==="Hotspots"?1:-1}return~(e=u(n))&&(o=a[e]=i[e](n)),{c(){o&&o.c(),t=se()},l(s){o&&o.l(s),t=se()},m(s,r){~e&&a[e].m(s,r),W(s,t,r),l=!0},p(s,r){let c=e;e=u(s),e===c?~e&&a[e].p(s,r):(o&&(de(),H(a[c],1,1,()=>{a[c]=null}),fe()),~e?(o=a[e],o?o.p(s,r):(o=a[e]=i[e](s),o.c()),G(o,1),o.m(t.parentNode,t)):o=null)},i(s){l||(G(o),l=!0)},o(s){H(o),l=!1},d(s){~e&&a[e].d(s),s&&f(t)}}}function rn(n){let e,o,t,l,i;const a=[on,tn],u=[];function s(r,c){var _;return r[0].num>0&&(!r[2]||(_=r[2].type)!=null&&_.open)?0:1}return t=s(n),l=u[t]=a[t](n),{c(){e=v("div"),o=v("div"),l.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var c=k(e);o=b(c,"DIV",{class:!0});var _=k(o);l.l(_),_.forEach(f),c.forEach(f),this.h()},h(){w(o,"class","content svelte-9hdm1t"),w(e,"class","popup svelte-9hdm1t"),x(e,"top",n[7]),x(e,"bottom",n[6]),x(e,"left",n[5]),x(e,"right",n[4])},m(r,c){W(r,e,c),d(e,o),u[t].m(o,null),i=!0},p(r,c){let _=t;t=s(r),t===_?u[t].p(r,c):(de(),H(u[_],1,1,()=>{u[_]=null}),fe(),l=u[t],l?l.p(r,c):(l=u[t]=a[t](r),l.c()),G(l,1),l.m(o,null)),c[0]&128&&x(e,"top",r[7]),c[0]&64&&x(e,"bottom",r[6]),c[0]&32&&x(e,"left",r[5]),c[0]&16&&x(e,"right",r[4])},i(r){i||(G(l),i=!0)},o(r){H(l),i=!1},d(r){r&&f(e),u[t].d()}}}function sn(n,e,o){let t,l,i,a,u,s,r,c;const _=Ee/2,h=Ce/2,m=100/Ee,g=100/Ce;let{floor:N}=e,{x:D}=e,{y:L}=e,{room:p}=e,{below:y}=e,{above:I}=e;const E=Ze(),S=()=>E("close"),R=()=>E("rotateRoom",{x:D,y:L}),O=A=>{E("changeRoomType",{x:D,y:L,type:A?ao(A):null})},C=(A,Y)=>{E("changeFurniture",{x:D,y:L,hotspotIndex:A,type:Y?ft(Y):null})},T=A=>O(A.currentTarget.value),F=()=>O(null),z=(A,Y)=>C(A,Y.detail);return n.$$set=A=>{"floor"in A&&o(0,N=A.floor),"x"in A&&o(14,D=A.x),"y"in A&&o(15,L=A.y),"room"in A&&o(1,p=A.room),"below"in A&&o(2,y=A.below),"above"in A&&o(3,I=A.above)},n.$$.update=()=>{n.$$.dirty[0]&2&&o(8,l=(p==null?void 0:p.type.hotspots)||[]),n.$$.dirty[0]&32768&&o(17,i=L<h),n.$$.dirty[0]&16384&&o(16,a=D<_),n.$$.dirty[0]&163840&&o(7,u=i?`${g*(L+1)}%`:""),n.$$.dirty[0]&163840&&o(6,s=i?"":`${g*(Ce-L)}%`),n.$$.dirty[0]&81920&&o(5,r=a?`${m*D}%`:""),n.$$.dirty[0]&81920&&o(4,c=a?"":`${m*(Ee-D-1)}%`)},o(9,t=[...je].sort((A,Y)=>A.name.localeCompare(Y.name))),[N,p,y,I,c,r,s,u,l,t,S,R,O,C,D,L,a,i,T,F,z]}class cn extends he{constructor(e){super(),ge(this,e,sn,rn,ce,{floor:0,x:14,y:15,room:1,below:2,above:3},null,[-1,-1])}}function Qt(n,e,o){const t=n.slice();return t[13]=e[o],t[15]=o,t}function Zt(n,e,o){const t=n.slice();return t[16]=e[o],t[18]=o,t}function $t(n){var l;let e,o;function t(){return n[8](n[18],n[15])}return e=new Uo({props:{room:n[16],below:((l=n[1])==null?void 0:l.rooms[n[15]][n[18]])||null,selected:n[18]===n[3]&&n[15]===n[4],connections:n[7](n[18],n[15],n[16])}}),e.$on("selected",t),{c(){pe(e.$$.fragment)},l(i){ve(e.$$.fragment,i)},m(i,a){be(e,i,a),o=!0},p(i,a){var s;n=i;const u={};a&1&&(u.room=n[16]),a&2&&(u.below=((s=n[1])==null?void 0:s.rooms[n[15]][n[18]])||null),a&24&&(u.selected=n[18]===n[3]&&n[15]===n[4]),a&1&&(u.connections=n[7](n[18],n[15],n[16])),e.$set(u)},i(i){o||(G(e.$$.fragment,i),o=!0)},o(i){H(e.$$.fragment,i),o=!1},d(i){ke(e,i)}}}function xt(n){let e,o,t=n[13],l=[];for(let a=0;a<t.length;a+=1)l[a]=$t(Zt(n,t,a));const i=a=>H(l[a],1,1,()=>{l[a]=null});return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var u=k(e);for(let s=0;s<l.length;s+=1)l[s].l(u);u.forEach(f),this.h()},h(){w(e,"class","row svelte-11ba7nn")},m(a,u){W(a,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);o=!0},p(a,u){if(u&219){t=a[13];let s;for(s=0;s<t.length;s+=1){const r=Zt(a,t,s);l[s]?(l[s].p(r,u),G(l[s],1)):(l[s]=$t(r),l[s].c(),G(l[s],1),l[s].m(e,null))}for(de(),s=t.length;s<l.length;s+=1)i(s);fe()}},i(a){if(!o){for(let u=0;u<t.length;u+=1)G(l[u]);o=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)H(l[u]);o=!1},d(a){a&&f(e),_e(l,a)}}}function eo(n){var t,l;let e,o;return e=new cn({props:{floor:n[0],x:n[3],y:n[4],room:n[5],below:((t=n[1])==null?void 0:t.rooms[n[4]][n[3]])||null,above:((l=n[2])==null?void 0:l.rooms[n[4]][n[3]])||null}}),e.$on("changeRoomType",n[9]),e.$on("rotateRoom",n[10]),e.$on("changeFurniture",n[11]),e.$on("close",n[12]),{c(){pe(e.$$.fragment)},l(i){ve(e.$$.fragment,i)},m(i,a){be(e,i,a),o=!0},p(i,a){var s,r;const u={};a&1&&(u.floor=i[0]),a&8&&(u.x=i[3]),a&16&&(u.y=i[4]),a&32&&(u.room=i[5]),a&26&&(u.below=((s=i[1])==null?void 0:s.rooms[i[4]][i[3]])||null),a&28&&(u.above=((r=i[2])==null?void 0:r.rooms[i[4]][i[3]])||null),e.$set(u)},i(i){o||(G(e.$$.fragment,i),o=!0)},o(i){H(e.$$.fragment,i),o=!1},d(i){ke(e,i)}}}function _n(n){let e,o,t,l,i=n[0].rooms,a=[];for(let r=0;r<i.length;r+=1)a[r]=xt(Qt(n,i,r));const u=r=>H(a[r],1,1,()=>{a[r]=null});let s=n[3]!==null&&n[4]!==null&&eo(n);return{c(){e=v("div");for(let r=0;r<a.length;r+=1)a[r].c();o=M(),s&&s.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var c=k(e);for(let _=0;_<a.length;_+=1)a[_].l(c);o=P(c),s&&s.l(c),c.forEach(f),this.h()},h(){w(e,"class","grid svelte-11ba7nn")},m(r,c){W(r,e,c);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);d(e,o),s&&s.m(e,null),l=!0},p(r,[c]){if(c&219){i=r[0].rooms;let _;for(_=0;_<i.length;_+=1){const h=Qt(r,i,_);a[_]?(a[_].p(h,c),G(a[_],1)):(a[_]=xt(h),a[_].c(),G(a[_],1),a[_].m(e,o))}for(de(),_=i.length;_<a.length;_+=1)u(_);fe()}r[3]!==null&&r[4]!==null?s?(s.p(r,c),c&24&&G(s,1)):(s=eo(r),s.c(),G(s,1),s.m(e,null)):s&&(de(),H(s,1,1,()=>{s=null}),fe())},i(r){if(!l){for(let c=0;c<i.length;c+=1)G(a[c]);G(s),ut(()=>{l&&(t||(t=Ye(e,Qe,{},!0)),t.run(1))}),l=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)H(a[c]);H(s),t||(t=Ye(e,Qe,{},!1)),t.run(0),l=!1},d(r){r&&f(e),_e(a,r),s&&s.d(),r&&t&&t.end()}}}function un(n,e,o){let t,{floor:l}=e,{below:i}=e,{above:a}=e,u=null,s=null;const r=(D,L)=>{o(3,u=D),o(4,s=L)},c=(D,L,p)=>{if(!p)return[];const y={[De.North]:L===0?null:l.rooms[L-1][D],[De.East]:D>=Ee-1?null:l.rooms[L][D+1],[De.South]:L>=Ce-1?null:l.rooms[L+1][D],[De.West]:D===0?null:l.rooms[L][D-1]},I=[];for(const E of rt(p)){const S=y[E];if(S){for(const R of rt(S))if(E===mt(R,2)){I.push(E);break}}}return I},_=(D,L)=>r(D,L);function h(D){lt.call(this,n,D)}function m(D){lt.call(this,n,D)}function g(D){lt.call(this,n,D)}const N=()=>r(null,null);return n.$$set=D=>{"floor"in D&&o(0,l=D.floor),"below"in D&&o(1,i=D.below),"above"in D&&o(2,a=D.above)},n.$$.update=()=>{n.$$.dirty&25&&o(5,t=u!==null&&s!==null?l.rooms[s][u]:null)},[l,i,a,u,s,t,r,c,_,h,m,g,N]}class mn extends he{constructor(e){super(),ge(this,e,un,_n,ce,{floor:0,below:1,above:2})}}function to(n,e,o){const t=n.slice();return t[3]=e[o],t[17]=o,t}function oo(n){let e,o;return e=new mn({props:{floor:n[3],below:n[0].floors[n[1]-1]||null,above:n[0].floors[n[1]+1]||null}}),e.$on("changeRoomType",n[6]),e.$on("rotateRoom",n[7]),e.$on("changeFurniture",n[8]),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&8&&(i.floor=t[3]),l&3&&(i.below=t[0].floors[t[1]-1]||null),l&3&&(i.above=t[0].floors[t[1]+1]||null),e.$set(i)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function no(n){let e,o,t=n[3].num+"",l;return{c(){e=v("option"),o=V("Floor "),l=V(t),this.h()},l(i){e=b(i,"OPTION",{});var a=k(e);o=q(a,"Floor "),l=q(a,t),a.forEach(f),this.h()},h(){e.__value=n[17],e.value=e.__value},m(i,a){W(i,e,a),d(e,o),d(e,l)},p(i,a){a&1&&t!==(t=i[3].num+"")&&U(l,t)},d(i){i&&f(e)}}}function dn(n){let e,o,t=n[15]+"",l;return{c(){e=v("p"),o=V("Unknown tab "),l=V(t)},l(i){e=b(i,"P",{});var a=k(e);o=q(a,"Unknown tab "),l=q(a,t),a.forEach(f)},m(i,a){W(i,e,a),d(e,o),d(e,l)},p(i,a){a&32768&&t!==(t=i[15]+"")&&U(l,t)},i:J,o:J,d(i){i&&f(e)}}}function fn(n){let e,o;return e=new Wo({props:{rooms:n[0].floors.map(lo).flat(2)}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&1&&(i.rooms=t[0].floors.map(lo).flat(2)),e.$set(i)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function hn(n){let e,o;return e=new No({props:{requirements:n[2].levelRequirements}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&4&&(i.requirements=t[2].levelRequirements),e.$set(i)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function gn(n){let e,o;return e=new Do({props:{errors:n[2].errors}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&4&&(i.errors=t[2].errors),e.$set(i)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function pn(n){let e,o;return e=new Oo({props:{house:n[0]}}),e.$on("open",n[4]),e.$on("save",n[5]),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&1&&(i.house=t[0]),e.$set(i)},i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){H(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function vn(n){let e,o,t,l;const i=[pn,gn,hn,fn,dn],a=[];function u(s,r){return s[15]==="General"?0:s[15]==="Errors"?1:s[15]==="Requirements"?2:s[15]==="Rooms"?3:4}return e=u(n),o=a[e]=i[e](n),{c(){o.c(),t=se()},l(s){o.l(s),t=se()},m(s,r){a[e].m(s,r),W(s,t,r),l=!0},p(s,r){let c=e;e=u(s),e===c?a[e].p(s,r):(de(),H(a[c],1,1,()=>{a[c]=null}),fe(),o=a[e],o?o.p(s,r):(o=a[e]=i[e](s),o.c()),G(o,1),o.m(t.parentNode,t))},i(s){l||(G(o),l=!0)},o(s){H(o),l=!1},d(s){a[e].d(s),s&&f(t)}}}function bn(n){var gt;let e,o=n[1],t,l,i,a,u,s,r,c,_,h,m,g,N,D,L,p,y,I,E,S,R,O=n[2].totalPrice+"",C,T,F,z,A,Y,ne,le,ie=(((gt=n[2].levelRequirements[0])==null?void 0:gt.level)||0)+"",te,Le,ye,Be,$e,ue,We,xe,Fe=n[2].extent[0]+"",Ae,et,Ve=n[2].extent[1]+"",Ge,tt,Se,me,ot,ht,ae=oo(n),Ne=n[0].floors,$=[];for(let j=0;j<Ne.length;j+=1)$[j]=no(to(n,Ne,j));return Se=new so({props:{tabs:["General","Errors","Requirements","Rooms"],$$slots:{default:[vn,({tab:j})=>({15:j}),({tab:j})=>j?32768:0]},$$scope:{ctx:n}}}),{c(){e=v("div"),ae.c(),t=M(),l=v("div"),i=v("div"),a=v("button"),u=v("i"),r=M(),c=v("select");for(let j=0;j<$.length;j+=1)$[j].c();_=M(),h=v("button"),m=v("i"),N=M(),D=v("button"),L=v("i"),p=M(),y=v("div"),I=M(),E=v("div"),S=v("i"),R=M(),C=V(O),T=M(),F=v("div"),z=V("•"),A=M(),Y=v("div"),ne=v("i"),le=M(),te=V(ie),Le=M(),ye=v("div"),Be=V("•"),$e=M(),ue=v("div"),We=v("i"),xe=M(),Ae=V(Fe),et=V("x"),Ge=V(Ve),tt=M(),pe(Se.$$.fragment),this.h()},l(j){e=b(j,"DIV",{class:!0});var Z=k(e);ae.l(Z),Z.forEach(f),t=P(j),l=b(j,"DIV",{class:!0});var re=k(l);i=b(re,"DIV",{class:!0});var X=k(i);a=b(X,"BUTTON",{class:!0});var oe=k(a);u=b(oe,"I",{class:!0}),k(u).forEach(f),oe.forEach(f),r=P(X),c=b(X,"SELECT",{class:!0});var qe=k(c);for(let nt=0;nt<$.length;nt+=1)$[nt].l(qe);qe.forEach(f),_=P(X),h=b(X,"BUTTON",{class:!0});var pt=k(h);m=b(pt,"I",{class:!0}),k(m).forEach(f),pt.forEach(f),N=P(X),D=b(X,"BUTTON",{class:!0});var vt=k(D);L=b(vt,"I",{class:!0}),k(L).forEach(f),vt.forEach(f),p=P(X),y=b(X,"DIV",{class:!0}),k(y).forEach(f),I=P(X),E=b(X,"DIV",{class:!0});var He=k(E);S=b(He,"I",{class:!0}),k(S).forEach(f),R=P(He),C=q(He,O),He.forEach(f),T=P(X),F=b(X,"DIV",{class:!0});var bt=k(F);z=q(bt,"•"),bt.forEach(f),A=P(X),Y=b(X,"DIV",{class:!0});var Ue=k(Y);ne=b(Ue,"I",{class:!0}),k(ne).forEach(f),le=P(Ue),te=q(Ue,ie),Ue.forEach(f),Le=P(X),ye=b(X,"DIV",{class:!0});var kt=k(ye);Be=q(kt,"•"),kt.forEach(f),$e=P(X),ue=b(X,"DIV",{class:!0});var Me=k(ue);We=b(Me,"I",{class:!0}),k(We).forEach(f),xe=P(Me),Ae=q(Me,Fe),et=q(Me,"x"),Ge=q(Me,Ve),Me.forEach(f),X.forEach(f),tt=P(re),ve(Se.$$.fragment,re),re.forEach(f),this.h()},h(){w(e,"class","map svelte-10cuohi"),w(u,"class","icofont-arrow-up"),a.disabled=s=n[3].num>=it,w(a,"class","svelte-10cuohi"),w(c,"class","svelte-10cuohi"),n[1]===void 0&&ut(()=>n[11].call(c)),w(m,"class","icofont-arrow-down"),h.disabled=g=n[3].num<=Ke,w(h,"class","svelte-10cuohi"),w(L,"class","icofont-ui-delete"),w(D,"class","svelte-10cuohi"),w(y,"class","svelte-10cuohi"),x(y,"flex","1"),w(S,"class","icofont-money-bag"),w(E,"class","svelte-10cuohi"),w(F,"class","svelte-10cuohi"),w(ne,"class","icofont-bars"),w(Y,"class","svelte-10cuohi"),w(ye,"class","svelte-10cuohi"),w(We,"class","icofont-drag"),w(ue,"class","svelte-10cuohi"),w(i,"class","floor-controls svelte-10cuohi"),w(l,"class","sidebar svelte-10cuohi")},m(j,Z){W(j,e,Z),ae.m(e,null),W(j,t,Z),W(j,l,Z),d(l,i),d(i,a),d(a,u),d(i,r),d(i,c);for(let re=0;re<$.length;re+=1)$[re]&&$[re].m(c,null);Je(c,n[1],!0),d(i,_),d(i,h),d(h,m),d(i,N),d(i,D),d(D,L),d(i,p),d(i,y),d(i,I),d(i,E),d(E,S),d(E,R),d(E,C),d(i,T),d(i,F),d(F,z),d(i,A),d(i,Y),d(Y,ne),d(Y,le),d(Y,te),d(i,Le),d(i,ye),d(ye,Be),d(i,$e),d(i,ue),d(ue,We),d(ue,xe),d(ue,Ae),d(ue,et),d(ue,Ge),d(l,tt),be(Se,l,null),me=!0,ot||(ht=[K(a,"click",Re(n[10])),K(c,"change",n[11]),K(c,"change",n[12]),K(h,"click",Re(n[13])),K(D,"click",n[9])],ot=!0)},p(j,[Z]){var X;if(Z&2&&ce(o,o=j[1])?(de(),H(ae,1,1,J),fe(),ae=oo(j),ae.c(),G(ae,1),ae.m(e,null)):ae.p(j,Z),(!me||Z&8&&s!==(s=j[3].num>=it))&&(a.disabled=s),Z&1){Ne=j[0].floors;let oe;for(oe=0;oe<Ne.length;oe+=1){const qe=to(j,Ne,oe);$[oe]?$[oe].p(qe,Z):($[oe]=no(qe),$[oe].c(),$[oe].m(c,null))}for(;oe<$.length;oe+=1)$[oe].d(1);$.length=Ne.length}Z&2&&Je(c,j[1]),(!me||Z&8&&g!==(g=j[3].num<=Ke))&&(h.disabled=g),(!me||Z&4)&&O!==(O=j[2].totalPrice+"")&&U(C,O),(!me||Z&4)&&ie!==(ie=(((X=j[2].levelRequirements[0])==null?void 0:X.level)||0)+"")&&U(te,ie),(!me||Z&4)&&Fe!==(Fe=j[2].extent[0]+"")&&U(Ae,Fe),(!me||Z&4)&&Ve!==(Ve=j[2].extent[1]+"")&&U(Ge,Ve);const re={};Z&294917&&(re.$$scope={dirty:Z,ctx:j}),Se.$set(re)},i(j){me||(G(ae),G(Se.$$.fragment,j),me=!0)},o(j){H(ae),H(Se.$$.fragment,j),me=!1},d(j){j&&f(e),ae.d(j),j&&f(t),j&&f(l),_e($,j),ke(Se),ot=!1,Te(ht)}}}const lo=n=>n.rooms;function kn(n,e,o){let t,l,i;go(n,vo,p=>o(14,i=p));let a=io(),u=Math.abs(Ke);_t(()=>{i.url.search?o(0,a=ro(i.url.searchParams)):o(0,a.floors[1].rooms[4][4]=wt(a.floors[1],4,4,ao("garden")),a)});const s=p=>{o(0,a=p.detail.house),Pe(`?${Oe(a)}`,{replaceState:!0})},r=p=>{Pe(`?${Oe(a)}`,{replaceState:!0})},c=p=>{p.detail.type===null?o(0,a.floors[u].rooms[p.detail.y][p.detail.x]=null,a):o(0,a.floors[u].rooms[p.detail.y][p.detail.x]=wt(a.floors[u],p.detail.x,p.detail.y,p.detail.type),a),Pe(`?${Oe(a)}`,{replaceState:!0})},_=p=>{const y=a.floors[u].rooms[p.detail.y][p.detail.x];y&&(y.orientation=mt(y.orientation),o(0,a.floors[u].rooms[p.detail.y][p.detail.x]=y,a),Pe(`?${Oe(a)}`,{replaceState:!0}))},h=p=>{const y=a.floors[u].rooms[p.detail.y][p.detail.x];y&&(y.hotspots[p.detail.hotspotIndex]=p.detail.type,Pe(`?${Oe(a)}`,{replaceState:!0}))},m=()=>{var p;if(confirm("Are you sure you want to delete all rooms on this floor?")){for(let y=0;y<Ce;y++)for(let I=0;I<Ee;I++)(a.floors[u].num<0||!((p=a.floors[u+1])!=null&&p.rooms[y][I]))&&o(0,a.floors[u].rooms[y][I]=null,a);Pe(`?${Oe(a)}`,{replaceState:!0})}},g=()=>o(1,u++,u);function N(){u=po(this),o(1,u)}const D=p=>o(1,u=Number(p.currentTarget.value)),L=()=>o(1,u--,u);return n.$$.update=()=>{n.$$.dirty&3&&o(3,t=a.floors[u]),n.$$.dirty&1&&o(2,l=ko(a))},[a,u,l,t,s,r,c,_,h,m,g,N,D,L]}class Tn extends he{constructor(e){super(),ge(this,e,kn,bn,ce,{})}}export{Tn as default};
